#N canvas 543 62 620 229 10;
#X declare -path ../handy-abs -path ../pitch-abs;
#X declare -lib mrpeach;
#N canvas 96 23 450 300 guts 0;
#N canvas 610 140 1069 812 sequence 0;
#X obj 106 -26 + 1;
#X obj 77 -27 f 0;
#X floatatom 165 234 5 0 0 1 length - -;
#X obj 78 234 list-wrandom;
#X obj 332 357 + 0;
#X floatatom 347 336 5 0 0 0 - - -;
#X text 384 335 transpose (0-11);
#X msg 332 403 \$1 120;
#X msg 194 36 major;
#X obj 149 78 pack f s;
#X msg 194 16 minor;
#X obj 194 57 tosymbol;
#X msg 149 123 set \$1 \, bang;
#X floatatom 149 55 5 0 0 0 - - -;
#X obj 332 380 + 29;
#X text 365 377 add 29 to lowest note (zero)!;
#X obj 194 -7 loadbang;
#X obj 332 427 makenote 120 120;
#X obj 165 145 loadbang;
#X obj 165 166 del 1;
#X obj 357 457 noteout;
#X msg 149 100 symbol step-\$1-\$2;
#X obj 149 189 tabdump step-7-minor;
#X obj 77 19 t b f;
#X obj 306 320 sel 12;
#X obj 80 266 list append;
#X obj 113 299 t l;
#X obj 77 -53 until;
#X obj 308 -134 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 359 -133 /;
#X msg 359 -161 60000 \$1;
#X floatatom 359 -183 5 0 0 0 - - -;
#X obj 359 -108 / 4;
#X obj 101 -76 t f b;
#X msg 164 -60 0;
#X obj 59 305 list;
#X obj 306 271 packel;
#X obj 337 -62 + 1;
#X obj 308 -63 f 0;
#X obj 107 323 s loop;
#X obj 59 342 print loop;
#X obj 327 218 r loop;
#X obj 306 246 list;
#X obj 306 187 t b f;
#X floatatom 306 295 5 0 0 0 - - -;
#X text 296 -165 START;
#X msg 101 -98 32;
#X obj 77 -4 mod 32;
#X obj 10 150 sel 31;
#X obj -367 -10 list-wrandom;
#X obj -299 -39 tabdump silences;
#X obj -142 -117 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom -369 25 5 0 0 0 - - -;
#X obj 5 -199 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 5 -177 s gen_loop;
#X obj 101 -127 r gen_loop;
#X obj -365 -86 until;
#X obj -341 -225 r gen_loop;
#X obj -306 78 list append;
#X obj -273 111 t l;
#X obj -141 330 list;
#X obj 306 -34 mod 32;
#X obj -140 391 print silences;
#X obj -82 355 s silences;
#X obj 461 15 r silences;
#X obj 416 39 listfind;
#X obj 421 83 route bang float;
#X msg 421 109 1;
#X msg 467 112 0;
#X obj 306 109 spigot;
#X obj 306 -8 t f f;
#X obj -114 -72 -;
#X msg -114 -96 32 \$1;
#X floatatom -114 -116 5 0 0 0 - - -;
#X floatatom -95 64 5 0 0 0 - - -;
#X obj -341 -201 t b b;
#X obj -304 145 list-unique;
#X obj -303 171 t l l;
#X obj -248 198 list length;
#X obj -99 252 ==;
#X msg -114 -139 5;
#X obj -114 -160 loadbang;
#X obj -97 289 sel 1;
#X floatatom 369 55 5 0 0 0 - - -;
#X floatatom 431 61 5 0 0 0 - - -;
#X floatatom 349 155 5 0 0 0 - - -;
#X floatatom 398 -88 5 0 0 0 - - -;
#X obj 308 -83 metro 120;
#X obj 149 211 normalize;
#X connect 0 0 1 1;
#X connect 1 0 0 0;
#X connect 1 0 47 0;
#X connect 1 0 48 0;
#X connect 3 0 25 0;
#X connect 3 1 2 0;
#X connect 4 0 14 0;
#X connect 5 0 4 1;
#X connect 7 0 17 0;
#X connect 8 0 11 0;
#X connect 9 0 21 0;
#X connect 10 0 11 0;
#X connect 11 0 9 1;
#X connect 12 0 22 0;
#X connect 13 0 9 0;
#X connect 14 0 7 0;
#X connect 16 0 10 0;
#X connect 17 0 20 0;
#X connect 17 1 20 1;
#X connect 18 0 19 0;
#X connect 19 0 22 0;
#X connect 21 0 12 0;
#X connect 22 0 88 0;
#X connect 23 0 3 0;
#X connect 23 1 13 0;
#X connect 24 1 4 0;
#X connect 25 0 26 0;
#X connect 25 0 35 1;
#X connect 26 0 25 1;
#X connect 27 0 1 0;
#X connect 28 0 87 0;
#X connect 29 0 32 0;
#X connect 30 0 29 0;
#X connect 31 0 30 0;
#X connect 32 0 86 0;
#X connect 32 0 87 1;
#X connect 33 0 27 0;
#X connect 33 1 25 1;
#X connect 33 1 34 0;
#X connect 34 0 1 1;
#X connect 35 0 39 0;
#X connect 35 0 40 0;
#X connect 36 0 44 0;
#X connect 37 0 38 1;
#X connect 38 0 37 0;
#X connect 38 0 61 0;
#X connect 41 0 42 1;
#X connect 42 0 36 0;
#X connect 43 0 42 0;
#X connect 43 1 36 1;
#X connect 44 0 24 0;
#X connect 46 0 33 0;
#X connect 47 0 23 0;
#X connect 48 0 35 0;
#X connect 49 0 52 0;
#X connect 49 0 58 0;
#X connect 50 0 49 1;
#X connect 51 0 50 0;
#X connect 53 0 54 0;
#X connect 55 0 46 0;
#X connect 56 0 49 0;
#X connect 57 0 75 0;
#X connect 58 0 59 0;
#X connect 58 0 76 0;
#X connect 59 0 58 1;
#X connect 60 0 62 0;
#X connect 60 0 63 0;
#X connect 61 0 70 0;
#X connect 64 0 65 1;
#X connect 65 0 66 0;
#X connect 65 0 84 0;
#X connect 66 0 67 0;
#X connect 66 1 68 0;
#X connect 67 0 69 1;
#X connect 68 0 69 1;
#X connect 69 0 43 0;
#X connect 69 0 85 0;
#X connect 70 0 69 0;
#X connect 70 1 65 0;
#X connect 70 1 83 0;
#X connect 71 0 74 0;
#X connect 72 0 71 0;
#X connect 73 0 72 0;
#X connect 74 0 79 1;
#X connect 75 0 56 0;
#X connect 75 1 58 1;
#X connect 76 0 77 0;
#X connect 77 0 78 0;
#X connect 77 1 60 1;
#X connect 78 0 79 0;
#X connect 79 0 82 0;
#X connect 80 0 73 0;
#X connect 81 0 80 0;
#X connect 82 0 56 1;
#X connect 82 0 60 0;
#X connect 87 0 38 0;
#X connect 88 0 3 1;
#X restore -210 -1880 pd sequence;
#X obj -210 -1900 table silences 32;
#X obj -210 -1921 declare -path ../handy-abs -path ../pitch-abs;
#X obj -99 -1900 import mrpeach;
#N canvas 1292 78 518 242 number_of_notes 0;
#X obj 7 -1450 cnv 15 350 230 empty empty empty 20 12 0 14 -261682
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array NumberOfNotes 117 float 0;
#X coords 0 1 116 -1 300 190 1 0 0;
#X restore 33 -1427 graph;
#X obj 362 -1450 cnv 15 150 115 empty empty empty 20 12 0 14 -260965
-66577 0;
#X obj 372 -1393 tabdump NumberOfNotes;
#X msg 392 -1413 set NumberOfNotes;
#X obj 372 -1413 bng 16 250 50 0 empty non empty 17 7 0 10 -260097
-1 -1;
#X obj 372 -1373 print NUMERO DE NOTES;
#X text 367 -1441 Extract the information;
#X text 366 -1430 from the table;
#X obj 362 -1330 cnv 15 150 109 empty empty empty 20 12 0 14 -260889
-66577 0;
#X obj 384 -1259 s NumberOfNotes;
#X msg 384 -1279 const 0;
#X text 380 -1316 Reset table values;
#X obj 384 -1299 bng 16 250 50 0 empty empty empty 17 7 0 10 -260097
-1 -1;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 11 0 10 0;
#X connect 13 0 11 0;
#X restore -136 -1880 pd number_of_notes;
#N canvas 1287 85 627 978 load_files 0;
#X floatatom 229 -1682 5 0 0 0 - - -;
#X obj 10 -1737 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 37 -1738 refresh;
#X text 97 -1739 "refresh" to get list of files and init;
#X obj 10 -1764 until;
#X msg 10 -1785 117;
#X obj 57 -1305 key2pc;
#X symbolatom 72 -1328 80 0 0 0 - - -;
#X text 141 -1328 key name;
#X obj 20 -1686 s fileDir;
#X text 46 -1765 Loop to go over all the 117 MIDI files in the folder
;
#X obj 10 -1708 listdir ../files/midi_basslines/*.mid;
#X obj 10 -1825 loadbang;
#X obj 10 -1805 t b b;
#X obj 90 -1285 s mode_number;
#X obj 57 -1261 s key_number;
#N canvas 520 229 853 713 midiextract 0;
#X msg 128 47 read \$1;
#X obj 294 159 route bang format tracks ticks_per_quarternote;
#X obj 238 67 loadbang;
#X obj 128 28 symbol;
#X obj 128 105 until;
#X obj 128 7 inlet;
#X msg 341 376 bang;
#X obj 457 209 *;
#X obj 627 192 inlet;
#X floatatom 505 185 5 0 0 0 - - -;
#X text 538 182 <- ticks per beat;
#X obj 457 187 t f f;
#X obj 441 341 /;
#X text 466 340 <- convert tiks to sixteenth note;
#X obj 484 286 / 4;
#X obj 441 363 int;
#X text 511 330 <- always queantize down;
#X obj 128 66 t b a b;
#X obj 341 397 outlet;
#X obj 416 233 %;
#X obj 416 255 sel 0;
#X msg 179 66 bang;
#X obj 416 275 t b b;
#X obj 441 316 %;
#X obj 341 350 spigot;
#X obj 327 204 t f f f;
#X obj 147 139 mrpeach/midifile wowo.mid;
#X msg 238 87 verbose 0;
#X obj 47 433 list append;
#X obj 441 384 change -523;
#X obj 47 455 unpack f f;
#X obj 145 507 !=;
#X obj 104 533 spigot;
#X obj 104 479 t f f f;
#X obj 178 553 sel 0;
#X obj 47 682 outlet;
#X obj 47 660 pack;
#X obj 178 591 f;
#X obj 178 661 + 0.1;
#X obj 178 614 t f f;
#X obj 178 637 tabread silences;
#X obj 178 684 tabwrite silences;
#X obj 68 615 tabread pitchmap;
#X obj 68 639 - 29;
#X obj 83 566 r key_name;
#X obj 68 592 -;
#X obj -99 178 route 144 145 146 147 148 149 150 151 152 153 154 155
156 157 158 159;
#X obj 12 399 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 0 0 17 0;
#X connect 1 0 21 0;
#X connect 1 0 24 0;
#X connect 1 3 9 0;
#X connect 1 3 11 0;
#X connect 2 0 27 0;
#X connect 3 0 0 0;
#X connect 4 0 26 0;
#X connect 5 0 3 0;
#X connect 6 0 18 0;
#X connect 7 0 19 1;
#X connect 7 0 23 1;
#X connect 8 0 7 1;
#X connect 11 0 7 0;
#X connect 11 1 14 0;
#X connect 12 0 15 0;
#X connect 14 0 12 1;
#X connect 15 0 29 0;
#X connect 17 0 4 0;
#X connect 17 1 26 0;
#X connect 19 0 20 0;
#X connect 20 0 22 0;
#X connect 21 0 4 1;
#X connect 22 1 24 0;
#X connect 23 0 12 0;
#X connect 24 0 6 0;
#X connect 25 0 23 0;
#X connect 25 1 19 0;
#X connect 25 2 24 1;
#X connect 26 0 46 0;
#X connect 26 1 25 0;
#X connect 26 2 1 0;
#X connect 27 0 26 0;
#X connect 28 0 30 0;
#X connect 29 0 28 0;
#X connect 30 0 36 0;
#X connect 30 0 37 1;
#X connect 30 1 33 0;
#X connect 31 0 32 1;
#X connect 31 0 34 0;
#X connect 32 0 45 0;
#X connect 33 0 32 0;
#X connect 33 1 31 1;
#X connect 33 2 31 0;
#X connect 34 0 37 0;
#X connect 36 0 35 0;
#X connect 37 0 39 0;
#X connect 38 0 41 0;
#X connect 39 0 40 0;
#X connect 39 1 41 1;
#X connect 40 0 38 0;
#X connect 42 0 43 0;
#X connect 43 0 36 1;
#X connect 44 0 45 1;
#X connect 45 0 42 0;
#X connect 46 0 28 1;
#X connect 46 1 28 1;
#X connect 46 2 28 1;
#X connect 46 3 28 1;
#X connect 46 4 28 1;
#X connect 46 5 28 1;
#X connect 46 6 28 1;
#X connect 46 7 28 1;
#X connect 46 8 28 1;
#X connect 46 9 28 1;
#X connect 46 10 28 1;
#X connect 46 11 28 1;
#X connect 46 12 28 1;
#X connect 46 13 28 1;
#X connect 46 14 28 1;
#X connect 46 15 28 1;
#X connect 47 0 28 0;
#X restore 10 -1196 pd midiextract;
#X obj 49 -1116 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 10 -1092 prepend;
#X obj 10 -1068 route 0 1;
#X obj 49 -1138 r mode_number;
#X obj 10 -1661 t s s;
#X obj 10 -1018 s fill-major;
#X obj 35 -1042 s fill-minor;
#X obj 137 -1141 print;
#X floatatom 185 -1251 5 0 0 0 - - -;
#X floatatom 175 -1224 5 0 0 0 - - -;
#X obj 29 -1487 list split 1;
#X obj 29 -1508 jasch_lib/strtok .;
#X obj 86 -1404 length;
#X obj 29 -1421 t l l;
#X obj 29 -1466 jasch_lib/strtok _;
#X obj 29 -1443 list;
#X obj 86 -1382 - 1;
#X obj 29 -1361 list split;
#X obj -5 -1532 list split 1;
#X obj 37 -1639 jasch_lib/strtok /;
#X obj 64 -1576 length;
#X obj 37 -1619 list;
#X obj 37 -1598 t l l;
#X obj 64 -1555 - 1;
#X obj 91 -1240 loadbang;
#X msg 91 -1219 8;
#X obj 259 -1496 midiquantizer;
#X obj 102 -1176 s;
#X connect 1 0 11 0;
#X connect 2 0 11 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 15 0;
#X connect 6 0 26 0;
#X connect 6 1 14 0;
#X connect 6 1 25 0;
#X connect 11 0 9 0;
#X connect 11 0 21 0;
#X connect 11 1 0 0;
#X connect 12 0 13 0;
#X connect 13 0 5 0;
#X connect 13 1 2 0;
#X connect 16 0 18 0;
#X connect 16 0 24 0;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X connect 19 0 22 0;
#X connect 19 1 23 0;
#X connect 20 0 17 0;
#X connect 21 0 16 0;
#X connect 21 1 36 0;
#X connect 27 0 31 0;
#X connect 28 0 27 0;
#X connect 29 0 33 0;
#X connect 30 0 34 0;
#X connect 30 1 29 0;
#X connect 31 0 32 0;
#X connect 32 0 30 0;
#X connect 33 0 34 1;
#X connect 34 1 7 0;
#X connect 34 1 6 0;
#X connect 35 1 28 0;
#X connect 36 0 38 0;
#X connect 37 0 40 0;
#X connect 38 0 39 0;
#X connect 39 0 35 0;
#X connect 39 1 37 0;
#X connect 40 0 35 1;
#X connect 41 0 42 0;
#X connect 42 0 16 1;
#X restore -21 -1880 pd load_files;
#N canvas 615 162 413 664 tables 0;
#X obj 16 -77 pc-tab25 0 major;
#X obj 16 -58 pc-tab25 1 major;
#X obj 16 -38 pc-tab25 2 major;
#X obj 16 -18 pc-tab25 3 major;
#X obj 17 2 pc-tab25 4 major;
#X obj 16 22 pc-tab25 5 major;
#X obj 16 41 pc-tab25 6 major;
#X obj 16 61 pc-tab25 7 major;
#X obj 16 81 pc-tab25 8 major;
#X obj 16 101 pc-tab25 9 major;
#X obj 10 121 pc-tab25 10 major;
#X obj 10 140 pc-tab25 11 major;
#X obj 10 160 pc-tab25 12 major;
#X obj 10 180 pc-tab25 13 major;
#X obj 10 200 pc-tab25 14 major;
#X obj 10 220 pc-tab25 15 major;
#X obj 121 -77 pc-tab25 0 minor;
#X obj 121 -58 pc-tab25 1 minor;
#X obj 121 -38 pc-tab25 2 minor;
#X obj 121 -18 pc-tab25 3 minor;
#X obj 121 2 pc-tab25 4 minor;
#X obj 121 22 pc-tab25 5 minor;
#X obj 121 41 pc-tab25 6 minor;
#X obj 121 61 pc-tab25 7 minor;
#X obj 121 81 pc-tab25 8 minor;
#X obj 121 101 pc-tab25 9 minor;
#X obj 121 121 pc-tab25 10 minor;
#X obj 121 140 pc-tab25 11 minor;
#X obj 121 160 pc-tab25 12 minor;
#X obj 121 180 pc-tab25 13 minor;
#X obj 121 200 pc-tab25 14 minor;
#X obj 121 220 pc-tab25 15 minor;
#X obj 121 240 pc-tab25 16 minor;
#X obj 121 259 pc-tab25 17 minor;
#X obj 121 279 pc-tab25 18 minor;
#X obj 121 299 pc-tab25 19 minor;
#X obj 121 319 pc-tab25 20 minor;
#X obj 121 339 pc-tab25 21 minor;
#X obj 121 358 pc-tab25 22 minor;
#X obj 11 359 pc-tab25 22 major;
#X obj 11 339 pc-tab25 21 major;
#X obj 11 299 pc-tab25 19 major;
#X obj 11 279 pc-tab25 18 major;
#X obj 11 259 pc-tab25 17 major;
#X obj 11 240 pc-tab25 16 major;
#X obj 11 319 pc-tab25 20 major;
#X obj 11 378 pc-tab25 23 major;
#X obj 121 378 pc-tab25 23 minor;
#X obj 121 398 pc-tab25 24 minor;
#X obj 121 418 pc-tab25 25 minor;
#X obj 121 438 pc-tab25 26 minor;
#X obj 121 457 pc-tab25 27 minor;
#X obj 121 477 pc-tab25 28 minor;
#X obj 121 497 pc-tab25 29 minor;
#X obj 121 517 pc-tab25 30 minor;
#X obj 121 537 pc-tab25 31 minor;
#X obj 11 537 pc-tab25 31 major;
#X obj 11 517 pc-tab25 30 major;
#X obj 11 497 pc-tab25 29 major;
#X obj 12 477 pc-tab25 28 major;
#X obj 11 457 pc-tab25 27 major;
#X obj 11 438 pc-tab25 26 major;
#X obj 11 418 pc-tab25 25 major;
#X obj 11 398 pc-tab25 24 major;
#X restore -7 -1900 pd tables;
#N canvas 393 78 710 458 pitch-map 0;
#X floatatom 77 42 5 0 0 0 - - -;
#N canvas 0 22 450 278 (subpatch) 0;
#X array pitchmap 73 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 36 37 38 39 40 29 30 31 32 33 34 35 36
37 38 39 40 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
48 49 50 51 52 53 42 43 44 45 46 47 48 49 50 51 40 41 42 43 44 45 46
47 48;
#X coords 0 73 73 0 200 200 1 0 0;
#X restore 339 -157 graph;
#X obj 70 -97 tabwrite pitchmap;
#X obj 125 -22 tabread pitchmap;
#X floatatom 141 -50 5 0 0 0 - - -;
#X floatatom 141 12 5 0 0 0 - - -;
#X floatatom 74 -204 5 0 0 0 - - -;
#X obj 70 -122 pack;
#X obj 67 -183 t f f;
#X floatatom 122 -133 5 0 0 0 - - -;
#X text 339 51 0 - 72;
#X text 255 86 hemos analizado el rango total de todo el corpus resultando
de 12 a 72;
#X text 256 118 el rango real que usamos es de m.n. 29 (F \, pc 5)
a m.n. 53 (F \, pc 5)... de modo que tengamos notas a ambos lados de
la octava principal de Do a Do (36-48).;
#X obj 60 -160 + 24;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 6 0 8 0;
#X connect 7 0 2 0;
#X connect 8 0 13 0;
#X connect 8 1 7 1;
#X connect 13 0 7 0;
#X connect 13 0 9 0;
#X restore -209 -1860 pd pitch-map;
#X restore 65 -1475 pd guts;
#X obj -485 -1520 cnv 15 100 60 empty pattern 0 20 12 0 14 -233017
-66577 0;
#X obj -485 -1640 hradio 50 1 0 12 key_root set-key_root empty 0 -8
0 10 -262144 -261234 -1 0;
#X text -463 -1623 C;
#X text -415 -1623 Db;
#X text -363 -1623 D;
#X text -317 -1623 Eb;
#X text -167 -1623 Gb;
#X text -117 -1623 G;
#X text -67 -1623 Ab;
#X text -14 -1623 A;
#X text -263 -1623 E;
#X text 36 -1623 Bb;
#X text 86 -1623 B;
#X obj 65 -1580 vradio 50 1 0 2 key_mode set-key_mode empty 0 -8 0
10 -262144 -261234 -1 1;
#X obj -15 -1580 tgl 50 0 start set-start empty 17 7 0 10 -262144 -261234
-1 0 1;
#X text -5 -1545 start;
#X text -213 -1623 F;
#X obj -485 -1580 hradio 50 1 0 4 bars set-bars empty 0 -8 0 10 -262144
-261234 -1 0;
#X text 80 -1564 maj;
#X text 80 -1514 min;
#X obj -95 -1580 tgl 50 0 make_new reset_seq empty 17 7 0 10 -262144
-261234 -1 0 1;
#X obj -252 -1580 hsl 129 50 -1 1 0 0 register set-register empty -2
-8 0 10 -262144 -261234 -1 6400 1;
#X text -235 -1562 low;
#X text -464 -1563 1;
#X text -414 -1563 2;
#X text -364 -1563 4;
#X text -314 -1563 8;
#X text -165 -1562 high;
#X text -78 -1546 new;
#X obj -15 -1520 cnv 15 50 60 empty empty bass 0 15 0 22 -261234 -66577
0;
#X obj -15 -1490 cnv 15 50 20 empty empty house 0 12 0 17 -261234 -66577
0;
