#N canvas 659 314 856 576 10;
#X declare -path ../handy-abs -path ../pitch-abs;
#X msg 37 -711 bang;
#X floatatom 106 -366 5 0 0 1 length - -;
#X obj 37 -388 list-wrandom;
#X text 74 -712 single random value;
#X obj 64 -316 + 0;
#X floatatom 79 -337 5 0 0 0 - - -;
#X text 116 -338 transpose (0-11);
#X msg 64 -270 \$1 120;
#X msg 111 -648 major;
#X obj 66 -606 pack f s;
#X msg 111 -668 minor;
#X obj 111 -627 tosymbol;
#X msg 66 -561 set \$1 \, bang;
#X floatatom 66 -629 5 0 0 0 - - -;
#X obj 37 -358 t f f;
#N canvas 0 22 450 300 (subpatch) 0;
#X array tabla 25 float 1;
#A 0 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5
0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5;
#X coords 0 1 24 0 200 140 1 0 0;
#X restore -520 -400 graph;
#X obj -50 -596 vsl 15 129 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 6400 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array result 25 float 1;
#A 0 0 0 0 0.0526316 0 0.0263158 0 0.0789474 0 0.447368 0.210526 0
0.157895 0 0 0 0.0263158 0 0 0 0 0 0 0 0;
#X coords 0 1 24 0 200 140 1 0 0;
#X restore -520 -400 graph;
#X obj -50 -360 tabset result;
#X obj 64 -293 + 29;
#X text 97 -296 add 29 to lowest note (zero)!;
#X obj 111 -691 loadbang;
#X obj -50 -453 sigmoid 25;
#X obj 64 -423 tabwrite tabla;
#X obj 37 -734 r onset;
#X obj 64 -246 makenote 120 120;
#X msg -50 -619 0;
#X obj 82 -539 loadbang;
#X obj 82 -518 del 1;
#X obj 89 -216 noteout;
#X obj -50 -385 normalize;
#X msg -541 -671 refresh;
#X text -482 -672 "refresh" to get list of files and init;
#X obj -529 -651 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text -503 -652 "bang" to retrieve ALL FILES!;
#N canvas 801 80 594 852 extract_ground_truth 0;
#X obj -290 -77 mrpeach/midifile;
#X msg -290 -132 read \$1;
#X obj -290 0 route 144 145 146 147 148 149 150 151 152 153 154 155
156 157 158 159;
#X obj -290 68 unpack 0 0;
#X obj -197 -54 route bang;
#X floatatom -98 -290 5 0 0 0 - - -;
#X obj -416 -90 list split 1;
#X obj -416 -111 jasch_lib/strtok .;
#X obj -359 -7 length;
#X obj -416 -24 t l l;
#X obj -416 -69 jasch_lib/strtok _;
#X obj -416 -46 list;
#X obj -359 15 - 1;
#X obj -416 36 list split;
#X obj -388 58 key2pc;
#X text -58 -291 number of midi files in folder;
#X obj -280 -101 until;
#X obj -243 189 -;
#X obj -389 82 t b f;
#X obj -317 -291 t s s;
#X obj -304 -360 f;
#X obj -304 -338 until;
#X obj -374 -418 inlet;
#X obj -374 -396 route bang;
#X obj -250 128 once;
#X obj -287 161 i;
#X obj -243 261 pack f f;
#X msg -308 293 \$2 \$1;
#X obj -169 280 t f;
#X obj -308 316 list prepend;
#X obj -308 339 route 0 1;
#X obj -308 384 s fill-major;
#X obj -283 361 s fill-minor;
#X obj -243 216 tabread pitchmap;
#X obj -243 240 - 29;
#X text -210 239 make lowest note zero!;
#X obj -317 -314 listdir ../files/midi_basslines/*.mid;
#X msg -160 -114 verbose 0;
#X obj -450 -135 list split 1;
#X obj -408 -242 jasch_lib/strtok /;
#X obj -381 -179 length;
#X obj -408 -222 list;
#X obj -408 -201 t l l;
#X obj -381 -158 - 1;
#X obj -160 -136 loadbang;
#X connect 0 0 2 0;
#X connect 0 2 4 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 0;
#X connect 2 2 3 0;
#X connect 2 3 3 0;
#X connect 2 4 3 0;
#X connect 2 5 3 0;
#X connect 2 6 3 0;
#X connect 2 7 3 0;
#X connect 2 8 3 0;
#X connect 2 9 3 0;
#X connect 2 10 3 0;
#X connect 2 11 3 0;
#X connect 2 12 3 0;
#X connect 2 13 3 0;
#X connect 2 14 3 0;
#X connect 2 15 3 0;
#X connect 3 0 24 0;
#X connect 3 0 17 0;
#X connect 4 0 16 1;
#X connect 4 0 25 0;
#X connect 5 0 20 1;
#X connect 6 0 10 0;
#X connect 7 0 6 0;
#X connect 8 0 12 0;
#X connect 9 0 13 0;
#X connect 9 1 8 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 12 0 13 1;
#X connect 13 1 14 0;
#X connect 14 0 18 0;
#X connect 14 1 29 1;
#X connect 16 0 0 0;
#X connect 17 0 33 0;
#X connect 18 0 16 0;
#X connect 18 0 24 1;
#X connect 18 1 17 1;
#X connect 19 0 39 0;
#X connect 19 1 1 0;
#X connect 20 0 21 0;
#X connect 21 0 36 0;
#X connect 22 0 23 0;
#X connect 23 0 20 0;
#X connect 23 1 36 0;
#X connect 24 0 25 1;
#X connect 25 0 17 0;
#X connect 26 0 27 0;
#X connect 26 0 28 0;
#X connect 27 0 29 0;
#X connect 28 0 26 1;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 30 1 32 0;
#X connect 33 0 34 0;
#X connect 34 0 26 0;
#X connect 36 0 19 0;
#X connect 36 1 5 0;
#X connect 37 0 0 0;
#X connect 38 1 7 0;
#X connect 39 0 41 0;
#X connect 40 0 43 0;
#X connect 41 0 42 0;
#X connect 42 0 38 0;
#X connect 42 1 40 0;
#X connect 43 0 38 1;
#X connect 44 0 37 0;
#X restore -541 -628 pd extract_ground_truth;
#N canvas 393 78 710 458 pitch-map 0;
#X floatatom 77 42 5 0 0 0 - - -;
#N canvas 0 22 450 278 (subpatch) 0;
#X array pitchmap 73 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 36 37 38 39 40 29 30 31 32 33 34 35 36
37 38 39 40 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
48 49 50 51 52 53 42 43 44 45 46 47 48 49 50 51 40 41 42 43 44 45 46
47 48;
#X coords 0 73 73 0 200 200 1 0 0;
#X restore 339 -157 graph;
#X obj 70 -97 tabwrite pitchmap;
#X obj 125 -22 tabread pitchmap;
#X floatatom 141 -50 5 0 0 0 - - -;
#X floatatom 141 12 5 0 0 0 - - -;
#X floatatom 74 -204 5 0 0 0 - - -;
#X obj 70 -122 pack;
#X obj 67 -183 t f f;
#X floatatom 122 -133 5 0 0 0 - - -;
#X text 339 51 0 - 72;
#X text 255 86 hemos analizado el rango total de todo el corpus resultando
de 12 a 72;
#X text 256 118 el rango real que usamos es de m.n. 29 (F \, pc 5)
a m.n. 53 (F \, pc 5)... de modo que tengamos notas a ambos lados de
la octava principal de Do a Do (36-48).;
#X obj 60 -160 + 24;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 6 0 8 0;
#X connect 7 0 2 0;
#X connect 8 0 13 0;
#X connect 8 1 7 1;
#X connect 13 0 7 0;
#X connect 13 0 9 0;
#X restore -332 -628 pd pitch-map;
#N canvas 82 219 507 291 tables 0;
#X obj 14 -343 pc-tab25 0 major;
#X obj 14 -323 pc-tab25 1 major;
#X obj 14 -303 pc-tab25 2 major;
#X obj 14 -283 pc-tab25 3 major;
#X obj 14 -263 pc-tab25 4 major;
#X obj 14 -243 pc-tab25 5 major;
#X obj 14 -223 pc-tab25 6 major;
#X obj 14 -203 pc-tab25 7 major;
#X obj 14 -183 pc-tab25 8 major;
#X obj 14 -163 pc-tab25 9 major;
#X obj 14 -143 pc-tab25 10 major;
#X obj 14 -123 pc-tab25 11 major;
#X obj 134 -345 pc-tab25 0 minor;
#X obj 134 -323 pc-tab25 1 minor;
#X obj 134 -303 pc-tab25 2 minor;
#X obj 134 -263 pc-tab25 4 minor;
#X obj 134 -283 pc-tab25 3 minor;
#X obj 134 -243 pc-tab25 5 minor;
#X obj 134 -223 pc-tab25 6 minor;
#X obj 134 -203 pc-tab25 7 minor;
#X obj 134 -183 pc-tab25 8 minor;
#X obj 134 -163 pc-tab25 9 minor;
#X obj 134 -143 pc-tab25 10 minor;
#X obj 134 -123 pc-tab25 11 minor;
#X obj 254 -125 pc-tab25 23 major;
#X obj 254 -145 pc-tab25 22 major;
#X obj 254 -165 pc-tab25 21 major;
#X obj 254 -185 pc-tab25 20 major;
#X obj 254 -205 pc-tab25 19 major;
#X obj 254 -225 pc-tab25 18 major;
#X obj 254 -245 pc-tab25 17 major;
#X obj 254 -265 pc-tab25 16 major;
#X obj 254 -305 pc-tab25 14 major;
#X obj 254 -325 pc-tab25 13 major;
#X obj 254 -345 pc-tab25 12 major;
#X obj 254 -285 pc-tab25 15 major;
#X obj 374 -345 pc-tab25 12 minor;
#X obj 374 -325 pc-tab25 13 minor;
#X obj 374 -305 pc-tab25 14 minor;
#X obj 374 -285 pc-tab25 15 minor;
#X obj 374 -265 pc-tab25 16 minor;
#X obj 374 -245 pc-tab25 17 minor;
#X obj 374 -225 pc-tab25 18 minor;
#X obj 374 -205 pc-tab25 19 minor;
#X obj 374 -185 pc-tab25 20 minor;
#X obj 374 -165 pc-tab25 21 minor;
#X obj 374 -145 pc-tab25 22 minor;
#X obj 374 -125 pc-tab25 23 minor;
#X obj 254 -104 pc-tab25 24 major;
#X obj 374 -104 pc-tab25 24 minor;
#X obj 254 -83 pc-tab25 25 major;
#X obj 374 -83 pc-tab25 25 minor;
#X restore -395 -628 pd tables;
#X obj -540 -719 loadbang;
#X obj -540 -698 t b b;
#X obj -541 -740 declare -path ../handy-abs -path ../pitch-abs;
#N canvas 801 273 314 362 tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array nonext 16 float 3;
#A 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X coords 0 3 15 -3 200 50 1 0 0;
#X restore 53 53 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array next 16 float 3;
#A 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X coords 0 3 15 -3 200 50 1 0 0;
#X restore 54 127 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array id2d 32 float 3;
#A 0 0 1 1 1 1 2 2 2 2 2 2 3 3 3 3 4 0 1 1 1 1 2 2 2 2 2 2 3 3 3 3
4;
#X coords 0 4 31 0 200 140 1 0 0;
#X restore 46 198 graph;
#X restore -528 -450 pd tables needed;
#X obj -527 -568 bng 25 250 50 0 empty empty empty 17 7 0 10 -257985
-1 -1;
#X text -528 -588 Bang;
#N canvas 14 75 1007 620 generate_rhythm 0;
#N canvas 155 142 651 317 groups2onsets 0;
#X obj 54 28 inlet;
#X obj 54 268 outlet;
#N canvas 392 164 723 384 group2beats 0;
#X obj 72 38 inlet;
#X obj 57 316 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 161 137 pd id2density;
#X obj 72 89 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 57 287 pd id2patt;
#X text 260 117 Every group has at least one beat configuration that
represents it \, given the beats syncopation sum. Here we get the group
and give the different possible onset configurations.;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 57 220 pd randomelement;
#X text 162 212 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 124 285 Here we convert that ID into a 4 step pattern;
#N canvas 485 276 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 This is taken from the table on the analysis document
;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 72 62 pd group2pl;
#X connect 0 0 9 0;
#X connect 3 0 6 0;
#X connect 3 1 2 0;
#X connect 4 0 1 0;
#X connect 6 0 4 0;
#X connect 9 0 3 0;
#X restore 54 175 pd group2beats;
#X obj 54 58 unpack f f f f;
#X text 274 19 convert the syncopation groups to onsets.;
#X text 279 44 start from the first family. It can imply the need for
a silence at the beggining of the next beat. so we must only generate
patterns from families that have a silence at the beggining of the
next beat.;
#X obj 54 103 t f f;
#N canvas 461 171 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 145 175 pd smart_group2beats;
#X obj 262 150 t f f;
#N canvas 464 173 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 289 174 pd smart_group2beats;
#X obj 406 150 t f f;
#N canvas 464 173 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 ;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 433 176 pd smart_group2beats;
#X obj 289 206 list append;
#X obj 145 223 list append;
#X obj 54 240 list append;
#X connect 0 0 3 0;
#X connect 2 0 14 0;
#X connect 3 0 6 0;
#X connect 3 1 8 0;
#X connect 3 2 10 0;
#X connect 3 3 11 1;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 13 0;
#X connect 8 0 7 1;
#X connect 8 1 9 0;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 10 1 11 0;
#X connect 11 0 12 1;
#X connect 12 0 13 1;
#X connect 13 0 14 1;
#X connect 14 0 1 0;
#X restore 115 313 pd groups2onsets;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p1 64 float 1;
#A 0 0.116883 0.0519481 0.181818 0.0519481 0.142857 0.142857 0.0519481
0.194805 0.142857 0.142857 0.181818 0.350649 0.0909091 0.0649351 0
0.0779221 0.025974 0.0779221 0.12987 0.0779221 0.0909091 0.0649351
0.038961 0.0519481 0.012987 0.025974 0.0519481 0.0909091 0.012987 0.0649351
0 0 0.0649351 0.116883 0.0649351 0.025974 0.025974 0.0779221 0.025974
0.116883 0 0 0.116883 0.12987 0.012987 0.025974 0.012987 0 0 0 0.025974
0 0.012987 0.103896 0.012987 0 0 0 1 0.285714 0.12987 0.220779 0.0519481
0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 73 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p2 64 float 1;
#A 0 0.157895 0.0526316 0.0526316 0.131579 0.157895 0.0263158 0.0263158
0.131579 0.0789474 0.184211 0.157895 0.131579 0.0789474 0 0.0263158
0.184211 0.0526316 0.131579 0.552632 0.631579 0.947368 0.131579 0.105263
1 0 0.236842 0.0526316 0.684211 0.368421 0.289474 0.210526 0.210526
0.0526316 0.0789474 0.0526316 0.0263158 0.105263 0.342105 0.131579
0.263158 0 0 0.289474 0.447368 0.184211 0.5 0.131579 0 0 0 0.0789474
0.0789474 0.0263158 0.131579 0.0789474 0 0 0 0.289474 0.210526 0.210526
0.105263 0.0789474 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 138 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p3 64 float 1;
#A 0 0.185185 0.037037 0.037037 0.0740741 0.0740741 0 0.0740741 0 0.222222
0.185185 0.111111 0.333333 0.037037 0 0 0.0740741 0.333333 0.407407
0.222222 0.259259 0.740741 0.0740741 0 0.111111 0.333333 0.851852 0.851852
0.925926 0.185185 0.111111 0 0.037037 0.851852 0.925926 0.592593 0.37037
0.111111 0 0 0.0740741 0 0 0.888889 0.851852 0.222222 0.111111 0.0740741
0 0 0 0.444444 0.592593 0.0740741 0 0 0 0 0 1 0.481481 0.962963 0.037037
0.037037 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 204 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p4 64 float 1;
#A 0 0.428571 0.285714 0.0571429 0.0571429 0.0857143 0.0857143 0 0.485714
0.314286 0.485714 0.0857143 0.0571429 0.2 0.114286 0 0.6 0.6 0.657143
0.6 0.114286 0.342857 0.0857143 0.142857 0.657143 0.4 0.714286 0.2
0.142857 0.257143 0.142857 0.171429 0.971429 0.314286 0.171429 0.114286
0.0571429 0.114286 0.0571429 0.0285714 1 0 0 0.0857143 0.0571429 0.0571429
0.0571429 0 0 0 0 0.0285714 0.0285714 0.0285714 0.0571429 0 0 0 0 0.0571429
0.0571429 0.0571429 0.0571429 0 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 269 graph;
#X text 747 84 1st beat to 2nd beat;
#X text 747 146 2nd beat to 3rd beat;
#X text 746 219 3rd beat to 4th beat;
#X text 749 284 4th beat to 1st beat;
#X msg 115 95 bang;
#X text 121 32 Given a threshold output a sequence of groups based
on probabilities.;
#X obj 148 95 r th_min;
#X obj 202 95 r th_max;
#X obj 115 135 t f f;
#N canvas 546 125 450 504 1stto2nd 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 68 197 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 466 342 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 248 206 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#N canvas 583 240 450 300 read_p1 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 178 tabread p1;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 9 1;
#X connect 9 0 2 0;
#X connect 10 0 4 0;
#X connect 10 1 7 0;
#X connect 10 2 8 0;
#X restore 68 129 pd read_p1;
#X text 132 128 read the probabilities from the table;
#X obj 68 74 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#X obj 68 149 s slistprob2;
#X obj 68 175 r rlistprob2;
#X connect 0 0 18 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 20 0;
#X connect 16 0 21 0;
#X connect 18 0 16 0;
#X connect 22 0 3 0;
#X restore 142 183 pd 1stto2nd;
#X obj 296 100 s th_min;
#X obj 394 97 s th_max;
#X obj 173 149 r th_min;
#X obj 205 166 r th_max;
#X obj 268 188 r th_min;
#X obj 300 205 r th_max;
#N canvas 543 123 450 504 2ndto3rd 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 67 177 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 463 340 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 245 204 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#X text 131 100 read the probabilities from the table;
#X obj 67 82 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#N canvas 583 240 450 300 read_p2 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 38 178 tabread p2;
#X connect 0 0 9 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 3 0;
#X connect 9 1 6 0;
#X connect 9 2 7 0;
#X connect 10 0 1 0;
#X restore 67 101 pd read_p2;
#X obj 67 125 s slistprob3;
#X obj 67 151 r rlistprob3;
#X connect 0 0 17 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 19 0;
#X connect 17 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 3 0;
#X restore 237 222 pd 2ndto3rd;
#X obj 364 224 r th_min;
#X obj 396 241 r th_max;
#N canvas 854 126 450 504 3rdto4th 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 67 177 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 466 342 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 248 206 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#X obj 67 85 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#N canvas 583 240 450 300 read_p3 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 38 178 tabread p3;
#X connect 0 0 9 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 3 0;
#X connect 9 1 6 0;
#X connect 9 2 7 0;
#X connect 10 0 1 0;
#X restore 67 104 pd read_p3;
#X text 148 102 mpo and beat analysis of acoustic musical signals.
;
#X obj 67 129 s slistprob4;
#X obj 67 155 r rlistprob4;
#X connect 0 0 16 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 18 0;
#X connect 16 0 19 0;
#X connect 19 0 21 0;
#X connect 22 0 3 0;
#X restore 333 260 pd 3rdto4th;
#X obj 142 205 t f f;
#X obj 237 243 t f f;
#X obj 115 292 pack f f f f;
#X msg 910 223 \; p1 const 0 \; p2 const 0 \; p3 const 0 \; p4 const
0;
#X text 903 204 clear all->;
#X obj 115 69 inlet bang;
#N canvas 367 105 697 533 start 0;
#X obj 47 215 t f f;
#X obj 47 253 >=;
#X obj 70 289 t f f;
#X obj 70 270 *;
#X obj 127 348 *;
#X obj 70 331 <=;
#X obj 62 234 inlet;
#X text 170 235 convert to zero the values below this threshold;
#X text 195 307 convert to zero the values above this threshold;
#X obj 85 308 inlet;
#N canvas 571 232 450 300 read_p1 0;
#X obj 38 21 inlet;
#X obj 38 248 outlet;
#X obj 38 222 tabread p1;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 130 248 outlet;
#X obj 130 208 + 1;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 9 1;
#X connect 9 0 2 0;
#X connect 10 0 4 0;
#X connect 10 1 7 0;
#X connect 10 2 8 0;
#X connect 10 2 12 0;
#X connect 12 0 11 0;
#X restore 47 149 pd read_p1;
#X text 111 148 read the probabilities from the table;
#X obj 47 111 until;
#X obj 47 131 f;
#X obj 75 131 + 1;
#X msg 92 112 0;
#X obj 127 369 sel 0;
#X obj 228 411 f;
#X text 97 234 <-----------;
#X text 121 306 <-----------;
#X msg 154 388 bang;
#X text 262 369 output the groups of the first beat that can have a
continuing group with a probability within the threshold.;
#X obj 295 428 list;
#X obj 30 445 list;
#X obj 326 428 list;
#X msg 316 405 bang;
#X obj 30 76 t b f b b;
#N canvas 692 252 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 30 466 pd randomelement;
#X obj 30 28 inlet;
#X obj 30 486 outlet;
#X msg 30 52 8;
#X obj 47 169 s slistprob1;
#X obj 47 195 r rlistprob1;
#X connect 0 0 1 0;
#X connect 0 1 3 1;
#X connect 1 0 3 0;
#X connect 2 0 5 0;
#X connect 2 1 4 1;
#X connect 3 0 2 0;
#X connect 4 0 16 0;
#X connect 5 0 4 0;
#X connect 6 0 1 1;
#X connect 9 0 5 1;
#X connect 10 0 31 0;
#X connect 10 1 17 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 13 0 10 0;
#X connect 14 0 13 1;
#X connect 15 0 13 1;
#X connect 16 1 20 0;
#X connect 17 0 22 0;
#X connect 20 0 17 0;
#X connect 22 0 24 0;
#X connect 22 0 23 1;
#X connect 23 0 27 0;
#X connect 24 0 22 1;
#X connect 25 0 22 1;
#X connect 26 0 23 0;
#X connect 26 1 12 0;
#X connect 26 2 15 0;
#X connect 26 3 25 0;
#X connect 27 0 29 0;
#X connect 28 0 30 0;
#X connect 30 0 26 0;
#X connect 32 0 0 0;
#X restore 115 115 pd start;
#X obj 92 384 r slistprob1;
#X obj 181 384 r slistprob2;
#X obj 271 384 r slistprob3;
#X obj 359 384 r slistprob4;
#X obj 92 588 s rlistprob1;
#X obj 181 588 s rlistprob2;
#X obj 271 588 s rlistprob3;
#X obj 359 588 s rlistprob4;
#X obj 115 334 outlet;
#X obj 92 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 181 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 270 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 359 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X text 444 404 <- here we get the probability lists of each transition
table. They consist of 8 numbers weighting the chance of moving to
a specific syncopation group. The order of the groups is syncopation
\, so the rightmost groups are more syncopated and the groups on the
left are more beat reinforcing.;
#X text 448 485 <- If we modify those weights we will be influencing
the generation of more syncopated or more beat-reinforcing patterns.
;
#X text 450 538 <- we could also eliminate elements that are above
or below a certain threshold value to promote rhythms that are more
or less common according to our library.;
#X obj 296 61 loadbang;
#X msg 296 80 0;
#X obj 394 58 loadbang;
#X msg 394 77 1;
#X connect 0 0 40 0;
#X connect 9 0 31 0;
#X connect 11 0 31 1;
#X connect 12 0 31 2;
#X connect 13 0 27 0;
#X connect 13 1 14 0;
#X connect 14 0 25 0;
#X connect 17 0 14 1;
#X connect 18 0 14 2;
#X connect 19 0 21 1;
#X connect 20 0 21 2;
#X connect 21 0 26 0;
#X connect 22 0 24 1;
#X connect 23 0 24 2;
#X connect 24 0 27 3;
#X connect 25 0 27 1;
#X connect 25 1 21 0;
#X connect 26 0 27 2;
#X connect 26 1 24 0;
#X connect 27 0 0 0;
#X connect 30 0 9 0;
#X connect 31 0 13 0;
#X connect 32 0 36 0;
#X connect 33 0 37 0;
#X connect 34 0 38 0;
#X connect 35 0 39 0;
#X connect 48 0 49 0;
#X connect 49 0 15 0;
#X connect 50 0 51 0;
#X connect 51 0 16 0;
#X restore -527 -538 pd generate_rhythm;
#X obj -517 -517 l2s;
#X symbolatom -517 -497 32 0 0 0 - - -;
#X text -410 -539 <- look inside!;
#X obj -527 -472 tabset rhythm;
#X obj -256 -581 cnv 15 150 250 empty empty empty 20 12 0 14 -258113
-66577 0;
#X obj -237 -558 table rhythm 16;
#X obj -224 -431 tabread rhythm;
#X obj -224 -477 f 0;
#X obj -196 -479 + 1;
#X obj -225 -453 mod 16;
#X obj -225 -410 sel 1;
#X obj -224 -523 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj -225 -387 s onset;
#X floatatom -173 -524 5 0 0 0 - - -;
#X obj -224 -502 metro 125;
#X text -496 -567 BANG TO GENERATE A RHYTHM;
#X msg 66 -584 symbol table-\$1-\$2;
#X obj 66 -495 tabdump table-7-minor;
#X connect 0 0 2 0;
#X connect 2 0 14 0;
#X connect 2 1 1 0;
#X connect 4 0 19 0;
#X connect 5 0 4 1;
#X connect 7 0 25 0;
#X connect 8 0 11 0;
#X connect 9 0 61 0;
#X connect 10 0 11 0;
#X connect 11 0 9 1;
#X connect 12 0 62 0;
#X connect 13 0 9 0;
#X connect 14 0 13 0;
#X connect 14 1 4 0;
#X connect 16 0 22 0;
#X connect 19 0 7 0;
#X connect 21 0 26 0;
#X connect 21 0 10 0;
#X connect 22 0 2 1;
#X connect 22 0 30 0;
#X connect 22 1 23 0;
#X connect 24 0 0 0;
#X connect 25 0 29 0;
#X connect 25 1 29 1;
#X connect 26 0 16 0;
#X connect 27 0 28 0;
#X connect 28 0 62 0;
#X connect 30 0 18 0;
#X connect 31 0 35 0;
#X connect 33 0 35 0;
#X connect 38 0 39 0;
#X connect 39 0 33 0;
#X connect 39 1 31 0;
#X connect 42 0 44 0;
#X connect 44 0 45 0;
#X connect 44 0 48 0;
#X connect 45 0 46 0;
#X connect 51 0 55 0;
#X connect 52 0 53 0;
#X connect 52 0 54 0;
#X connect 53 0 52 1;
#X connect 54 0 51 0;
#X connect 55 0 57 0;
#X connect 56 0 59 0;
#X connect 58 0 59 1;
#X connect 59 0 52 0;
#X connect 61 0 12 0;
#X connect 62 0 22 1;
