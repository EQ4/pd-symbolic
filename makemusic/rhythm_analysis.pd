#N canvas 588 117 520 434 10;
#N canvas 801 273 314 362 tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array nonext 16 float 3;
#A 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X coords 0 3 15 -3 200 50 1 0 0;
#X restore 53 53 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array next 16 float 3;
#A 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X coords 0 3 15 -3 200 50 1 0 0;
#X restore 54 127 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array id2d 32 float 3;
#A 0 0 1 1 1 1 2 2 2 2 2 2 3 3 3 3 4 0 1 1 1 1 2 2 2 2 2 2 3 3 3 3
4;
#X coords 0 4 31 0 200 140 1 0 0;
#X restore 46 198 graph;
#X restore 45 347 pd tables needed;
#X obj 47 200 bng 25 250 50 0 empty empty empty 17 7 0 10 -257985 -1
-1;
#X text 46 182 Bang;
#N canvas 510 304 450 300 analyze_rhythm 0;
#N canvas 111 112 962 487 pattern2group 0;
#N canvas 106 341 1036 300 beat2id 0;
#X obj 26 87 l2s;
#X msg 95 70 symbol;
#X obj 95 53 loadbang;
#X obj 26 49 prepend #;
#X msg 26 170 1;
#X msg 52 170 2;
#X msg 80 170 3;
#X msg 106 169 4;
#X msg 136 169 5;
#X msg 162 169 6;
#X msg 190 169 7;
#X msg 216 168 8;
#X msg 242 168 9;
#X msg 268 168 10;
#X msg 296 168 11;
#X msg 322 167 12;
#X msg 352 167 13;
#X msg 378 167 14;
#X msg 406 167 15;
#X msg 432 166 16;
#X obj 26 130 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 27 206 f;
#X obj 24 28 inlet;
#X obj 27 225 outlet;
#X obj 497 212 outlet;
#X obj 532 76 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 496 186 f;
#X text 47 248 ID;
#X text 574 246 density;
#X obj 302 73 t a a;
#X msg 495 150 0;
#X msg 521 150 1;
#X msg 549 150 1;
#X msg 575 149 1;
#X msg 605 149 1;
#X msg 631 149 2;
#X msg 659 149 2;
#X msg 685 148 2;
#X msg 711 148 2;
#X msg 737 148 2;
#X msg 765 148 2;
#X msg 901 146 4;
#X msg 875 147 3;
#X msg 847 147 3;
#X msg 821 147 3;
#X msg 791 147 3;
#X connect 0 0 29 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 21 0;
#X connect 5 0 21 0;
#X connect 6 0 21 0;
#X connect 7 0 21 0;
#X connect 8 0 21 0;
#X connect 9 0 21 0;
#X connect 10 0 21 0;
#X connect 11 0 21 0;
#X connect 12 0 21 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 21 0;
#X connect 16 0 21 0;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 21 0;
#X connect 20 0 4 0;
#X connect 20 1 5 0;
#X connect 20 2 6 0;
#X connect 20 3 7 0;
#X connect 20 4 8 0;
#X connect 20 5 9 0;
#X connect 20 6 10 0;
#X connect 20 7 11 0;
#X connect 20 8 12 0;
#X connect 20 9 13 0;
#X connect 20 10 14 0;
#X connect 20 11 15 0;
#X connect 20 12 16 0;
#X connect 20 13 17 0;
#X connect 20 14 18 0;
#X connect 20 15 19 0;
#X connect 21 0 23 0;
#X connect 22 0 3 0;
#X connect 25 0 30 0;
#X connect 25 1 31 0;
#X connect 25 2 32 0;
#X connect 25 3 33 0;
#X connect 25 4 34 0;
#X connect 25 5 35 0;
#X connect 25 6 36 0;
#X connect 25 7 37 0;
#X connect 25 8 38 0;
#X connect 25 9 39 0;
#X connect 25 10 40 0;
#X connect 25 11 45 0;
#X connect 25 12 44 0;
#X connect 25 13 43 0;
#X connect 25 14 42 0;
#X connect 25 15 41 0;
#X connect 26 0 24 0;
#X connect 29 0 20 0;
#X connect 29 1 25 0;
#X connect 30 0 26 0;
#X connect 31 0 26 0;
#X connect 32 0 26 0;
#X connect 33 0 26 0;
#X connect 34 0 26 0;
#X connect 35 0 26 0;
#X connect 36 0 26 0;
#X connect 37 0 26 0;
#X connect 38 0 26 0;
#X connect 39 0 26 0;
#X connect 40 0 26 0;
#X connect 41 0 26 0;
#X connect 42 0 26 0;
#X connect 43 0 26 0;
#X connect 44 0 26 0;
#X connect 45 0 26 0;
#X restore 45 310 pd beat2id;
#X obj 45 329 pack f f;
#X obj 131 314 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 146 311 <- next note;
#X obj 131 294 list split 1;
#X obj 45 256 list split 4;
#X obj 131 273 list split 4;
#X obj 45 143 list split 8;
#X obj 214 161 list split 4;
#X obj 223 126 t l l l l;
#X obj 420 159 list split 8;
#X obj 661 143 list split 12;
#X obj 661 163 list split 4;
#X obj 661 184 list prepend;
#X obj 248 341 pack f f;
#X obj 334 326 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 349 323 <- next note;
#X obj 334 306 list split 1;
#X obj 248 268 list split 4;
#X obj 334 285 list split 4;
#X obj 454 339 pack f f;
#X obj 540 324 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 555 321 <- next note;
#X obj 540 304 list split 1;
#X obj 454 266 list split 4;
#X obj 540 283 list split 4;
#X obj 661 345 pack f f;
#X obj 747 330 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 762 327 <- next note;
#X obj 747 310 list split 1;
#X obj 661 272 list split 4;
#X obj 747 289 list split 4;
#X obj 341 418 pack f f f f;
#X obj 223 70 inlet;
#X obj 341 451 outlet;
#X text 386 450 output group;
#X text 861 380 output density;
#X obj 859 327 pack f f f f;
#X obj 859 360 outlet;
#N canvas 109 343 1036 300 beat2id 0;
#X obj 26 87 l2s;
#X msg 95 70 symbol;
#X obj 95 53 loadbang;
#X obj 26 49 prepend #;
#X msg 26 170 1;
#X msg 52 170 2;
#X msg 80 170 3;
#X msg 106 169 4;
#X msg 136 169 5;
#X msg 162 169 6;
#X msg 190 169 7;
#X msg 216 168 8;
#X msg 242 168 9;
#X msg 268 168 10;
#X msg 296 168 11;
#X msg 322 167 12;
#X msg 352 167 13;
#X msg 378 167 14;
#X msg 406 167 15;
#X msg 432 166 16;
#X obj 26 130 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 27 206 f;
#X obj 24 28 inlet;
#X obj 27 225 outlet;
#X obj 497 212 outlet;
#X obj 532 76 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 496 186 f;
#X text 47 248 ID;
#X text 574 246 density;
#X obj 302 73 t a a;
#X msg 495 150 0;
#X msg 521 150 1;
#X msg 549 150 1;
#X msg 575 149 1;
#X msg 605 149 1;
#X msg 631 149 2;
#X msg 659 149 2;
#X msg 685 148 2;
#X msg 711 148 2;
#X msg 737 148 2;
#X msg 765 148 2;
#X msg 901 146 4;
#X msg 875 147 3;
#X msg 847 147 3;
#X msg 821 147 3;
#X msg 791 147 3;
#X connect 0 0 29 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 21 0;
#X connect 5 0 21 0;
#X connect 6 0 21 0;
#X connect 7 0 21 0;
#X connect 8 0 21 0;
#X connect 9 0 21 0;
#X connect 10 0 21 0;
#X connect 11 0 21 0;
#X connect 12 0 21 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 21 0;
#X connect 16 0 21 0;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 21 0;
#X connect 20 0 4 0;
#X connect 20 1 5 0;
#X connect 20 2 6 0;
#X connect 20 3 7 0;
#X connect 20 4 8 0;
#X connect 20 5 9 0;
#X connect 20 6 10 0;
#X connect 20 7 11 0;
#X connect 20 8 12 0;
#X connect 20 9 13 0;
#X connect 20 10 14 0;
#X connect 20 11 15 0;
#X connect 20 12 16 0;
#X connect 20 13 17 0;
#X connect 20 14 18 0;
#X connect 20 15 19 0;
#X connect 21 0 23 0;
#X connect 22 0 3 0;
#X connect 25 0 30 0;
#X connect 25 1 31 0;
#X connect 25 2 32 0;
#X connect 25 3 33 0;
#X connect 25 4 34 0;
#X connect 25 5 35 0;
#X connect 25 6 36 0;
#X connect 25 7 37 0;
#X connect 25 8 38 0;
#X connect 25 9 39 0;
#X connect 25 10 40 0;
#X connect 25 11 45 0;
#X connect 25 12 44 0;
#X connect 25 13 43 0;
#X connect 25 14 42 0;
#X connect 25 15 41 0;
#X connect 26 0 24 0;
#X connect 29 0 20 0;
#X connect 29 1 25 0;
#X connect 30 0 26 0;
#X connect 31 0 26 0;
#X connect 32 0 26 0;
#X connect 33 0 26 0;
#X connect 34 0 26 0;
#X connect 35 0 26 0;
#X connect 36 0 26 0;
#X connect 37 0 26 0;
#X connect 38 0 26 0;
#X connect 39 0 26 0;
#X connect 40 0 26 0;
#X connect 41 0 26 0;
#X connect 42 0 26 0;
#X connect 43 0 26 0;
#X connect 44 0 26 0;
#X connect 45 0 26 0;
#X restore 248 310 pd beat2id;
#N canvas 118 349 1036 300 beat2id 0;
#X obj 26 87 l2s;
#X msg 95 70 symbol;
#X obj 95 53 loadbang;
#X obj 26 49 prepend #;
#X msg 26 170 1;
#X msg 52 170 2;
#X msg 80 170 3;
#X msg 106 169 4;
#X msg 136 169 5;
#X msg 162 169 6;
#X msg 190 169 7;
#X msg 216 168 8;
#X msg 242 168 9;
#X msg 268 168 10;
#X msg 296 168 11;
#X msg 322 167 12;
#X msg 352 167 13;
#X msg 378 167 14;
#X msg 406 167 15;
#X msg 432 166 16;
#X obj 26 130 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 27 206 f;
#X obj 24 28 inlet;
#X obj 27 225 outlet;
#X obj 497 212 outlet;
#X obj 532 76 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 496 186 f;
#X text 47 248 ID;
#X text 574 246 density;
#X obj 302 73 t a a;
#X msg 495 150 0;
#X msg 521 150 1;
#X msg 549 150 1;
#X msg 575 149 1;
#X msg 605 149 1;
#X msg 631 149 2;
#X msg 659 149 2;
#X msg 685 148 2;
#X msg 711 148 2;
#X msg 737 148 2;
#X msg 765 148 2;
#X msg 901 146 4;
#X msg 875 147 3;
#X msg 847 147 3;
#X msg 821 147 3;
#X msg 791 147 3;
#X connect 0 0 29 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 21 0;
#X connect 5 0 21 0;
#X connect 6 0 21 0;
#X connect 7 0 21 0;
#X connect 8 0 21 0;
#X connect 9 0 21 0;
#X connect 10 0 21 0;
#X connect 11 0 21 0;
#X connect 12 0 21 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 21 0;
#X connect 16 0 21 0;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 21 0;
#X connect 20 0 4 0;
#X connect 20 1 5 0;
#X connect 20 2 6 0;
#X connect 20 3 7 0;
#X connect 20 4 8 0;
#X connect 20 5 9 0;
#X connect 20 6 10 0;
#X connect 20 7 11 0;
#X connect 20 8 12 0;
#X connect 20 9 13 0;
#X connect 20 10 14 0;
#X connect 20 11 15 0;
#X connect 20 12 16 0;
#X connect 20 13 17 0;
#X connect 20 14 18 0;
#X connect 20 15 19 0;
#X connect 21 0 23 0;
#X connect 22 0 3 0;
#X connect 25 0 30 0;
#X connect 25 1 31 0;
#X connect 25 2 32 0;
#X connect 25 3 33 0;
#X connect 25 4 34 0;
#X connect 25 5 35 0;
#X connect 25 6 36 0;
#X connect 25 7 37 0;
#X connect 25 8 38 0;
#X connect 25 9 39 0;
#X connect 25 10 40 0;
#X connect 25 11 45 0;
#X connect 25 12 44 0;
#X connect 25 13 43 0;
#X connect 25 14 42 0;
#X connect 25 15 41 0;
#X connect 26 0 24 0;
#X connect 29 0 20 0;
#X connect 29 1 25 0;
#X connect 30 0 26 0;
#X connect 31 0 26 0;
#X connect 32 0 26 0;
#X connect 33 0 26 0;
#X connect 34 0 26 0;
#X connect 35 0 26 0;
#X connect 36 0 26 0;
#X connect 37 0 26 0;
#X connect 38 0 26 0;
#X connect 39 0 26 0;
#X connect 40 0 26 0;
#X connect 41 0 26 0;
#X connect 42 0 26 0;
#X connect 43 0 26 0;
#X connect 44 0 26 0;
#X connect 45 0 26 0;
#X restore 454 310 pd beat2id;
#N canvas 116 354 1036 300 beat2id 0;
#X obj 26 87 l2s;
#X msg 95 70 symbol;
#X obj 95 53 loadbang;
#X obj 26 49 prepend #;
#X msg 26 170 1;
#X msg 52 170 2;
#X msg 80 170 3;
#X msg 106 169 4;
#X msg 136 169 5;
#X msg 162 169 6;
#X msg 190 169 7;
#X msg 216 168 8;
#X msg 242 168 9;
#X msg 268 168 10;
#X msg 296 168 11;
#X msg 322 167 12;
#X msg 352 167 13;
#X msg 378 167 14;
#X msg 406 167 15;
#X msg 432 166 16;
#X obj 26 130 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 27 206 f;
#X obj 24 28 inlet;
#X obj 27 225 outlet;
#X obj 497 212 outlet;
#X obj 532 76 sel #0000 #1000 #0100 #0010 #0001 #1100 #1010 #1001 #0110
#0101 #0011 #1110 #1101 #1011 #0111 #1111;
#X obj 496 186 f;
#X text 47 248 ID;
#X text 574 246 density;
#X obj 302 73 t a a;
#X msg 495 150 0;
#X msg 521 150 1;
#X msg 549 150 1;
#X msg 575 149 1;
#X msg 605 149 1;
#X msg 631 149 2;
#X msg 659 149 2;
#X msg 685 148 2;
#X msg 711 148 2;
#X msg 737 148 2;
#X msg 765 148 2;
#X msg 901 146 4;
#X msg 875 147 3;
#X msg 847 147 3;
#X msg 821 147 3;
#X msg 791 147 3;
#X connect 0 0 29 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 21 0;
#X connect 5 0 21 0;
#X connect 6 0 21 0;
#X connect 7 0 21 0;
#X connect 8 0 21 0;
#X connect 9 0 21 0;
#X connect 10 0 21 0;
#X connect 11 0 21 0;
#X connect 12 0 21 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 21 0;
#X connect 16 0 21 0;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 21 0;
#X connect 20 0 4 0;
#X connect 20 1 5 0;
#X connect 20 2 6 0;
#X connect 20 3 7 0;
#X connect 20 4 8 0;
#X connect 20 5 9 0;
#X connect 20 6 10 0;
#X connect 20 7 11 0;
#X connect 20 8 12 0;
#X connect 20 9 13 0;
#X connect 20 10 14 0;
#X connect 20 11 15 0;
#X connect 20 12 16 0;
#X connect 20 13 17 0;
#X connect 20 14 18 0;
#X connect 20 15 19 0;
#X connect 21 0 23 0;
#X connect 22 0 3 0;
#X connect 25 0 30 0;
#X connect 25 1 31 0;
#X connect 25 2 32 0;
#X connect 25 3 33 0;
#X connect 25 4 34 0;
#X connect 25 5 35 0;
#X connect 25 6 36 0;
#X connect 25 7 37 0;
#X connect 25 8 38 0;
#X connect 25 9 39 0;
#X connect 25 10 40 0;
#X connect 25 11 45 0;
#X connect 25 12 44 0;
#X connect 25 13 43 0;
#X connect 25 14 42 0;
#X connect 25 15 41 0;
#X connect 26 0 24 0;
#X connect 29 0 20 0;
#X connect 29 1 25 0;
#X connect 30 0 26 0;
#X connect 31 0 26 0;
#X connect 32 0 26 0;
#X connect 33 0 26 0;
#X connect 34 0 26 0;
#X connect 35 0 26 0;
#X connect 36 0 26 0;
#X connect 37 0 26 0;
#X connect 38 0 26 0;
#X connect 39 0 26 0;
#X connect 40 0 26 0;
#X connect 41 0 26 0;
#X connect 42 0 26 0;
#X connect 43 0 26 0;
#X connect 44 0 26 0;
#X connect 45 0 26 0;
#X restore 661 310 pd beat2id;
#N canvas 369 168 624 346 idandnext2group 0;
#X obj 33 23 inlet;
#X obj 64 229 outlet;
#X msg 33 48 \$2 \$1;
#X obj 33 70 route 0 1;
#X obj 123 152 tabread next;
#X obj 33 152 tabread nonext;
#X obj 33 133 - 1;
#X obj 123 133 - 1;
#X msg 272 38 \; nonext 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X msg 357 84 \; next 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 7 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 45 361 pd idandnext2group;
#N canvas 375 172 624 346 idandnext2group 0;
#X obj 33 23 inlet;
#X obj 64 229 outlet;
#X msg 33 48 \$2 \$1;
#X obj 33 70 route 0 1;
#X obj 123 152 tabread next;
#X obj 33 152 tabread nonext;
#X obj 33 133 - 1;
#X obj 123 133 - 1;
#X msg 272 38 \; nonext 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X msg 357 84 \; next 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 7 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 248 361 pd idandnext2group;
#N canvas 375 172 624 346 idandnext2group 0;
#X obj 33 23 inlet;
#X obj 64 229 outlet;
#X msg 33 48 \$2 \$1;
#X obj 33 70 route 0 1;
#X obj 123 152 tabread next;
#X obj 33 152 tabread nonext;
#X obj 33 133 - 1;
#X obj 123 133 - 1;
#X msg 272 38 \; nonext 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X msg 357 84 \; next 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 7 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 454 361 pd idandnext2group;
#N canvas 375 172 624 346 idandnext2group 0;
#X obj 33 23 inlet;
#X obj 64 229 outlet;
#X msg 33 48 \$2 \$1;
#X obj 33 70 route 0 1;
#X obj 123 152 tabread next;
#X obj 33 152 tabread nonext;
#X obj 33 133 - 1;
#X obj 123 133 - 1;
#X msg 272 38 \; nonext 0 4 2 5 3 6 5 1 8 3 7 6 3 7 8 6 6;
#X msg 357 84 \; next 0 4 2 5 3 4 5 1 2 3 5 4 3 5 2 4 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 7 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 4 0;
#X restore 661 364 pd idandnext2group;
#X connect 0 0 1 0;
#X connect 0 1 37 0;
#X connect 1 0 42 0;
#X connect 2 0 1 1;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 5 1 6 0;
#X connect 6 0 4 0;
#X connect 7 0 5 0;
#X connect 8 1 18 0;
#X connect 9 0 7 0;
#X connect 9 1 8 0;
#X connect 9 2 10 0;
#X connect 9 3 11 0;
#X connect 10 1 24 0;
#X connect 11 0 12 0;
#X connect 11 1 13 1;
#X connect 12 0 13 0;
#X connect 13 0 30 0;
#X connect 14 0 43 0;
#X connect 15 0 14 1;
#X connect 17 0 15 0;
#X connect 18 0 39 0;
#X connect 18 1 19 0;
#X connect 19 0 17 0;
#X connect 20 0 44 0;
#X connect 21 0 20 1;
#X connect 23 0 21 0;
#X connect 24 0 40 0;
#X connect 24 1 25 0;
#X connect 25 0 23 0;
#X connect 26 0 45 0;
#X connect 27 0 26 1;
#X connect 29 0 27 0;
#X connect 30 0 41 0;
#X connect 30 1 31 0;
#X connect 31 0 29 0;
#X connect 32 0 34 0;
#X connect 33 0 9 0;
#X connect 37 0 38 0;
#X connect 39 0 14 0;
#X connect 39 1 37 1;
#X connect 40 0 20 0;
#X connect 40 1 37 2;
#X connect 41 0 26 0;
#X connect 41 1 37 3;
#X connect 42 0 32 0;
#X connect 43 0 32 1;
#X connect 44 0 32 2;
#X connect 45 0 32 3;
#X restore 53 92 pd pattern2group;
#N canvas 116 137 911 553 groupsequence2matrix 0;
#X obj 168 221 inlet;
#N canvas 0 22 450 300 (subpatch) 0;
#X array add-beat1 64 float 1;
#A 0 9 4 14 4 11 11 4 15 11 11 14 27 7 5 0 6 2 6 10 6 7 5 3 4 1 2 4
7 1 5 0 0 5 9 5 2 2 6 2 9 0 0 9 10 1 2 1 0 0 0 2 0 1 8 1 0 0 0 65 22
10 17 4 0;
#X coords 0 100 63 0 256 100 1 0 0;
#X restore 614 24 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array add-beat2 64 float 1;
#A 0 6 2 2 5 6 1 1 5 3 7 6 5 3 0 1 7 2 5 21 24 36 5 4 26 0 9 2 26 14
11 8 8 2 3 2 1 4 13 5 10 0 0 11 17 7 19 5 0 0 0 3 3 1 5 3 0 0 0 11
8 8 4 3 0;
#X coords 0 100 63 0 256 100 1 0 0;
#X restore 614 149 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array add-beat3 64 float 1;
#A 0 5 1 1 2 2 0 2 0 6 5 3 9 1 0 0 2 9 11 6 7 20 2 0 3 9 23 23 25 5
3 0 1 23 25 16 10 3 0 0 2 0 0 24 23 6 3 2 0 0 0 12 16 2 0 0 0 0 0 27
13 14 1 1 0;
#X coords 0 100 63 0 256 100 1 0 0;
#X restore 616 278 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array add-beat4 64 float 1;
#A 0 15 10 2 2 3 3 0 17 11 17 3 2 7 4 0 21 21 23 21 4 12 3 5 23 14
25 7 5 9 5 6 34 11 6 4 2 4 2 1 23 0 0 3 2 2 2 0 0 0 0 1 1 1 2 0 0 0
0 2 2 2 2 0 0;
#X coords 0 100 63 0 256 100 1 0 0;
#X restore 616 405 graph;
#X obj 28 311 list split 2;
#X obj 168 242 t a a a a;
#X obj 28 359 unpack f f;
#X obj 28 378 - 1;
#X obj 28 397 * 8;
#X obj 28 416 +;
#X obj 28 435 t f f;
#X obj 28 473 + 1;
#X obj 85 378 - 1;
#X obj 144 311 list split 2;
#X obj 144 359 unpack f f;
#X obj 144 378 - 1;
#X obj 144 397 * 8;
#X obj 144 416 +;
#X obj 144 435 t f f;
#X obj 144 473 + 1;
#X obj 201 378 - 1;
#X obj 264 359 unpack f f;
#X obj 264 378 - 1;
#X obj 264 397 * 8;
#X obj 264 416 +;
#X obj 264 435 t f f;
#X obj 264 473 + 1;
#X obj 321 378 - 1;
#X obj 360 263 list split 3;
#X obj 380 361 unpack f f;
#X obj 380 380 - 1;
#X obj 380 399 * 8;
#X obj 380 418 +;
#X obj 380 437 t f f;
#X obj 380 475 + 1;
#X obj 437 380 - 1;
#X obj 263 310 list split 2;
#X obj 144 281 list split 1;
#X obj 360 285 list split 1;
#X obj 380 313 list prepend;
#X text 21 11 In this object we input a sequence of 4 numbers. Each
number representing the syncopatoin group of beat 1 \, 2 \, 3 and 4
respectively. Here we create four matrices that relates the amount
of times group X is followed by group Y.;
#X obj 28 454 tabread add-beat1;
#X obj 28 492 tabwrite add-beat1;
#X msg 28 512 \; add-beat1 const 0;
#X obj 144 455 tabread add-beat2;
#X obj 144 492 tabwrite add-beat2;
#X msg 144 512 \; add-beat2 const 0;
#X obj 264 454 tabread add-beat3;
#X obj 264 493 tabwrite add-beat3;
#X msg 264 512 \; add-beat3 const 0;
#X obj 380 456 tabread add-beat4;
#X obj 380 494 tabwrite add-beat4;
#X msg 380 514 \; add-beat4 const 0;
#X text 23 71 on 'add-beat1' we have the amount of times any of the
8 possible groups is followed by any of the 8 possible groups on the
next beat. For examlpe if we have family 1 4 4 3 \, the seuccession
of group 1 with group 4 is annotated on 'p-beat1' in the position ((groupN
-1)*8)+ groupN+1 : ((1 -1)* 8)+ 4 = 4;
#X obj 416 170 sum;
#X obj 416 150 tabdump add-beat1;
#X floatatom 416 189 5 0 0 0 - - -;
#X msg 416 130 bang;
#X text 451 188 <- amount of samples;
#X obj 614 125 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 646 125 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 678 125 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 710 125 cnv 10 31 10 empty empty empty 20 12 0 14 -204800 -66577
0;
#X obj 742 125 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 774 125 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 806 125 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 839 125 cnv 10 31 10 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 614 250 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 646 250 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 678 250 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 710 250 cnv 10 31 10 empty empty empty 20 12 0 14 -204800 -66577
0;
#X obj 742 250 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 774 250 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 806 250 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 839 250 cnv 10 31 10 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 616 379 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 648 379 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 680 379 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 712 379 cnv 10 31 10 empty empty empty 20 12 0 14 -204800 -66577
0;
#X obj 744 379 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 776 379 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 808 379 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 841 379 cnv 10 31 10 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 616 506 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 648 506 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 680 506 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 712 506 cnv 10 31 10 empty empty empty 20 12 0 14 -204800 -66577
0;
#X obj 744 506 cnv 10 31 10 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 776 506 cnv 10 31 10 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 808 506 cnv 10 31 10 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 841 506 cnv 10 31 10 empty empty empty 20 12 0 14 -232576 -66577
0;
#X connect 0 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 38 0;
#X connect 6 2 37 0;
#X connect 6 3 29 0;
#X connect 7 0 8 0;
#X connect 7 1 13 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 42 0;
#X connect 11 1 43 1;
#X connect 12 0 43 0;
#X connect 13 0 10 1;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 21 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 45 0;
#X connect 19 1 46 1;
#X connect 20 0 46 0;
#X connect 21 0 18 1;
#X connect 22 0 23 0;
#X connect 22 1 28 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 48 0;
#X connect 26 1 49 1;
#X connect 27 0 49 0;
#X connect 28 0 25 1;
#X connect 29 0 39 0;
#X connect 29 1 40 1;
#X connect 30 0 31 0;
#X connect 30 1 36 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 51 0;
#X connect 34 1 52 1;
#X connect 35 0 52 0;
#X connect 36 0 33 1;
#X connect 37 1 22 0;
#X connect 38 1 14 0;
#X connect 39 0 40 0;
#X connect 40 0 30 0;
#X connect 42 0 12 0;
#X connect 45 0 20 0;
#X connect 48 0 27 0;
#X connect 51 0 35 0;
#X connect 55 0 57 0;
#X connect 56 0 55 0;
#X connect 58 0 56 0;
#X restore 53 114 pd groupsequence2matrix;
#X msg 56 154 bang;
#X text 89 155 Bang to convert the addition tables into normalized
probabilities;
#N canvas 424 219 889 300 normalize 0;
#X msg 107 92 64;
#X obj 157 179 tabread add-beat1;
#X obj 157 200 tabwrite p1;
#X obj 157 160 t f f;
#X msg 47 151 \; p1 normalize 1;
#X obj 107 119 t b f;
#X obj 322 11 inlet;
#X obj 322 32 t b b b b;
#X msg 279 82 64;
#X obj 329 150 t f f;
#X obj 279 109 t b f;
#X msg 219 141 \; p2 normalize 1;
#X obj 329 190 tabwrite p2;
#X obj 329 169 tabread add-beat2;
#X msg 505 102 64;
#X obj 555 170 t f f;
#X obj 505 129 t b f;
#X msg 677 92 64;
#X obj 727 160 t f f;
#X obj 677 119 t b f;
#X msg 445 161 \; p3 normalize 1;
#X obj 555 189 tabread add-beat3;
#X obj 555 210 tabwrite p3;
#X msg 617 151 \; p4 normalize 1;
#X obj 727 179 tabread add-beat4;
#X obj 727 200 tabwrite p4;
#N canvas 621 333 450 300 for 0;
#X obj 73 53 inlet;
#X obj 73 106 t f b;
#X obj 73 132 until;
#X obj 73 76 route float bang;
#X obj 112 169 f;
#X obj 147 166 + 1;
#X msg 151 135 0;
#X obj 113 198 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X restore 157 141 pd for;
#N canvas 787 330 450 300 for 0;
#X obj 83 63 inlet;
#X obj 83 116 t f b;
#X obj 83 142 until;
#X obj 83 86 route float bang;
#X obj 122 179 f;
#X obj 157 176 + 1;
#X msg 161 145 0;
#X obj 123 208 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X restore 329 131 pd for;
#N canvas 910 336 450 300 for 0;
#X obj 93 73 inlet;
#X obj 93 126 t f b;
#X obj 93 152 until;
#X obj 93 96 route float bang;
#X obj 132 189 f;
#X obj 167 186 + 1;
#X msg 171 155 0;
#X obj 133 218 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X restore 555 151 pd for;
#N canvas 910 335 450 300 for 0;
#X obj 103 83 inlet;
#X obj 103 136 t f b;
#X obj 103 162 until;
#X obj 103 106 route float bang;
#X obj 142 199 f;
#X obj 177 196 + 1;
#X msg 181 165 0;
#X obj 143 228 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X restore 727 141 pd for;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 5 0 4 0;
#X connect 5 1 26 0;
#X connect 6 0 7 0;
#X connect 7 0 0 0;
#X connect 7 1 8 0;
#X connect 7 2 14 0;
#X connect 7 3 17 0;
#X connect 8 0 10 0;
#X connect 9 0 13 0;
#X connect 9 1 12 1;
#X connect 10 0 11 0;
#X connect 10 1 27 0;
#X connect 13 0 12 0;
#X connect 14 0 16 0;
#X connect 15 0 21 0;
#X connect 15 1 22 1;
#X connect 16 0 20 0;
#X connect 16 1 28 0;
#X connect 17 0 19 0;
#X connect 18 0 24 0;
#X connect 18 1 25 1;
#X connect 19 0 23 0;
#X connect 19 1 29 0;
#X connect 21 0 22 0;
#X connect 24 0 25 0;
#X connect 26 0 3 0;
#X connect 27 0 9 0;
#X connect 28 0 15 0;
#X connect 29 0 18 0;
#X restore 56 187 pd normalize;
#X text 143 46 input 16 element strings of 1s and 0s;
#X text 156 89 convert patterns to groups;
#X text 196 113 create histograms;
#X obj 53 48 inlet patterns;
#X obj 225 137 inlet bang;
#X connect 0 0 1 0;
#X connect 2 0 4 0;
#X connect 8 0 0 0;
#X connect 9 0 2 0;
#X restore 46 138 pd analyze_rhythm;
#X msg 46 84 1 0 0 1 0 1 1 0 1 0 0 1 0 1 0 0;
#X msg 145 118 bang;
#N canvas 14 75 1007 620 generate_rhythm 0;
#N canvas 155 142 651 317 groups2onsets 0;
#X obj 54 28 inlet;
#X obj 54 268 outlet;
#N canvas 392 164 723 384 group2beats 0;
#X obj 72 38 inlet;
#X obj 57 316 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 161 137 pd id2density;
#X obj 72 89 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 57 287 pd id2patt;
#X text 260 117 Every group has at least one beat configuration that
represents it \, given the beats syncopation sum. Here we get the group
and give the different possible onset configurations.;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 57 220 pd randomelement;
#X text 162 212 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 124 285 Here we convert that ID into a 4 step pattern;
#N canvas 485 276 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 This is taken from the table on the analysis document
;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 72 62 pd group2pl;
#X connect 0 0 9 0;
#X connect 3 0 6 0;
#X connect 3 1 2 0;
#X connect 4 0 1 0;
#X connect 6 0 4 0;
#X connect 9 0 3 0;
#X restore 54 175 pd group2beats;
#X obj 54 58 unpack f f f f;
#X text 274 19 convert the syncopation groups to onsets.;
#X text 279 44 start from the first family. It can imply the need for
a silence at the beggining of the next beat. so we must only generate
patterns from families that have a silence at the beggining of the
next beat.;
#X obj 54 103 t f f;
#N canvas 461 171 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 145 175 pd smart_group2beats;
#X obj 262 150 t f f;
#N canvas 464 173 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 289 174 pd smart_group2beats;
#X obj 406 150 t f f;
#N canvas 464 173 648 460 smart_group2beats 0;
#X text 74 74 groups 6 7 and 8 need the next beat to start with a silence.
;
#X obj 461 126 f;
#X obj 44 109 t f b;
#X obj 44 78 >= 6;
#X obj 44 143 pack;
#X obj 44 162 route 0 1;
#N canvas 328 135 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X msg 48 103 7 23;
#X msg 79 103 2 18 24 30;
#X msg 159 104 4 9 12 20 25 28;
#X msg 260 105 1 17 21 27 31 32;
#X msg 369 105 3 6 19 22 26 29;
#X msg 475 104 5 11 15 16;
#X msg 552 104 10 13;
#X msg 596 104 8 14;
#X text 326 44 group 2 pattern list to all patterns. we do not mind
if it starts with a silence or not;
#X connect 0 0 3 0;
#X connect 0 1 4 0;
#X connect 0 2 5 0;
#X connect 0 3 6 0;
#X connect 0 4 7 0;
#X connect 0 5 8 0;
#X connect 0 6 9 0;
#X connect 0 7 10 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X restore 44 213 pd group2pl nosilence;
#N canvas 391 139 774 197 group2pl 0;
#X obj 48 50 sel 1 2 3 4 5 6 7 8;
#X obj 77 163 outlet;
#X obj 48 28 inlet;
#X text 337 22 group 2 pattern list;
#X msg 48 103 -1;
#X msg 77 103 -1;
#X msg 105 103 4 9 20 25;
#X msg 169 103 1 17 21 27 31;
#X msg 258 103 3 19 26;
#X msg 311 103 5 11 15;
#X msg 363 103 10;
#X msg 390 103 -1;
#X text 338 36 only patterns that start with a silence. Groups that
only have patterns that start with a note output a -1;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 0 4 8 0;
#X connect 0 5 9 0;
#X connect 0 6 10 0;
#X connect 0 7 11 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 176 213 pd group2pl silence;
#X obj 79 393 outlet;
#N canvas 584 269 450 300 id2density 0;
#X obj 185 100 inlet;
#X obj 185 173 outlet;
#X obj 185 145 tabread id2d;
#X obj 185 121 - 1;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X restore 106 270 pd id2density;
#X obj 79 247 t a a;
#N canvas 503 227 631 467 id2patt 0;
#X obj 60 28 inlet;
#X msg 60 90 0 0 0 0;
#X msg 70 111 1 0 0 0;
#X msg 81 132 0 1 0 0;
#X msg 91 153 0 0 1 0;
#X msg 102 175 0 0 0 1;
#X msg 112 196 1 1 0 0;
#X msg 123 217 1 0 1 0;
#X msg 134 238 1 0 0 1;
#X msg 144 94 0 1 1 0;
#X msg 154 115 0 1 0 1;
#X msg 165 136 0 0 1 1;
#X msg 175 157 1 1 1 0;
#X msg 186 179 1 1 0 1;
#X msg 196 200 1 0 1 1;
#X msg 207 221 0 1 1 1;
#X msg 218 242 1 1 1 1;
#X msg 309 113 0 0 0 0;
#X msg 319 134 1 0 0 0;
#X msg 330 155 0 1 0 0;
#X msg 340 176 0 0 1 0;
#X msg 351 198 0 0 0 1;
#X msg 361 219 1 1 0 0;
#X msg 372 240 1 0 1 0;
#X msg 383 261 1 0 0 1;
#X msg 460 103 0 1 1 0;
#X msg 470 124 0 1 0 1;
#X msg 481 145 0 0 1 1;
#X msg 491 166 1 1 1 0;
#X msg 502 188 1 1 0 1;
#X msg 512 209 1 0 1 1;
#X msg 523 230 0 1 1 1;
#X msg 534 251 1 1 1 1;
#X obj 60 52 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;
#X obj 309 75 sel 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 158 305 t a;
#X obj 407 328 t a;
#X obj 307 398 outlet;
#X connect 0 0 33 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 4 0 35 0;
#X connect 5 0 35 0;
#X connect 6 0 35 0;
#X connect 7 0 35 0;
#X connect 8 0 35 0;
#X connect 9 0 35 0;
#X connect 10 0 35 0;
#X connect 11 0 35 0;
#X connect 12 0 35 0;
#X connect 13 0 35 0;
#X connect 14 0 35 0;
#X connect 15 0 35 0;
#X connect 16 0 35 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 36 0;
#X connect 21 0 36 0;
#X connect 22 0 36 0;
#X connect 23 0 36 0;
#X connect 24 0 36 0;
#X connect 25 0 36 0;
#X connect 26 0 36 0;
#X connect 27 0 36 0;
#X connect 28 0 36 0;
#X connect 29 0 36 0;
#X connect 30 0 36 0;
#X connect 31 0 36 0;
#X connect 32 0 36 0;
#X connect 33 0 1 0;
#X connect 33 1 2 0;
#X connect 33 2 3 0;
#X connect 33 3 4 0;
#X connect 33 4 5 0;
#X connect 33 5 6 0;
#X connect 33 6 7 0;
#X connect 33 7 8 0;
#X connect 33 8 9 0;
#X connect 33 9 10 0;
#X connect 33 10 11 0;
#X connect 33 11 12 0;
#X connect 33 12 13 0;
#X connect 33 13 14 0;
#X connect 33 14 15 0;
#X connect 33 15 16 0;
#X connect 33 16 34 0;
#X connect 34 0 17 0;
#X connect 34 1 18 0;
#X connect 34 2 19 0;
#X connect 34 3 20 0;
#X connect 34 4 21 0;
#X connect 34 5 22 0;
#X connect 34 6 23 0;
#X connect 34 7 24 0;
#X connect 34 8 25 0;
#X connect 34 9 26 0;
#X connect 34 10 27 0;
#X connect 34 11 28 0;
#X connect 34 12 29 0;
#X connect 34 13 30 0;
#X connect 34 14 31 0;
#X connect 34 15 32 0;
#X connect 35 0 37 0;
#X connect 36 0 37 0;
#X restore 79 364 pd id2patt;
#N canvas 677 242 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 79 319 pd randomelement;
#X text 184 311 Here we select randomly from the possible patterns
\, represented by their ID;
#X text 146 362 Here we convert that ID into a 4 step pattern;
#X obj 44 22 inlet;
#X text 10 4 group of the previous beat;
#X obj 476 23 inlet;
#X text 431 3 group of the next beat;
#X connect 1 0 4 1;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 8 0;
#X connect 12 0 11 0;
#X connect 15 0 3 0;
#X connect 17 0 1 1;
#X restore 433 176 pd smart_group2beats;
#X obj 289 206 list append;
#X obj 145 223 list append;
#X obj 54 240 list append;
#X connect 0 0 3 0;
#X connect 2 0 14 0;
#X connect 3 0 6 0;
#X connect 3 1 8 0;
#X connect 3 2 10 0;
#X connect 3 3 11 1;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 13 0;
#X connect 8 0 7 1;
#X connect 8 1 9 0;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 10 1 11 0;
#X connect 11 0 12 1;
#X connect 12 0 13 1;
#X connect 13 0 14 1;
#X connect 14 0 1 0;
#X restore 115 313 pd groups2onsets;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p1 64 float 1;
#A 0 0.147541 0.0655738 0.229508 0.0655738 0.180328 0.180328 0.0655738
0.245902 0.180328 0.180328 0.229508 0.442623 0.114754 0.0819672 0 0.0983607
0.0327869 0.0983607 0.163934 0.0983607 0.114754 0.0819672 0.0491803
0.0655738 0.0163934 0.0327869 0.0655738 0.114754 0.0163934 0.0819672
0 0 0.0819672 0.147541 0.0819672 0.0327869 0.0327869 0.0983607 0.0327869
0.147541 0 0 0.147541 0.163934 0.0163934 0.0327869 0.0163934 0 0 0
0.0327869 0 0.0163934 0.131148 0.0163934 0 0 0 1 0.360656 0.163934
0.278689 0.0655738 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 73 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p2 64 float 1;
#A 0 0.166667 0.0555556 0.0555556 0.138889 0.166667 0.0277778 0.0277778
0.138889 0.0833333 0.194444 0.166667 0.138889 0.0833333 0 0.0277778
0.194444 0.0555556 0.138889 0.583333 0.666667 1 0.138889 0.111111 0.611111
0 0.25 0.0555556 0.722222 0.388889 0.305556 0.222222 0.222222 0.0555556
0.0833333 0.0555556 0.0277778 0.111111 0.361111 0.138889 0.277778 0
0 0.305556 0.472222 0.194444 0.527778 0.138889 0 0 0 0.0833333 0.0833333
0.0277778 0.138889 0.0833333 0 0 0 0.305556 0.222222 0.222222 0.111111
0.0833333 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 138 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p3 64 float 1;
#A 0 0.185185 0.037037 0.037037 0.0740741 0.0740741 0 0.0740741 0 0.222222
0.185185 0.111111 0.333333 0.037037 0 0 0.0740741 0.333333 0.407407
0.222222 0.259259 0.740741 0.0740741 0 0.111111 0.333333 0.851852 0.851852
0.925926 0.185185 0.111111 0 0.037037 0.851852 0.925926 0.592593 0.37037
0.111111 0 0 0.0740741 0 0 0.888889 0.851852 0.222222 0.111111 0.0740741
0 0 0 0.444444 0.592593 0.0740741 0 0 0 0 0 1 0.481481 0.37037 0.037037
0.037037 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 204 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p4 64 float 1;
#A 0 0.441176 0.294118 0.0588235 0.0588235 0.0882353 0.0882353 0 0.5
0.323529 0.5 0.0882353 0.0588235 0.205882 0.117647 0 0.617647 0.617647
0.676471 0.617647 0.117647 0.352941 0.0882353 0.147059 0.676471 0.411765
0.735294 0.205882 0.147059 0.264706 0.147059 0.176471 1 0.323529 0.176471
0.117647 0.0588235 0.117647 0.0588235 0.0294118 0.558824 0 0 0.0882353
0.0588235 0.0588235 0.0588235 0 0 0 0 0.0294118 0.0294118 0.0294118
0.0588235 0 0 0 0 0.0588235 0.0588235 0.0588235 0.0588235 0 0;
#X coords 0 1 63 0 200 50 1 0 0;
#X restore 537 269 graph;
#X text 747 84 1st beat to 2nd beat;
#X text 747 146 2nd beat to 3rd beat;
#X text 746 219 3rd beat to 4th beat;
#X text 749 284 4th beat to 1st beat;
#X msg 115 95 bang;
#X text 121 32 Given a threshold output a sequence of groups based
on probabilities.;
#X obj 148 95 r th_min;
#X obj 202 95 r th_max;
#X obj 115 135 t f f;
#N canvas 546 125 450 504 1stto2nd 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 68 197 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 466 342 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 248 206 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#N canvas 583 240 450 300 read_p1 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 178 tabread p1;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 9 1;
#X connect 9 0 2 0;
#X connect 10 0 4 0;
#X connect 10 1 7 0;
#X connect 10 2 8 0;
#X restore 68 129 pd read_p1;
#X text 132 128 read the probabilities from the table;
#X obj 68 74 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#X obj 68 149 s slistprob2;
#X obj 68 175 r rlistprob2;
#X connect 0 0 18 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 20 0;
#X connect 16 0 21 0;
#X connect 18 0 16 0;
#X connect 22 0 3 0;
#X restore 142 183 pd 1stto2nd;
#X obj 296 100 s th_min;
#X obj 394 97 s th_max;
#X obj 173 149 r th_min;
#X obj 205 166 r th_max;
#X obj 268 188 r th_min;
#X obj 300 205 r th_max;
#N canvas 543 123 450 504 2ndto3rd 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 67 177 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 463 340 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 245 204 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#X text 131 100 read the probabilities from the table;
#X obj 67 82 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#N canvas 583 240 450 300 read_p2 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 38 178 tabread p2;
#X connect 0 0 9 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 3 0;
#X connect 9 1 6 0;
#X connect 9 2 7 0;
#X connect 10 0 1 0;
#X restore 67 101 pd read_p2;
#X obj 67 125 s slistprob3;
#X obj 67 151 r rlistprob3;
#X connect 0 0 17 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 19 0;
#X connect 17 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 3 0;
#X restore 237 222 pd 2ndto3rd;
#X obj 364 224 r th_min;
#X obj 396 241 r th_max;
#N canvas 854 126 450 504 3rdto4th 0;
#X obj 43 34 inlet;
#X obj 159 35 inlet;
#X obj 276 38 inlet;
#X obj 67 177 t f f;
#X obj 67 215 >=;
#X obj 90 251 t f f;
#X obj 90 232 *;
#X obj 147 310 *;
#X obj 147 328 repack 8;
#X obj 147 346 t a a;
#X obj 228 363 sum;
#N canvas 466 342 450 300 list_divide 0;
#X obj 26 12 inlet;
#X obj 281 46 inlet;
#X obj 39 251 outlet;
#X obj 138 100 list append;
#X obj 61 83 t b a;
#X obj 61 62 list split 1;
#X obj 75 126 /;
#X obj 250 145 list;
#X msg 267 99 bang;
#X obj 67 150 list prepend;
#X obj 34 40 t b a b;
#X obj 35 163 list;
#X text 165 217 divide a list by a given number;
#X connect 0 0 10 0;
#X connect 1 0 6 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 7 0 9 1;
#X connect 8 0 7 1;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X connect 11 0 2 0;
#X restore 147 381 pd list_divide;
#X obj 90 293 <=;
#X text 157 397 always output a list of 8 numbers;
#N canvas 248 206 941 502 weighted_probability 0;
#X obj 126 310 +;
#X obj 148 310 f;
#X msg 232 189 0;
#X obj 126 289 packel;
#X obj 72 95 list length;
#X obj 72 133 until;
#X obj 126 249 list;
#X obj 125 154 f;
#X obj 150 153 + 1;
#X msg 136 126 0;
#X obj 167 263 + 1;
#X obj 72 114 - 1;
#X obj 308 170 random 100;
#X obj 308 189 / 100;
#X obj 190 288 packel;
#X obj 223 269 + 2;
#X obj 126 268 t a a;
#X obj 190 310 +;
#X obj 212 310 f;
#X obj 121 24 list prepend 0;
#X obj 308 251 t f f;
#X obj 267 392 &&;
#X obj 126 175 t b f f f;
#X obj 367 430 f;
#X obj 267 413 sel 1;
#X obj 214 375 <=;
#X obj 282 371 >;
#X obj 382 361 + 1;
#X text 406 47 input a NORMALIZERD probability list and output a randomized
group index following the probability distribution. ie: if we enter
0.2 0.4 0.1 0.3 as a list \, we eill get the index of the group (1
\, 2 3 or 4) depending on the result of throwing the dice.;
#X obj 121 5 inlet;
#X obj 457 447 outlet;
#X obj 121 44 t a b a b b a;
#X obj 456 205 sum;
#X obj 461 268 sel 0;
#X msg 461 297 -1;
#X text 480 203 in case the list is allzero \, output a '-1' to indicate
that no group can be selected.;
#X connect 0 0 1 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 2 0 17 1;
#X connect 3 0 0 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 8 0;
#X connect 7 0 22 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 3 1;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 3 0;
#X connect 16 1 14 0;
#X connect 17 0 18 0;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 31 0;
#X connect 20 0 25 1;
#X connect 20 1 26 1;
#X connect 21 0 24 0;
#X connect 22 0 6 0;
#X connect 22 1 10 0;
#X connect 22 2 15 0;
#X connect 22 3 27 0;
#X connect 23 0 30 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 26 0 21 1;
#X connect 27 0 23 1;
#X connect 29 0 19 0;
#X connect 31 0 4 0;
#X connect 31 1 9 0;
#X connect 31 2 6 1;
#X connect 31 3 2 0;
#X connect 31 4 12 0;
#X connect 31 5 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 30 0;
#X restore 147 414 pd weighted_probability;
#X text 120 273 convert to zero the values above this threshold;
#X obj 67 85 - 1;
#X text 118 194 convert to zero the values below this threshold;
#X obj 147 441 outlet;
#N canvas 583 240 450 300 read_p3 0;
#X obj 38 21 inlet;
#X obj 53 241 outlet;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 38 178 tabread p3;
#X connect 0 0 9 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 3 0;
#X connect 9 1 6 0;
#X connect 9 2 7 0;
#X connect 10 0 1 0;
#X restore 67 104 pd read_p3;
#X text 148 102 mpo and beat analysis of acoustic musical signals.
;
#X obj 67 129 s slistprob4;
#X obj 67 155 r rlistprob4;
#X connect 0 0 16 0;
#X connect 1 0 4 1;
#X connect 2 0 12 1;
#X connect 3 0 4 0;
#X connect 3 1 6 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 5 1 7 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 14 0 18 0;
#X connect 16 0 19 0;
#X connect 19 0 21 0;
#X connect 22 0 3 0;
#X restore 333 260 pd 3rdto4th;
#X obj 142 205 t f f;
#X obj 237 243 t f f;
#X obj 115 292 pack f f f f;
#X msg 910 223 \; p1 const 0 \; p2 const 0 \; p3 const 0 \; p4 const
0;
#X text 903 204 clear all->;
#X obj 115 69 inlet bang;
#N canvas 367 105 697 533 start 0;
#X obj 47 215 t f f;
#X obj 47 253 >=;
#X obj 70 289 t f f;
#X obj 70 270 *;
#X obj 127 348 *;
#X obj 70 331 <=;
#X obj 62 234 inlet;
#X text 170 235 convert to zero the values below this threshold;
#X text 195 307 convert to zero the values above this threshold;
#X obj 85 308 inlet;
#N canvas 571 232 450 300 read_p1 0;
#X obj 38 21 inlet;
#X obj 38 248 outlet;
#X obj 38 222 tabread p1;
#X obj 38 121 until;
#X msg 38 102 8;
#X obj 38 140 f;
#X obj 64 140 + 1;
#X msg 78 116 0;
#X obj 130 142 * 8;
#X obj 38 159 +;
#X obj 38 83 t b b f;
#X obj 130 248 outlet;
#X obj 130 208 + 1;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 9 1;
#X connect 9 0 2 0;
#X connect 10 0 4 0;
#X connect 10 1 7 0;
#X connect 10 2 8 0;
#X connect 10 2 12 0;
#X connect 12 0 11 0;
#X restore 47 149 pd read_p1;
#X text 111 148 read the probabilities from the table;
#X obj 47 111 until;
#X obj 47 131 f;
#X obj 75 131 + 1;
#X msg 92 112 0;
#X obj 127 369 sel 0;
#X obj 228 411 f;
#X text 97 234 <-----------;
#X text 121 306 <-----------;
#X msg 154 388 bang;
#X text 262 369 output the groups of the first beat that can have a
continuing group with a probability within the threshold.;
#X obj 295 428 list;
#X obj 30 445 list;
#X obj 326 428 list;
#X msg 316 405 bang;
#X obj 30 76 t b f b b;
#N canvas 692 252 450 300 randomelement 0;
#X obj 78 39 inlet;
#X text 105 7 input a list and output one of the elements randomly
;
#X obj 150 56 list length;
#X obj 145 103 random;
#X obj 152 80 t b f;
#X obj 78 135 packel;
#X obj 78 61 t a a;
#X obj 78 161 outlet;
#X obj 144 138 + 1;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 1 2 0;
#X connect 8 0 5 1;
#X restore 30 466 pd randomelement;
#X obj 30 28 inlet;
#X obj 30 486 outlet;
#X msg 30 52 8;
#X obj 47 169 s slistprob1;
#X obj 47 195 r rlistprob1;
#X connect 0 0 1 0;
#X connect 0 1 3 1;
#X connect 1 0 3 0;
#X connect 2 0 5 0;
#X connect 2 1 4 1;
#X connect 3 0 2 0;
#X connect 4 0 16 0;
#X connect 5 0 4 0;
#X connect 6 0 1 1;
#X connect 9 0 5 1;
#X connect 10 0 31 0;
#X connect 10 1 17 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 13 0 10 0;
#X connect 14 0 13 1;
#X connect 15 0 13 1;
#X connect 16 1 20 0;
#X connect 17 0 22 0;
#X connect 20 0 17 0;
#X connect 22 0 24 0;
#X connect 22 0 23 1;
#X connect 23 0 27 0;
#X connect 24 0 22 1;
#X connect 25 0 22 1;
#X connect 26 0 23 0;
#X connect 26 1 12 0;
#X connect 26 2 15 0;
#X connect 26 3 25 0;
#X connect 27 0 29 0;
#X connect 28 0 30 0;
#X connect 30 0 26 0;
#X connect 32 0 0 0;
#X restore 115 115 pd start;
#X obj 92 384 r slistprob1;
#X obj 181 384 r slistprob2;
#X obj 271 384 r slistprob3;
#X obj 359 384 r slistprob4;
#X obj 92 588 s rlistprob1;
#X obj 181 588 s rlistprob2;
#X obj 271 588 s rlistprob3;
#X obj 359 588 s rlistprob4;
#X obj 115 334 outlet;
#X obj 92 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 181 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 270 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X obj 359 418 cnv 15 80 150 empty empty empty 20 12 0 14 -258113 -66577
0;
#X text 444 404 <- here we get the probability lists of each transition
table. They consist of 8 numbers weighting the chance of moving to
a specific syncopation group. The order of the groups is syncopation
\, so the rightmost groups are more syncopated and the groups on the
left are more beat reinforcing.;
#X text 448 485 <- If we modify those weights we will be influencing
the generation of more syncopated or more beat-reinforcing patterns.
;
#X text 450 538 <- we could also eliminate elements that are above
or below a certain threshold value to promote rhythms that are more
or less common according to our library.;
#X obj 296 61 loadbang;
#X msg 296 80 0;
#X obj 394 58 loadbang;
#X msg 394 77 1;
#X connect 0 0 40 0;
#X connect 9 0 31 0;
#X connect 11 0 31 1;
#X connect 12 0 31 2;
#X connect 13 0 27 0;
#X connect 13 1 14 0;
#X connect 14 0 25 0;
#X connect 17 0 14 1;
#X connect 18 0 14 2;
#X connect 19 0 21 1;
#X connect 20 0 21 2;
#X connect 21 0 26 0;
#X connect 22 0 24 1;
#X connect 23 0 24 2;
#X connect 24 0 27 3;
#X connect 25 0 27 1;
#X connect 25 1 21 0;
#X connect 26 0 27 2;
#X connect 26 1 24 0;
#X connect 27 0 0 0;
#X connect 30 0 9 0;
#X connect 31 0 13 0;
#X connect 32 0 36 0;
#X connect 33 0 37 0;
#X connect 34 0 38 0;
#X connect 35 0 39 0;
#X connect 48 0 49 0;
#X connect 49 0 15 0;
#X connect 50 0 51 0;
#X connect 51 0 16 0;
#X restore 47 229 pd generate_rhythm;
#X obj 57 250 l2s;
#X symbolatom 57 270 32 0 0 0 - - -;
#X text 45 15 Rhythm analysis and generation;
#X text 43 363 Daniel Gomez 2015;
#X text 78 200 3 bang to generate a rhythm;
#X text 164 228 <- look inside!;
#X obj 47 295 tabset rhythm;
#X obj 328 155 cnv 15 150 250 empty empty empty 20 12 0 14 -258113
-66577 0;
#X obj 347 178 table rhythm 16;
#X obj 360 305 tabread rhythm;
#X obj 360 259 f 0;
#X obj 388 257 + 1;
#X obj 359 283 mod 16;
#X obj 359 326 sel 1;
#X obj 360 213 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 359 349 s onset;
#X floatatom 411 212 5 0 0 0 - - -;
#X obj 360 234 metro 125;
#X text 186 118 2) Bang when the corpus has been introduced completely
;
#X text 41 34 1) Input a lot of rhythms (from the corpus) in binary
format to analyze. They should be 16 character long (each character
is at the resolution of a sixteenth note);
#X connect 1 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 6 0 13 0;
#X connect 7 0 8 0;
#X connect 16 0 20 0;
#X connect 17 0 18 0;
#X connect 17 0 19 0;
#X connect 18 0 17 1;
#X connect 19 0 16 0;
#X connect 20 0 22 0;
#X connect 21 0 24 0;
#X connect 23 0 24 1;
#X connect 24 0 17 0;
