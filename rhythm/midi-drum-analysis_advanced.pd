#N canvas 602 76 1267 699 10;
#X declare -path ../handy-abs;
#X obj 189 -572 nbx 5 14 0 32 0 1 empty empty empty 0 -8 0 10 -262144
-1 -1 8 256;
#X text 192 -591 Length of patterns in beats;
#N canvas 379 294 817 480 makepatterns 0;
#X obj 31 30 inlet;
#X obj 118 71 inlet;
#X obj 271 40 inlet;
#X obj 365 35 inlet;
#X text 345 18 length in beats;
#X text 251 21 bang to start;
#X text 28 12 bang to end;
#X obj 109 248 list-replace;
#X obj 109 209 t b f b;
#X msg 109 228 1;
#N canvas 97 440 450 300 makezerolist 0;
#X obj 152 77 until;
#X obj 155 121 f;
#X obj 188 121 + 1;
#X msg 204 75 0;
#X msg 155 153 0;
#X obj 157 200 list prepend;
#X obj 240 234 list;
#X msg 251 173 bang;
#X obj 139 43 t b f b b;
#X obj 129 235 list;
#X obj 156 22 inlet;
#X obj 134 273 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 5 1;
#X connect 6 0 9 1;
#X connect 7 0 5 1;
#X connect 8 0 9 0;
#X connect 8 1 0 0;
#X connect 8 2 3 0;
#X connect 8 3 7 0;
#X connect 9 0 11 0;
#X connect 10 0 8 0;
#X restore 279 110 pd makezerolist;
#X obj 365 57 * 4;
#X obj 279 89 f;
#X obj 188 247 list;
#X obj 85 323 list;
#X obj 226 246 list-replace;
#X obj 226 207 t b f b;
#X msg 226 226 1;
#X obj 305 245 list;
#X obj 205 333 list;
#X obj 31 284 t b b b b;
#X obj 338 245 list-replace;
#X obj 338 206 t b f b;
#X msg 338 225 1;
#X obj 317 332 list;
#X text 102 51 index note pairs;
#X obj 142 381 outlet;
#X obj 274 386 outlet;
#X obj 374 382 outlet;
#X obj 279 63 t b b;
#X msg 612 262 bang;
#X text 648 262 empty lists;
#X obj 419 245 list;
#X obj 85 354 route bang;
#X obj 217 356 route bang;
#X obj 317 357 route bang;
#X obj 493 101 inlet;
#X obj 493 124 unpack f f f f;
#X obj 441 329 list;
#X obj 498 379 outlet;
#X obj 441 354 route bang;
#X obj 462 242 list-replace;
#X obj 462 203 t b f b;
#X msg 462 222 1;
#X obj 543 242 list;
#X obj 172 133 t a a a a;
#X obj 109 167 route;
#X obj 225 182 route;
#X obj 338 187 route;
#X obj 462 184 route;
#X connect 0 0 20 0;
#X connect 1 0 45 0;
#X connect 2 0 29 0;
#X connect 3 0 11 0;
#X connect 7 0 13 0;
#X connect 7 0 14 1;
#X connect 8 0 9 0;
#X connect 8 1 7 1;
#X connect 9 0 7 0;
#X connect 10 0 7 2;
#X connect 10 0 15 2;
#X connect 10 0 21 2;
#X connect 10 0 41 2;
#X connect 11 0 12 1;
#X connect 12 0 10 0;
#X connect 13 0 7 2;
#X connect 14 0 33 0;
#X connect 15 0 18 0;
#X connect 15 0 19 1;
#X connect 16 0 17 0;
#X connect 16 1 15 1;
#X connect 17 0 15 0;
#X connect 18 0 15 2;
#X connect 19 0 34 0;
#X connect 20 0 14 0;
#X connect 20 1 19 0;
#X connect 20 2 24 0;
#X connect 20 3 38 0;
#X connect 21 0 24 1;
#X connect 21 0 32 0;
#X connect 22 0 23 0;
#X connect 22 1 21 1;
#X connect 23 0 21 0;
#X connect 24 0 35 0;
#X connect 29 0 12 0;
#X connect 29 1 30 0;
#X connect 30 0 24 1;
#X connect 30 0 19 1;
#X connect 30 0 14 1;
#X connect 30 0 38 1;
#X connect 32 0 21 2;
#X connect 33 1 26 0;
#X connect 34 1 27 0;
#X connect 35 1 28 0;
#X connect 36 0 37 0;
#X connect 37 0 46 1;
#X connect 37 1 47 1;
#X connect 37 2 48 1;
#X connect 37 3 49 1;
#X connect 38 0 40 0;
#X connect 40 1 39 0;
#X connect 41 0 44 0;
#X connect 41 0 38 1;
#X connect 42 0 43 0;
#X connect 42 1 41 1;
#X connect 43 0 41 0;
#X connect 44 0 41 2;
#X connect 45 0 46 0;
#X connect 45 1 47 0;
#X connect 45 2 48 0;
#X connect 45 3 49 0;
#X connect 46 0 8 0;
#X connect 47 0 16 0;
#X connect 48 0 22 0;
#X connect 49 0 42 0;
#X restore 50 -507 pd makepatterns;
#X obj 90 -572 nbx 5 14 0 16 0 1 empty empty empty 0 -8 0 10 -262144
-1 -1 10 256;
#N canvas 190 76 761 601 midiextract 0;
#X msg 78 82 read \$1;
#X obj 204 174 route bang format tracks ticks_per_quarternote;
#X msg -4 114 verbose 0;
#X obj -4 94 loadbang;
#X obj 78 63 symbol;
#X obj -13 208 route 144 153;
#X text 74 211 <- MIDI channel 1 or 10;
#X text 90 201 only onsets;
#X obj 70 357 list split 1;
#X text 152 355 <- only notes;
#X obj 66 124 until;
#X obj 78 42 inlet;
#X obj 165 449 outlet;
#X obj 165 429 pack f f;
#X msg 59 490 bang;
#X obj 367 224 *;
#X obj 585 207 inlet;
#X floatatom 415 200 5 0 0 0 - - -;
#X text 448 197 <- ticks per beat;
#X text 559 185 beats to extract;
#X obj 367 202 t f f;
#X obj 352 356 /;
#X text 377 355 <- convert tiks to sixteenth note;
#X obj 392 318 / 4;
#X obj 351 375 int;
#X text 378 376 <- always queantize down;
#X obj 585 118 outlet;
#X text 488 101 bang at start for convenience;
#X obj 78 101 t b a b;
#X obj 59 529 outlet;
#X text 9 504 bang at END for convenience;
#X obj 327 248 %;
#X obj 327 267 sel 0;
#X msg 204 120 bang;
#X obj 327 287 t b b;
#X obj 352 331 %;
#X obj 244 452 spigot;
#X obj 238 219 t f f f;
#X obj 81 284 == 1;
#X obj 156 286 == 10;
#X obj 156 264 inlet;
#X obj 48 314 spigot;
#X obj 121 309 spigot;
#X text 121 247 select midi channel;
#X floatatom 186 317 5 0 0 0 - - -;
#X floatatom 131 334 5 0 0 0 - - -;
#X obj 105 154 mrpeach/midifile;
#X connect 0 0 28 0;
#X connect 1 0 33 0;
#X connect 1 3 17 0;
#X connect 1 3 20 0;
#X connect 2 0 46 0;
#X connect 3 0 2 0;
#X connect 4 0 0 0;
#X connect 5 0 41 0;
#X connect 5 1 42 0;
#X connect 8 0 13 0;
#X connect 10 0 46 0;
#X connect 11 0 4 0;
#X connect 13 0 12 0;
#X connect 14 0 29 0;
#X connect 15 0 31 1;
#X connect 15 0 35 1;
#X connect 16 0 15 1;
#X connect 20 0 15 0;
#X connect 20 1 23 0;
#X connect 21 0 24 0;
#X connect 23 0 21 1;
#X connect 24 0 13 1;
#X connect 28 0 10 0;
#X connect 28 1 46 0;
#X connect 28 2 26 0;
#X connect 31 0 32 0;
#X connect 32 0 34 0;
#X connect 33 0 10 1;
#X connect 34 0 26 0;
#X connect 34 1 36 0;
#X connect 35 0 21 0;
#X connect 36 0 14 0;
#X connect 37 0 35 0;
#X connect 37 1 31 0;
#X connect 37 2 36 1;
#X connect 38 0 41 1;
#X connect 38 0 45 0;
#X connect 39 0 42 1;
#X connect 39 0 44 0;
#X connect 40 0 38 0;
#X connect 40 0 39 0;
#X connect 41 0 8 0;
#X connect 42 0 8 0;
#X connect 46 0 5 0;
#X connect 46 1 37 0;
#X connect 46 2 1 0;
#X restore 50 -553 pd midiextract;
#X text 60 -602 select midi channel;
#X text 57 -590 (1 for this example);
#X text 32 -644 input a filename to analyze;
#X obj 186 -542 loadbang;
#X text 27 -767 This patch xtracts onset patterns of a certain length
form a MIDI drum file. To extract the patterns you must know a) the
MIDI note number of the kick \, snare \, closed hihat and open hihat.
b) the midi channel in which the drums are sequenced.;
#X text 26 -699 The fist beat of all the drum patterns to analyze must
start in time=0. That is \, there can be no silence before the sequence
starts.;
#X msg 186 -524 35 38 42 47;
#X text 27 -626 1;
#X text 23 -399 2;
#X text 36 -399 normalize all histograms;
#X text 414 -803 clear all histograms;
#X obj 396 -765 cnv 15 240 400 empty empty Histograms 20 22 1 40 -262130
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array kick 66151 float 0;
#X coords 0 1 66150 0 200 70 1 0 0;
#X restore 413 -698 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array snare 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 413 -617 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array ch 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 413 -533 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array oh 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 413 -449 graph;
#X obj 51 -188 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 637 -765 cnv 15 240 400 empty empty Probabilities 20 22 1 40
-203904 -66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-kick 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 659 -698 graph;
#X obj 878 -765 cnv 15 120 400 empty empty index 20 22 1 40 -228856
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-kick-index 32 float 0;
#X coords 0 32 31 0 70 70 1 0 0;
#X restore 897 -698 graph;
#X text 29 -191 3;
#X text 69 -191 bang to sort by metrical weight;
#X text 185 -558 midi note of k \, sn \, ch \, oh;
#N canvas 713 499 450 300 clear_all_histograms 0;
#X msg 81 94 \; kick const 0;
#X msg 81 62 \; snare const 0;
#X msg 174 94 \; ch const 0;
#X obj 81 37 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 105 21 inlet;
#X msg 174 62 \; oh const 0;
#X connect 3 0 0 0;
#X connect 3 0 1 0;
#X connect 3 0 2 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X restore 397 -784 pd clear_all_histograms;
#X obj 397 -801 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 999 -765 cnv 15 240 400 empty empty sigmoid 20 22 1 40 -261234
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-kick-sigmoid 32 float 0;
#X coords 0 1 31 0 200 50 1 0 0;
#X restore 1032 -688 graph;
#X obj 400 -357 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1035 -716 hsl 195 15 -1 1 0 0 kick-sigmoid nor kick-sigmoid
60 7 1 14 -1 -261234 -262144 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-snare 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 659 -615 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-snare-index 32 float 0;
#X coords 0 32 31 0 70 70 1 0 0;
#X restore 897 -615 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-snare-sigmoid 32 float 0;
#X coords 0 1 31 0 200 50 1 0 0;
#X restore 1032 -605 graph;
#X obj 1035 -633 hsl 195 15 -1 1 0 0 snare-sigmoid nor snare-sigmoid
60 7 1 14 -1 -261234 -262144 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-ch 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 659 -534 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-ch-index 32 float 0;
#X coords 0 32 31 0 70 70 1 0 0;
#X restore 897 -534 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-ch-sigmoid 32 float 0;
#X coords 0 1 31 0 200 50 1 0 0;
#X restore 1032 -524 graph;
#X obj 1035 -550 hsl 195 15 -1 1 0 0 ch-sigmoid nor ch-sigmoid 60 7
1 14 -1 -261234 -262144 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-oh 32 float 0;
#X coords 0 1 31 0 200 70 1 0 0;
#X restore 659 -450 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-oh-index 32 float 0;
#X coords 0 32 31 0 70 70 1 0 0;
#X restore 897 -450 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array p-oh-sigmoid 32 float 0;
#X coords 0 1 31 0 200 50 1 0 0;
#X restore 1032 -440 graph;
#X obj 1035 -466 hsl 195 15 -1 1 0 0 oh-sigmoid nor oh-sigmoid 60 7
1 14 -1 -261234 -262144 0 1;
#N canvas 1 22 1265 678 sort-all-by-metrical-weight-and-send-to-sigmoids
0;
#X obj 86 -703 inlet;
#N canvas 170 290 678 509 sortbasedonA 0;
#X obj 40 73 inlet;
#X text 35 59 list A;
#X obj 220 77 inlet;
#X text 215 63 list B;
#X obj 40 416 outlet;
#X text 29 433 list A sorted;
#X obj 188 416 outlet;
#X text 178 432 list B ordered acorrding to list A sorting;
#X obj 40 94 sort;
#X obj 149 253 packel;
#X obj 149 225 list;
#X obj 149 206 t b f;
#X obj 84 166 list split 1;
#X obj 84 189 t b f;
#X obj 110 244 list;
#X obj 149 283 list prepend;
#X obj 233 286 list;
#X msg 288 222 bang;
#X obj 72 300 list;
#X obj 173 165 + 1;
#X text 40 16 sort two lists based on the ascending order of the one
on the left;
#X obj 492 409 outlet;
#X text 464 433 indexes of A previous to sorting;
#X obj 72 112 t b a b a;
#X connect 0 0 8 0;
#X connect 2 0 10 1;
#X connect 8 0 4 0;
#X connect 8 1 23 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 10 0;
#X connect 11 1 9 1;
#X connect 12 0 13 0;
#X connect 12 1 14 1;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 14 0 12 0;
#X connect 15 0 16 0;
#X connect 15 0 18 1;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 6 0;
#X connect 19 0 11 0;
#X connect 23 0 18 0;
#X connect 23 1 12 0;
#X connect 23 2 17 0;
#X connect 23 3 21 0;
#X restore 568 -268 pd sortbasedonA;
#X obj 655 -287 tabdump kick;
#X text 611 -337 metrical weights;
#X obj 611 -170 send p-kick;
#X obj 611 -189 list prepend 0;
#X obj 655 -249 list prepend 0;
#X obj 655 -230 send p-kick-index;
#X msg 568 -319 6 1 2 1 3 1 2 1 4 1 2 1 3 1 2 1 5 1 2 1 3 1 2 1 4 1
2 1 3 1 2 1;
#X text 330 -705 Order the probabilities of the kick based on the metrical
weight by Lerdhal and Jackendorf. On the left the indexes with lowest
metrical weight \, on the right indexes with the highest metrical weight
(more reinforcement to the beat).;
#X text 330 -646 Save the indexes of the steps by metrical weight so
when we generate a number using the probability table we can search
for the position it has in the 32 step grid.;
#X obj 568 -338 t b b;
#N canvas 168 290 678 509 sortbasedonA 0;
#X obj 40 73 inlet;
#X text 35 59 list A;
#X obj 220 77 inlet;
#X text 215 63 list B;
#X obj 40 416 outlet;
#X text 29 433 list A sorted;
#X obj 188 416 outlet;
#X text 178 432 list B ordered acorrding to list A sorting;
#X obj 40 94 sort;
#X obj 149 253 packel;
#X obj 149 225 list;
#X obj 149 206 t b f;
#X obj 84 166 list split 1;
#X obj 84 189 t b f;
#X obj 110 244 list;
#X obj 149 283 list prepend;
#X obj 233 286 list;
#X msg 288 222 bang;
#X obj 72 300 list;
#X obj 173 165 + 1;
#X text 40 16 sort two lists based on the ascending order of the one
on the left;
#X obj 492 409 outlet;
#X text 464 433 indexes of A previous to sorting;
#X obj 72 112 t b a b a;
#X connect 0 0 8 0;
#X connect 2 0 10 1;
#X connect 8 0 4 0;
#X connect 8 1 23 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 10 0;
#X connect 11 1 9 1;
#X connect 12 0 13 0;
#X connect 12 1 14 1;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 14 0 12 0;
#X connect 15 0 16 0;
#X connect 15 0 18 1;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 6 0;
#X connect 19 0 11 0;
#X connect 23 0 18 0;
#X connect 23 1 12 0;
#X connect 23 2 17 0;
#X connect 23 3 21 0;
#X restore 495 -467 pd sortbasedonA;
#X text 538 -538 metrical weights;
#X obj 538 -379 list prepend 0;
#X obj 582 -439 list prepend 0;
#X msg 495 -520 6 1 2 1 3 1 2 1 4 1 2 1 3 1 2 1 5 1 2 1 3 1 2 1 4 1
2 1 3 1 2 1;
#X obj 495 -539 t b b;
#X obj 582 -488 tabdump snare;
#X obj 582 -420 send p-snare-index;
#X obj 538 -360 send p-snare;
#N canvas 170 290 678 509 sortbasedonA 0;
#X obj 40 73 inlet;
#X text 35 59 list A;
#X obj 220 77 inlet;
#X text 215 63 list B;
#X obj 40 416 outlet;
#X text 29 433 list A sorted;
#X obj 188 416 outlet;
#X text 178 432 list B ordered acorrding to list A sorting;
#X obj 40 94 sort;
#X obj 149 253 packel;
#X obj 149 225 list;
#X obj 149 206 t b f;
#X obj 84 166 list split 1;
#X obj 84 189 t b f;
#X obj 110 244 list;
#X obj 149 283 list prepend;
#X obj 233 286 list;
#X msg 288 222 bang;
#X obj 72 300 list;
#X obj 173 165 + 1;
#X text 40 16 sort two lists based on the ascending order of the one
on the left;
#X obj 492 409 outlet;
#X text 464 433 indexes of A previous to sorting;
#X obj 72 112 t b a b a;
#X connect 0 0 8 0;
#X connect 2 0 10 1;
#X connect 8 0 4 0;
#X connect 8 1 23 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 10 0;
#X connect 11 1 9 1;
#X connect 12 0 13 0;
#X connect 12 1 14 1;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 14 0 12 0;
#X connect 15 0 16 0;
#X connect 15 0 18 1;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 6 0;
#X connect 19 0 11 0;
#X connect 23 0 18 0;
#X connect 23 1 12 0;
#X connect 23 2 17 0;
#X connect 23 3 21 0;
#X restore 882 -459 pd sortbasedonA;
#X text 925 -530 metrical weights;
#X obj 925 -380 list prepend 0;
#X obj 969 -440 list prepend 0;
#X msg 882 -512 6 1 2 1 3 1 2 1 4 1 2 1 3 1 2 1 5 1 2 1 3 1 2 1 4 1
2 1 3 1 2 1;
#X obj 882 -531 t b b;
#X obj 969 -480 tabdump ch;
#X obj 969 -421 send p-ch-index;
#X obj 926 -361 send p-ch;
#N canvas 170 290 678 509 sortbasedonA 0;
#X obj 40 73 inlet;
#X text 35 59 list A;
#X obj 220 77 inlet;
#X text 215 63 list B;
#X obj 40 416 outlet;
#X text 29 433 list A sorted;
#X obj 188 416 outlet;
#X text 178 432 list B ordered acorrding to list A sorting;
#X obj 40 94 sort;
#X obj 149 253 packel;
#X obj 149 225 list;
#X obj 149 206 t b f;
#X obj 84 166 list split 1;
#X obj 84 189 t b f;
#X obj 110 244 list;
#X obj 149 283 list prepend;
#X obj 233 286 list;
#X msg 288 222 bang;
#X obj 72 300 list;
#X obj 173 165 + 1;
#X text 40 16 sort two lists based on the ascending order of the one
on the left;
#X obj 492 409 outlet;
#X text 464 433 indexes of A previous to sorting;
#X obj 72 112 t b a b a;
#X connect 0 0 8 0;
#X connect 2 0 10 1;
#X connect 8 0 4 0;
#X connect 8 1 23 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 10 0;
#X connect 11 1 9 1;
#X connect 12 0 13 0;
#X connect 12 1 14 1;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 14 0 12 0;
#X connect 15 0 16 0;
#X connect 15 0 18 1;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 6 0;
#X connect 19 0 11 0;
#X connect 23 0 18 0;
#X connect 23 1 12 0;
#X connect 23 2 17 0;
#X connect 23 3 21 0;
#X restore 940 -263 pd sortbasedonA;
#X text 983 -334 metrical weights;
#X obj 983 -184 list prepend 0;
#X obj 1027 -244 list prepend 0;
#X msg 940 -316 6 1 2 1 3 1 2 1 4 1 2 1 3 1 2 1 5 1 2 1 3 1 2 1 4 1
2 1 3 1 2 1;
#X obj 940 -335 t b b;
#X obj 1027 -225 send p-oh-index;
#X obj 984 -165 send p-oh;
#X obj 1027 -284 tabdump oh;
#X obj 361 -294 tabdump p-kick;
#X obj 361 -312 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 244 -235 list prepend 0;
#X obj 244 -216 send p-kick-sigmoid;
#X obj 244 -294 r kick-sigmoid;
#X obj 364 -193 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 247 -116 list prepend 0;
#X obj 364 -175 tabdump p-snare;
#X obj 247 -97 send p-snare-sigmoid;
#X obj 247 -175 r snare-sigmoid;
#X obj 159 -198 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 42 -121 list prepend 0;
#X obj 159 -180 tabdump p-ch;
#X obj 42 -180 r ch-sigmoid;
#X obj 42 -102 send p-ch-sigmoid;
#X obj 161 -308 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 44 -231 list prepend 0;
#X obj 161 -290 tabdump p-oh;
#X obj 44 -300 r oh-sigmoid;
#X obj 44 -212 send p-oh-sigmoid;
#X obj 86 -682 t b b;
#X text 54 -369 send normalized probabilities values to the sigmoid
utilities;
#X obj 730 -452 sort;
#X obj 1060 -457 sort;
#X obj 1127 -255 sort;
#X obj 759 -264 sort;
#N canvas 277 179 450 471 list_clip_01 0;
#X obj 65 39 inlet;
#X text 41 19 list with weights;
#X obj 127 116 list split 1;
#X obj 172 196 list;
#X obj 104 141 t b b f;
#X obj 303 283 list;
#X obj 90 366 list;
#X obj 89 386 outlet;
#X msg 410 92 bang;
#X obj 90 82 t b a b b;
#X obj 235 275 t a a;
#X obj 235 254 list prepend;
#X obj 87 61 list;
#X obj 235 187 clip 0 1;
#X connect 0 0 9 0;
#X connect 0 0 12 1;
#X connect 2 0 4 0;
#X connect 2 1 3 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 2 13 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 8 0 11 1;
#X connect 9 0 6 0;
#X connect 9 1 2 0;
#X connect 9 2 8 0;
#X connect 10 0 6 1;
#X connect 10 1 5 0;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 11 0;
#X restore 44 -252 pd list_clip_01;
#N canvas 277 179 450 471 list_clip_01 0;
#X obj 65 39 inlet;
#X text 41 19 list with weights;
#X obj 127 116 list split 1;
#X obj 172 196 list;
#X obj 104 141 t b b f;
#X obj 303 283 list;
#X obj 90 366 list;
#X obj 89 386 outlet;
#X msg 410 92 bang;
#X obj 90 82 t b a b b;
#X obj 235 275 t a a;
#X obj 235 254 list prepend;
#X obj 87 61 list;
#X obj 235 187 clip 0 1;
#X connect 0 0 9 0;
#X connect 0 0 12 1;
#X connect 2 0 4 0;
#X connect 2 1 3 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 2 13 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 8 0 11 1;
#X connect 9 0 6 0;
#X connect 9 1 2 0;
#X connect 9 2 8 0;
#X connect 10 0 6 1;
#X connect 10 1 5 0;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 11 0;
#X restore 244 -255 pd list_clip_01;
#N canvas 277 179 450 471 list_clip_01 0;
#X obj 65 39 inlet;
#X text 41 19 list with weights;
#X obj 127 116 list split 1;
#X obj 172 196 list;
#X obj 104 141 t b b f;
#X obj 303 283 list;
#X obj 90 366 list;
#X obj 89 386 outlet;
#X msg 410 92 bang;
#X obj 90 82 t b a b b;
#X obj 235 275 t a a;
#X obj 235 254 list prepend;
#X obj 87 61 list;
#X obj 235 187 clip 0 1;
#X connect 0 0 9 0;
#X connect 0 0 12 1;
#X connect 2 0 4 0;
#X connect 2 1 3 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 2 13 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 8 0 11 1;
#X connect 9 0 6 0;
#X connect 9 1 2 0;
#X connect 9 2 8 0;
#X connect 10 0 6 1;
#X connect 10 1 5 0;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 11 0;
#X restore 247 -135 pd list_clip_01;
#N canvas 277 179 450 471 list_clip_01 0;
#X obj 65 39 inlet;
#X text 41 19 list with weights;
#X obj 127 116 list split 1;
#X obj 172 196 list;
#X obj 104 141 t b b f;
#X obj 303 283 list;
#X obj 90 366 list;
#X obj 89 386 outlet;
#X msg 410 92 bang;
#X obj 90 82 t b a b b;
#X obj 235 275 t a a;
#X obj 235 254 list prepend;
#X obj 87 61 list;
#X obj 235 187 clip 0 1;
#X connect 0 0 9 0;
#X connect 0 0 12 1;
#X connect 2 0 4 0;
#X connect 2 1 3 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 2 13 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 8 0 11 1;
#X connect 9 0 6 0;
#X connect 9 1 2 0;
#X connect 9 2 8 0;
#X connect 10 0 6 1;
#X connect 10 1 5 0;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 11 0;
#X restore 41 -141 pd list_clip_01;
#X obj 538 -399 normalize;
#X obj 925 -400 normalize;
#X obj 983 -204 normalize;
#X obj 611 -209 normalize;
#X obj 247 -156 sigmoid;
#X obj 244 -275 sigmoid;
#X obj 42 -161 sigmoid;
#X obj 44 -271 sigmoid;
#X connect 0 0 59 0;
#X connect 1 1 72 0;
#X connect 1 2 64 0;
#X connect 2 0 1 1;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 8 0 1 0;
#X connect 11 0 8 0;
#X connect 11 1 2 0;
#X connect 12 1 69 0;
#X connect 12 2 61 0;
#X connect 14 0 20 0;
#X connect 15 0 19 0;
#X connect 16 0 12 0;
#X connect 17 0 16 0;
#X connect 17 1 18 0;
#X connect 18 0 12 1;
#X connect 21 1 70 0;
#X connect 21 2 62 0;
#X connect 23 0 29 0;
#X connect 24 0 28 0;
#X connect 25 0 21 0;
#X connect 26 0 25 0;
#X connect 26 1 27 0;
#X connect 27 0 21 1;
#X connect 30 1 71 0;
#X connect 30 2 63 0;
#X connect 32 0 37 0;
#X connect 33 0 36 0;
#X connect 34 0 30 0;
#X connect 35 0 34 0;
#X connect 35 1 38 0;
#X connect 38 0 30 1;
#X connect 39 0 74 1;
#X connect 40 0 39 0;
#X connect 41 0 42 0;
#X connect 43 0 74 0;
#X connect 44 0 46 0;
#X connect 45 0 47 0;
#X connect 46 0 73 1;
#X connect 48 0 73 0;
#X connect 49 0 51 0;
#X connect 50 0 53 0;
#X connect 51 0 75 1;
#X connect 52 0 75 0;
#X connect 54 0 56 0;
#X connect 55 0 58 0;
#X connect 56 0 76 1;
#X connect 57 0 76 0;
#X connect 59 0 54 0;
#X connect 59 0 40 0;
#X connect 59 0 49 0;
#X connect 59 0 44 0;
#X connect 59 1 11 0;
#X connect 59 1 35 0;
#X connect 59 1 17 0;
#X connect 59 1 26 0;
#X connect 61 1 15 0;
#X connect 62 1 24 0;
#X connect 63 1 33 0;
#X connect 64 1 6 0;
#X connect 65 0 55 0;
#X connect 66 0 41 0;
#X connect 67 0 45 0;
#X connect 68 0 50 0;
#X connect 69 0 14 0;
#X connect 70 0 23 0;
#X connect 71 0 32 0;
#X connect 72 0 5 0;
#X connect 73 0 67 0;
#X connect 74 0 66 0;
#X connect 75 0 68 0;
#X connect 76 0 65 0;
#X restore 51 -172 pd sort-all-by-metrical-weight-and-send-to-sigmoids
;
#X obj 400 -287 f;
#X obj 444 -286 + 1;
#X obj 400 -268 % 32;
#X obj 400 -340 t f f;
#X obj 460 -323 sel 1;
#X msg 460 -304 0;
#X obj 471 -231 random 100;
#X obj 400 -248 t f b;
#X obj 400 -190 tabread p-kick-index;
#X obj 400 -170 tabread p-kick-sigmoid;
#X obj 456 -153 >;
#X obj 639 -234 random 100;
#X obj 568 -251 t f b;
#X obj 624 -143 >;
#X obj 568 -193 tabread p-snare-index;
#X obj 568 -174 tabread p-snare-sigmoid;
#X obj 819 -234 random 100;
#X obj 748 -251 t f b;
#X obj 804 -143 >;
#X obj 748 -193 tabread p-ch-index;
#X obj 748 -174 tabread p-ch-sigmoid;
#X obj 1002 -234 random 100;
#X obj 931 -251 t f b;
#X obj 987 -143 >;
#X obj 931 -193 tabread p-oh-index;
#X obj 931 -174 tabread p-oh-sigmoid;
#N canvas 347 406 450 300 count 0;
#X obj 50 33 inlet;
#X obj 62 239 outlet;
#X obj 51 98 f;
#X obj 94 98 + 1;
#X obj 101 35 inlet;
#X msg 98 65 0;
#X text 52 19 bang;
#X text 101 20 reset;
#X msg 11 58 bang;
#X obj 51 155 + 1;
#X connect 0 0 8 0;
#X connect 2 0 3 0;
#X connect 2 0 9 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 2 1;
#X connect 8 0 2 0;
#X connect 9 0 1 0;
#X restore 293 -430 pd count;
#X obj 338 -449 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 313 -473 reset before;
#X text 314 -464 analysis;
#X obj 293 -411 s totalpatterns;
#X obj 471 -212 / 100;
#X obj 639 -215 / 100;
#X obj 819 -215 / 100;
#X obj 1002 -215 / 100;
#X floatatom 254 -413 5 0 0 0 - - -;
#N canvas 279 174 450 471 list_divide_f 0;
#X obj 65 39 inlet;
#X obj 301 38 inlet;
#X text 41 19 list with weights;
#X obj 127 116 list split 1;
#X obj 172 196 list;
#X obj 104 141 t b b f;
#X obj 303 283 list;
#X obj 90 366 list;
#X obj 89 386 outlet;
#X msg 410 92 bang;
#X obj 90 82 t b a b b;
#X obj 235 275 t a a;
#X obj 235 254 list prepend;
#X obj 87 61 list;
#X obj 236 72 t b a;
#X obj 235 187 /;
#X text 299 20 float;
#X obj 250 124 f;
#X connect 0 0 10 0;
#X connect 0 0 13 1;
#X connect 1 0 14 0;
#X connect 3 0 5 0;
#X connect 3 1 4 1;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 5 2 15 0;
#X connect 6 0 12 1;
#X connect 7 0 8 0;
#X connect 9 0 12 1;
#X connect 10 0 7 0;
#X connect 10 1 3 0;
#X connect 10 2 9 0;
#X connect 10 3 17 0;
#X connect 11 0 7 1;
#X connect 11 1 6 0;
#X connect 12 0 11 0;
#X connect 13 0 10 0;
#X connect 14 0 13 0;
#X connect 14 1 17 1;
#X connect 15 0 12 0;
#X connect 17 0 15 1;
#X restore 89 -246 pd list_divide_f;
#X obj 182 -263 r totalpatterns;
#X msg 338 -609 bang;
#X obj 89 -263 tabdump;
#X obj 89 -229 tabset;
#X msg 89 -331 kick;
#X obj 89 -314 t b a;
#X msg 200 -280 set \$1;
#X msg 123 -331 snare;
#X msg 166 -331 ch;
#X msg 194 -331 oh;
#X obj 49 -381 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 200 -297 symbol;
#X obj 49 -366 t b b b b b;
#X msg 49 -331 none;
#N canvas 174 76 450 300 samples 0;
#X obj 118 54 loadbang;
#X obj 108 234 soundfiler;
#X obj 185 97 table k;
#X obj 206 142 table s;
#X obj 216 193 table o;
#X obj 241 238 table c;
#X msg 118 77 read -resize ../files/samples/kick.wav k;
#X msg 139 122 read -resize ../files/samples/snare.wav s;
#X msg 149 173 read -resize ../files/samples/oh.wav o;
#X msg 174 218 read -resize ../files/samples/ch.wav c;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 9 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X restore 104 -128 pd samples;
#X obj 480 -124 tabplay~ k;
#X obj 481 -102 dac~;
#X obj 421 -129 sel 1;
#X obj 664 -114 dac~;
#X obj 576 -123 sel 1;
#X obj 663 -136 tabplay~ s;
#X obj 854 -112 dac~;
#X obj 766 -121 sel 1;
#X obj 853 -134 tabplay~ c;
#X obj 1102 -114 dac~;
#X obj 1014 -123 sel 1;
#X obj 1101 -136 tabplay~ o;
#X obj 400 -320 metro 100;
#X obj 289 -128 table none;
#X obj 50 -429 addlist2table kick;
#X obj 79 -448 addlist2table snare;
#X obj 108 -467 addlist2table ch;
#X obj 137 -486 addlist2table oh;
#X msg 50 -626 ../files/midi_drumloops/motown.mid;
#X obj 175 -128 path ../handy-abs;
#X connect 0 0 2 3;
#X connect 0 0 4 2;
#X connect 2 0 74 0;
#X connect 2 0 114 0;
#X connect 2 1 115 0;
#X connect 2 2 116 0;
#X connect 2 3 117 0;
#X connect 3 0 4 1;
#X connect 4 0 2 0;
#X connect 4 1 2 1;
#X connect 4 2 2 2;
#X connect 8 0 11 0;
#X connect 11 0 2 4;
#X connect 21 0 47 0;
#X connect 30 0 29 0;
#X connect 33 0 51 0;
#X connect 48 0 49 0;
#X connect 48 0 50 0;
#X connect 49 0 48 1;
#X connect 50 0 55 0;
#X connect 50 0 60 0;
#X connect 50 0 65 0;
#X connect 50 0 70 0;
#X connect 51 0 112 0;
#X connect 51 1 52 0;
#X connect 52 0 53 0;
#X connect 53 0 48 1;
#X connect 54 0 79 0;
#X connect 55 0 56 0;
#X connect 55 1 54 0;
#X connect 56 0 57 0;
#X connect 57 0 58 0;
#X connect 58 0 102 0;
#X connect 59 0 80 0;
#X connect 60 0 62 0;
#X connect 60 1 59 0;
#X connect 61 0 104 0;
#X connect 62 0 63 0;
#X connect 63 0 61 0;
#X connect 64 0 81 0;
#X connect 65 0 67 0;
#X connect 65 1 64 0;
#X connect 66 0 107 0;
#X connect 67 0 68 0;
#X connect 68 0 66 0;
#X connect 69 0 82 0;
#X connect 70 0 72 0;
#X connect 70 1 69 0;
#X connect 71 0 110 0;
#X connect 72 0 73 0;
#X connect 73 0 71 0;
#X connect 74 0 78 0;
#X connect 74 0 83 0;
#X connect 75 0 74 1;
#X connect 79 0 58 1;
#X connect 80 0 61 1;
#X connect 81 0 66 1;
#X connect 82 0 71 1;
#X connect 84 0 88 0;
#X connect 85 0 84 1;
#X connect 86 0 75 0;
#X connect 87 0 84 0;
#X connect 89 0 90 0;
#X connect 90 0 87 0;
#X connect 90 1 96 0;
#X connect 91 0 87 0;
#X connect 91 0 88 0;
#X connect 92 0 90 0;
#X connect 93 0 90 0;
#X connect 94 0 90 0;
#X connect 95 0 97 0;
#X connect 96 0 91 0;
#X connect 97 0 98 0;
#X connect 97 1 89 0;
#X connect 97 2 92 0;
#X connect 97 3 93 0;
#X connect 97 4 94 0;
#X connect 98 0 90 0;
#X connect 100 0 101 0;
#X connect 100 0 101 1;
#X connect 102 0 100 0;
#X connect 104 0 105 0;
#X connect 105 0 103 0;
#X connect 105 0 103 1;
#X connect 107 0 108 0;
#X connect 108 0 106 0;
#X connect 108 0 106 1;
#X connect 110 0 111 0;
#X connect 111 0 109 0;
#X connect 111 0 109 1;
#X connect 112 0 48 0;
#X connect 118 0 4 0;
#X connect 118 0 86 0;
