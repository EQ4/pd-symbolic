#N canvas 554 50 661 450 10;
#X obj 294 252 nbx 5 14 0 32 0 1 empty empty empty 0 -8 0 10 -262144
-1 -1 4 256;
#X obj 143 395 print kick;
#X obj 209 395 print snare;
#X obj 281 395 print ch;
#X text 243 235 Length of patterns in beats;
#N canvas 380 211 817 480 makepatterns 0;
#X obj 31 30 inlet;
#X obj 118 71 inlet;
#X obj 271 40 inlet;
#X obj 365 35 inlet;
#X text 345 18 length in beats;
#X text 251 21 bang to start;
#X text 28 12 bang to end;
#X obj 109 248 list-replace;
#X obj 109 209 t b f b;
#X msg 109 228 1;
#N canvas 97 440 450 300 makezerolist 0;
#X obj 152 77 until;
#X obj 155 121 f;
#X obj 188 121 + 1;
#X msg 204 75 0;
#X msg 155 153 0;
#X obj 157 200 list prepend;
#X obj 240 234 list;
#X msg 251 173 bang;
#X obj 139 43 t b f b b;
#X obj 129 235 list;
#X obj 156 22 inlet;
#X obj 134 273 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 5 1;
#X connect 6 0 9 1;
#X connect 7 0 5 1;
#X connect 8 0 9 0;
#X connect 8 1 0 0;
#X connect 8 2 3 0;
#X connect 8 3 7 0;
#X connect 9 0 11 0;
#X connect 10 0 8 0;
#X restore 279 110 pd makezerolist;
#X obj 365 57 * 4;
#X obj 279 89 f;
#X obj 188 247 list;
#X obj 85 323 list;
#X obj 226 246 list-replace;
#X obj 226 207 t b f b;
#X msg 226 226 1;
#X obj 305 245 list;
#X obj 205 333 list;
#X obj 31 284 t b b b b;
#X obj 338 245 list-replace;
#X obj 338 206 t b f b;
#X msg 338 225 1;
#X obj 317 332 list;
#X text 102 51 index note pairs;
#X obj 142 381 outlet;
#X obj 274 386 outlet;
#X obj 374 382 outlet;
#X obj 279 63 t b b;
#X msg 612 262 bang;
#X text 648 262 empty lists;
#X obj 419 245 list;
#X obj 85 354 route bang;
#X obj 217 356 route bang;
#X obj 317 357 route bang;
#X obj 493 101 inlet;
#X obj 493 124 unpack f f f f;
#X obj 441 329 list;
#X obj 498 379 outlet;
#X obj 441 354 route bang;
#X obj 462 242 list-replace;
#X obj 462 203 t b f b;
#X msg 462 222 1;
#X obj 543 242 list;
#X obj 172 133 t a a a a;
#X obj 109 167 route;
#X obj 225 182 route;
#X obj 338 187 route;
#X obj 462 184 route;
#X connect 0 0 20 0;
#X connect 1 0 45 0;
#X connect 2 0 29 0;
#X connect 3 0 11 0;
#X connect 7 0 13 0;
#X connect 7 0 14 1;
#X connect 8 0 9 0;
#X connect 8 1 7 1;
#X connect 9 0 7 0;
#X connect 10 0 7 2;
#X connect 10 0 15 2;
#X connect 10 0 21 2;
#X connect 10 0 41 2;
#X connect 11 0 12 1;
#X connect 12 0 10 0;
#X connect 13 0 7 2;
#X connect 14 0 33 0;
#X connect 15 0 18 0;
#X connect 15 0 19 1;
#X connect 16 0 17 0;
#X connect 16 1 15 1;
#X connect 17 0 15 0;
#X connect 18 0 15 2;
#X connect 19 0 34 0;
#X connect 20 0 14 0;
#X connect 20 1 19 0;
#X connect 20 2 24 0;
#X connect 20 3 38 0;
#X connect 21 0 24 1;
#X connect 21 0 32 0;
#X connect 22 0 23 0;
#X connect 22 1 21 1;
#X connect 23 0 21 0;
#X connect 24 0 35 0;
#X connect 29 0 12 0;
#X connect 29 1 30 0;
#X connect 30 0 24 1;
#X connect 30 0 19 1;
#X connect 30 0 14 1;
#X connect 30 0 38 1;
#X connect 32 0 21 2;
#X connect 33 1 26 0;
#X connect 34 1 27 0;
#X connect 35 1 28 0;
#X connect 36 0 37 0;
#X connect 37 0 46 1;
#X connect 37 1 47 1;
#X connect 37 2 48 1;
#X connect 37 3 49 1;
#X connect 38 0 40 0;
#X connect 40 1 39 0;
#X connect 41 0 44 0;
#X connect 41 0 38 1;
#X connect 42 0 43 0;
#X connect 42 1 41 1;
#X connect 43 0 41 0;
#X connect 44 0 41 2;
#X connect 45 0 46 0;
#X connect 45 1 47 0;
#X connect 45 2 48 0;
#X connect 45 3 49 0;
#X connect 46 0 8 0;
#X connect 47 0 16 0;
#X connect 48 0 22 0;
#X connect 49 0 42 0;
#X restore 143 333 pd makepatterns;
#X obj 152 223 nbx 5 14 0 16 0 1 empty empty empty 0 -8 0 10 -262144
-1 -1 10 256;
#N canvas 474 35 761 601 midiextract 0;
#X msg 78 82 read \$1;
#X obj 204 174 route bang format tracks ticks_per_quarternote;
#X obj -4 94 loadbang;
#X obj 78 63 symbol;
#X obj -13 208 route 144 153;
#X text 74 211 <- MIDI channel 1 or 10;
#X text 90 201 only onsets;
#X obj 70 357 list split 1;
#X text 152 355 <- only notes;
#X obj 66 124 until;
#X obj 78 42 inlet;
#X obj 165 448 outlet;
#X obj 165 401 pack f f;
#X msg 59 490 bang;
#X obj 367 224 *;
#X obj 585 207 inlet;
#X floatatom 415 200 5 0 0 0 - - -;
#X text 448 197 <- ticks per beat;
#X text 559 185 beats to extract;
#X obj 367 202 t f f;
#X obj 352 356 /;
#X text 377 355 <- convert tiks to sixteenth note;
#X obj 392 318 / 4;
#X obj 351 375 int;
#X text 378 376 <- always queantize down;
#X obj 585 118 outlet;
#X text 488 101 bang at start for convenience;
#X obj 78 101 t b a b;
#X obj 59 529 outlet;
#X text 9 504 bang at END for convenience;
#X obj 327 248 %;
#X obj 327 267 sel 0;
#X msg 204 120 bang;
#X obj 327 287 t b b;
#X obj 352 331 %;
#X obj 244 452 spigot;
#X obj 238 219 t f f f;
#X obj 81 284 == 1;
#X obj 156 286 == 10;
#X obj 156 264 inlet;
#X obj 48 314 spigot;
#X obj 121 309 spigot;
#X text 121 247 select midi channel;
#X msg -4 114 verbose 0;
#X obj 105 154 mrpeach/midifile;
#X connect 0 0 27 0;
#X connect 1 0 32 0;
#X connect 1 0 35 0;
#X connect 1 3 16 0;
#X connect 1 3 19 0;
#X connect 2 0 43 0;
#X connect 3 0 0 0;
#X connect 4 0 40 0;
#X connect 4 1 41 0;
#X connect 7 0 12 0;
#X connect 9 0 44 0;
#X connect 10 0 3 0;
#X connect 12 0 11 0;
#X connect 13 0 28 0;
#X connect 14 0 30 1;
#X connect 14 0 34 1;
#X connect 15 0 14 1;
#X connect 19 0 14 0;
#X connect 19 1 22 0;
#X connect 20 0 23 0;
#X connect 22 0 20 1;
#X connect 23 0 12 1;
#X connect 27 0 9 0;
#X connect 27 1 44 0;
#X connect 27 2 25 0;
#X connect 30 0 31 0;
#X connect 31 0 33 0;
#X connect 32 0 9 1;
#X connect 33 0 25 0;
#X connect 33 1 35 0;
#X connect 34 0 20 0;
#X connect 35 0 13 0;
#X connect 36 0 34 0;
#X connect 36 1 30 0;
#X connect 36 2 35 1;
#X connect 37 0 40 1;
#X connect 38 0 41 1;
#X connect 39 0 37 0;
#X connect 39 0 38 0;
#X connect 40 0 7 0;
#X connect 41 0 7 0;
#X connect 43 0 44 0;
#X connect 44 0 4 0;
#X connect 44 1 36 0;
#X connect 44 2 1 0;
#X restore 143 282 pd midiextract;
#X text 147 193 select midi channel;
#X text 144 205 (1 for this example);
#X obj 337 396 print oh;
#X text 305 277 midi note number of kick \, snare \, closed hihat \,
open hihat;
#X text 12 144 input a filename to analyze;
#X obj 350 298 loadbang;
#X text 79 31 This patch xtracts onset patterns of a certain length
form a MIDI drum file. To extract the patterns you must know a) the
MIDI note number of the kick \, snare \, closed hihat and open hihat.
b) the midi channel in which the drums are sequenced.;
#X text 78 99 The fist beat of all the drum patterns to analyze must
start in time=0. That is \, there can be no silence before the sequence
starts.;
#X msg 350 316 35 38 42 46;
#X msg 30 162 ../files/midi_drumloops/motown.mid;
#X connect 0 0 5 3;
#X connect 0 0 7 2;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X connect 5 2 3 0;
#X connect 5 3 10 0;
#X connect 6 0 7 1;
#X connect 7 0 5 0;
#X connect 7 1 5 1;
#X connect 7 2 5 2;
#X connect 13 0 16 0;
#X connect 16 0 5 4;
#X connect 17 0 7 0;
