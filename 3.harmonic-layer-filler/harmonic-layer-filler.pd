#N canvas 1009 428 654 474 10;
#X declare -path ../abs;
#X declare -lib jasch_lib;
#X obj -354 -91 cnv 15 250 70 empty empty empty 20 12 0 14 -233017
-66577 0;
#X obj -342 -50 hsl 225 15 0 200 0 0 empty events_per_bar empty -2
-8 0 10 -262144 -1 -1 112 1;
#X text -348 -68 density;
#X text -291 -53 events/bar keeping pattern identity;
#X obj -354 109 cnv 15 250 150 empty empty empty 20 12 0 14 -233017
-66577 0;
#X text -319 191 comment;
#X obj -342 150 hsl 225 15 0 200 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 132 register;
#X text -339 148 closed <<<<<< >>>>> open (4 octaves);
#X text -347 214 allow inversions;
#X obj -345 232 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj -342 191 hsl 225 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 173 activity;
#X obj -354 109 cnv 15 250 25 empty empty empty 20 12 0 14 -162280
-66577 0;
#X obj -354 -91 cnv 15 250 25 empty empty empty 20 12 0 14 -162280
-66577 0;
#X text -348 -88 DENSITY (agnostic density transformer);
#X text -348 112 VOICING;
#X obj -354 -11 cnv 15 250 110 empty empty empty 20 12 0 14 -233017
-66577 0;
#X obj -354 -11 cnv 15 250 25 empty empty empty 20 12 0 14 -162280
-66577 0;
#X text -298 -8 CHORD STRUCTURE;
#X obj -342 30 hsl 225 15 0 200 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 12 color;
#X obj -342 71 hsl 225 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 53 substitution;
#X text -329 69 no-subs <> diatonic <> chromatic;
#X text -341 28 pow <> triad <> tension <> alteration;
#X text -339 189 no-change <<<<>>>> change-each-event;
#X text -354 268 https://github.com/angelfaraldo/pd-symbolic;
#X text -354 283 angel.faraldo@upf.edu ----- Barcelona \, 2015;
#X obj -280 -152 netreceive 3006 0 old;
#X obj -354 -152 path ../abs;
#X obj -354 -132 import jasch_lib;
#N canvas 785 195 633 884 gem_visualization 0;
#X text 96 228 convert pdf to jpg (ImageMagick 6.8.9-9);
#X obj 12 277 shell;
#X obj 29 115 textfile;
#X text 86 180 compile score with lilypond;
#X text 73 137 insert the music notation into the lilypond code;
#X obj 12 50 t b b a b;
#X obj 63 71 s reset-score;
#X obj 43 427 gemhead;
#X obj 43 563 pix_texture;
#X obj 43 499 pix_image;
#X obj 43 519 color 0 0.5 0;
#X msg 79 541 env 2 \, quality 0;
#X obj 52 475 t a b;
#X msg 203 537 0 \, destroy;
#X obj 43 604 rectangle 11 3;
#X obj 43 583 translate -1.2 -0.3 1 0;
#X msg 196 515 reset \, dimen 500 200 \, title harmonic-layer-filler
\, create \, 1;
#X obj 52 322 f 0;
#X obj 82 322 + 1;
#X obj 39 298 t b;
#X obj 67 279 r reset-score;
#X msg 67 301 0;
#X obj 20 182 r compile;
#X obj 32 229 r convert;
#X obj 86 384 s compile;
#X obj 69 406 s convert;
#X obj 52 363 sel 2 1 0;
#X obj 196 492 once;
#X obj 12 137 delay 100;
#X obj 52 343 pipe 50;
#X obj 196 560 gemwin 1;
#X msg 29 92 write /home/angel/.lily_music.txt cr;
#X msg 12 160 python .lilypondize.py;
#X msg 20 204 lilypond .lily_code.ly;
#X msg 32 251 convert -density 600 .lily_code.pdf .lily_code.jpg;
#X msg 52 452 open /home/angel/.lily_code.jpg;
#X msg 59 782 font ./WorkSans-Regular.ttf \, alias 1;
#X obj 43 853 text2d C:maj;
#X obj 119 760 text2d A:min;
#X obj 119 668 separator;
#X obj 59 734 loadbang;
#X obj 128 714 r chord2;
#X obj 128 737 tosymbol;
#X obj 251 686 s chord1;
#X obj 309 686 s chord2;
#X obj 68 830 tosymbol;
#X obj 68 806 r chord1;
#X obj 309 624 loadbang;
#X msg 251 664 C:maj;
#X obj 43 625 translateXYZ -6 2 0;
#X obj 119 691 translateXYZ 8 0 0;
#X msg 309 664 Am7;
#X obj 12 8 r rhythmic_seq;
#X obj 12 29 prepend set;
#X connect 1 1 19 0;
#X connect 5 0 28 0;
#X connect 5 1 31 0;
#X connect 5 2 2 0;
#X connect 5 3 6 0;
#X connect 7 0 9 0;
#X connect 8 0 15 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X connect 11 0 8 0;
#X connect 12 0 9 0;
#X connect 12 1 11 0;
#X connect 12 1 27 0;
#X connect 13 0 30 0;
#X connect 14 0 49 0;
#X connect 15 0 14 0;
#X connect 16 0 30 0;
#X connect 17 0 18 0;
#X connect 17 0 29 0;
#X connect 18 0 17 1;
#X connect 19 0 17 0;
#X connect 20 0 21 0;
#X connect 21 0 17 1;
#X connect 22 0 33 0;
#X connect 23 0 34 0;
#X connect 26 0 35 0;
#X connect 26 1 25 0;
#X connect 26 2 24 0;
#X connect 27 0 16 0;
#X connect 28 0 32 0;
#X connect 29 0 26 0;
#X connect 31 0 2 0;
#X connect 32 0 1 0;
#X connect 33 0 1 0;
#X connect 34 0 1 0;
#X connect 35 0 12 0;
#X connect 36 0 37 0;
#X connect 36 0 38 0;
#X connect 39 0 50 0;
#X connect 40 0 36 0;
#X connect 41 0 42 0;
#X connect 42 0 38 0;
#X connect 45 0 37 0;
#X connect 46 0 45 0;
#X connect 47 0 48 0;
#X connect 47 0 51 0;
#X connect 48 0 43 0;
#X connect 49 0 37 0;
#X connect 49 0 39 0;
#X connect 50 0 38 0;
#X connect 51 0 44 0;
#X connect 52 0 53 0;
#X connect 53 0 5 0;
#X restore -354 -112 pd gem_visualization;
#N canvas 34 193 1169 785 midi_analysis 0;
#X obj 78 374 r reset-analysis;
#X obj -219 224 noteout;
#X msg -276 -39 flush;
#X obj -59 242 midi_chord_estimator;
#X obj -59 218 make_chord;
#X obj -206 179 / 4;
#X obj -206 134 unpack 0 0 0 0 0;
#X obj 28 127 unpack 0 0 0 0;
#X obj -137 179 s ticks/4;
#X obj 18 173 /;
#X obj 33 151 r ticks/4;
#X obj 96 151 != 0;
#X obj 18 194 * 4;
#X obj 18 215 + 1;
#X obj -59 110 t l l;
#X obj -276 -17 t a b;
#X obj -205 0 s reset-analysis;
#X obj 26 318 t l;
#X obj -59 294 list prepend;
#X obj -35 262 r reset-analysis;
#X obj -276 -103 openpanel;
#X msg -276 -83 read \$1;
#X msg -32 10 loop \$1;
#X obj -32 -11 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj -92 -11 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg -92 10 play \$1;
#X obj -219 27 midi_player;
#X obj -35 66 s end-analysis;
#X obj 75 304 route;
#X obj 75 281 t l f;
#X obj 75 239 pack;
#X obj 558 364 s rhythmic_seq;
#X obj -59 328 pop_first;
#X obj 75 260 change_pack;
#X obj 75 330 tabwrite fill-pattern;
#X obj -59 88 sort-midi;
#X obj 526 -3 tabread fill-pattern;
#X obj 483 -94 t f b;
#X obj 483 -72 until;
#X obj 507 -48 f 1;
#X obj 537 -48 + 1;
#X msg 522 -72 1;
#X obj 532 44 pack;
#X obj 78 456 table fill-pattern 33;
#X obj 526 18 moses 0;
#X msg 532 64 \$2 \$1;
#X obj 483 -137 r end-analysis;
#X obj -8 360 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj -59 354 s chord;
#X obj 532 85 unpack;
#X obj 576 114 sel 0 1;
#X msg 576 138 r;
#X msg 606 138 c;
#X obj 532 107 t f f;
#X obj 540 136 -;
#X obj 540 159 moses 0;
#X msg 483 -115 33;
#X obj 558 341 list2symbol;
#N canvas 1059 196 525 795 durations2lilypond 0;
#X obj 25 14 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 25 -12 inlet;
#X obj 467 816 outlet;
#X msg 108 587 symbol;
#X msg 120 563 symbol;
#X msg 132 540 symbol;
#X msg 150 494 symbol;
#X msg 160 470 symbol;
#X msg 194 401 symbol;
#X msg 205 377 symbol;
#X msg 215 354 symbol;
#X msg 226 330 symbol;
#X msg 236 306 symbol;
#X msg 247 282 symbol;
#X msg 258 259 symbol;
#X msg 268 235 symbol;
#X msg 279 213 symbol;
#X msg 289 189 symbol;
#X msg 300 166 symbol;
#X msg 311 142 symbol;
#X msg 321 114 symbol;
#X msg 332 93 symbol;
#X msg 342 68 symbol;
#X msg 25 775 _16;
#X msg 35 751 _8;
#X msg 46 728 _8.;
#X msg 56 704 _4;
#X msg 67 682;
#X msg 77 658;
#X msg 88 635;
#X msg 99 611 _2;
#X msg 141 516 _2.;
#X msg 173 447 _2..;
#X msg 183 423 _1;
#X msg 353 48 _c1~ c1;
#X connect 0 0 23 0;
#X connect 0 1 24 0;
#X connect 0 2 25 0;
#X connect 0 3 26 0;
#X connect 0 4 27 0;
#X connect 0 5 28 0;
#X connect 0 6 29 0;
#X connect 0 7 30 0;
#X connect 0 8 3 0;
#X connect 0 9 4 0;
#X connect 0 10 5 0;
#X connect 0 11 31 0;
#X connect 0 12 6 0;
#X connect 0 13 7 0;
#X connect 0 14 32 0;
#X connect 0 15 33 0;
#X connect 0 16 8 0;
#X connect 0 17 9 0;
#X connect 0 18 10 0;
#X connect 0 19 11 0;
#X connect 0 20 12 0;
#X connect 0 21 13 0;
#X connect 0 22 14 0;
#X connect 0 23 15 0;
#X connect 0 24 16 0;
#X connect 0 25 17 0;
#X connect 0 26 18 0;
#X connect 0 27 19 0;
#X connect 0 28 20 0;
#X connect 0 29 21 0;
#X connect 0 30 22 0;
#X connect 0 31 34 0;
#X connect 1 0 0 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 2 0;
#X connect 12 0 2 0;
#X connect 13 0 2 0;
#X connect 14 0 2 0;
#X connect 15 0 2 0;
#X connect 16 0 2 0;
#X connect 17 0 2 0;
#X connect 18 0 2 0;
#X connect 19 0 2 0;
#X connect 20 0 2 0;
#X connect 21 0 2 0;
#X connect 22 0 2 0;
#X connect 23 0 2 0;
#X connect 24 0 2 0;
#X connect 25 0 2 0;
#X connect 26 0 2 0;
#X connect 27 0 2 0;
#X connect 28 0 2 0;
#X connect 29 0 2 0;
#X connect 30 0 2 0;
#X connect 31 0 2 0;
#X connect 32 0 2 0;
#X connect 33 0 2 0;
#X connect 34 0 2 0;
#X restore 579 182 pd durations2lilypond;
#X obj 579 250 prepend c;
#X obj 579 228 strtok _;
#X obj 579 205 tosymbol;
#X obj 579 273 list2symbol;
#X msg 642 253 symbol;
#X obj 642 233 loadbang;
#X obj 579 296 list prepend;
#X obj 662 297 t l;
#X obj 659 276 r reset-analysis;
#X obj 558 319 list;
#X obj 531 290 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 507 -25 t f f f;
#X obj 507 182 sel 33;
#X obj 506 374 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg -276 -137 symbol ./Git/pd-symbolic/testfiles/midi-chord-loops/2b-homophonic
;
#X obj -276 -158 r load_midi_file;
#X obj -35 44 t b b;
#X obj -113 155 s tempo;
#X obj -206 157 uanz;
#X obj -156 72 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -276 -62 t b a;
#X obj -206 201 s bars;
#X obj 78 476 table fill-onsets 33;
#X obj 85 353 tabwrite fill-onsets;
#X obj 209 329 - 1;
#X msg 78 396 \; fill-pattern 0 0 0 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 \; fill-onsets
const 0 \;;
#X connect 0 0 84 0;
#X connect 2 0 15 0;
#X connect 3 0 18 0;
#X connect 4 0 3 0;
#X connect 5 0 80 0;
#X connect 6 0 77 0;
#X connect 6 3 8 0;
#X connect 6 4 76 0;
#X connect 7 0 9 0;
#X connect 7 2 11 0;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 11 0 30 1;
#X connect 12 0 13 0;
#X connect 13 0 30 0;
#X connect 14 0 4 0;
#X connect 14 1 7 0;
#X connect 15 0 26 0;
#X connect 15 1 16 0;
#X connect 15 1 77 1;
#X connect 17 0 18 1;
#X connect 18 0 17 0;
#X connect 18 0 32 0;
#X connect 19 0 18 1;
#X connect 20 0 21 0;
#X connect 21 0 79 0;
#X connect 22 0 26 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 1 0;
#X connect 26 1 35 0;
#X connect 26 2 6 0;
#X connect 26 3 78 0;
#X connect 26 3 75 0;
#X connect 28 0 34 0;
#X connect 28 0 82 0;
#X connect 29 0 28 0;
#X connect 29 1 28 1;
#X connect 29 1 34 1;
#X connect 29 1 83 0;
#X connect 30 0 33 0;
#X connect 32 0 48 0;
#X connect 32 1 47 0;
#X connect 33 0 29 0;
#X connect 35 0 14 0;
#X connect 36 0 44 0;
#X connect 37 0 38 0;
#X connect 37 1 41 0;
#X connect 38 0 39 0;
#X connect 39 0 40 0;
#X connect 39 0 70 0;
#X connect 40 0 39 1;
#X connect 41 0 39 1;
#X connect 42 0 45 0;
#X connect 44 1 42 0;
#X connect 45 0 49 0;
#X connect 46 0 56 0;
#X connect 49 0 53 0;
#X connect 49 1 50 0;
#X connect 50 0 51 0;
#X connect 50 1 52 0;
#X connect 53 0 54 1;
#X connect 53 1 54 0;
#X connect 54 0 55 0;
#X connect 55 1 58 0;
#X connect 56 0 37 0;
#X connect 57 0 31 0;
#X connect 58 0 61 0;
#X connect 59 0 62 0;
#X connect 60 0 59 0;
#X connect 61 0 60 0;
#X connect 62 0 65 0;
#X connect 63 0 62 1;
#X connect 64 0 63 0;
#X connect 65 0 66 0;
#X connect 65 0 68 1;
#X connect 66 0 65 1;
#X connect 67 0 65 1;
#X connect 68 0 57 0;
#X connect 69 0 68 0;
#X connect 70 0 71 0;
#X connect 70 1 36 0;
#X connect 70 2 42 1;
#X connect 71 0 68 0;
#X connect 71 0 72 0;
#X connect 73 0 20 0;
#X connect 74 0 73 0;
#X connect 75 0 27 0;
#X connect 75 1 35 1;
#X connect 77 0 5 0;
#X connect 79 0 2 0;
#X connect 79 1 26 0;
#X connect 83 0 82 1;
#X restore -250 -132 pd midi_analysis;
#X obj 46 -55 r tempo;
#X obj 63 15 r bars;
#X floatatom 59 -14 5 0 0 0 - - -;
#X floatatom 78 46 5 0 0 0 - - -;
#X floatatom -5 -103 5 0 0 0 - - -;
#X obj -15 160 r allow_inversion;
#X floatatom -5 198 5 0 0 0 - - -;
#X obj 163 17 r substitution;
#X floatatom 182 60 5 0 0 0 - - -;
#X floatatom 184 -22 5 0 0 0 - - -;
#X obj 165 -65 r activity;
#X obj -34 87 r color;
#X floatatom -55 118 5 0 0 0 - - -;
#X floatatom 156 142 5 0 0 0 - - -;
#X obj 177 111 r register;
#N canvas 206 223 337 278 adt 0;
#X obj 13 85 r density;
#X obj 13 160 list append;
#X obj 13 111 populate_rhythm;
#X obj 76 135 populate_rhythm;
#X obj 100 38 tabdump fill-onsets;
#X obj 100 15 r end-analysis;
#X obj 100 87 list split 16;
#X obj 108 60 print master-onsets;
#X obj 23 184 print slave-onsets;
#X obj 13 205 s slave-onsets;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 1 0 9 0;
#X connect 2 0 1 0;
#X connect 3 0 1 1;
#X connect 4 0 6 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 2 1;
#X connect 6 1 3 1;
#X restore 190 -131 pd adt;
#X obj -3 -142 r density;
#X obj 69 -110 s density;
#X connect 34 0 36 0;
#X connect 35 0 37 0;
#X connect 39 0 40 0;
#X connect 41 0 42 0;
#X connect 44 0 43 0;
#X connect 45 0 46 0;
#X connect 48 0 47 0;
#X connect 50 0 38 0;
