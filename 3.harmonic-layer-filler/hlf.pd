#N canvas 1318 89 293 367 10;
#X declare -path ../abs;
#X declare -lib jasch_lib;
#X text -40 310 https://github.com/angelfaraldo/pd-symbolic;
#X text -40 325 angel.faraldo@upf.edu ----- Barcelona \, 2015;
#X obj 34 1 netreceive 3006 0 old;
#X obj -40 1 path ../abs;
#X obj -40 21 import jasch_lib;
#X obj -35 126 r tempo;
#X obj 95 206 r bars;
#X floatatom -35 147 5 0 0 0 - - -;
#X floatatom 103 249 5 0 0 0 - - -;
#X floatatom -34 236 5 0 0 0 - - -;
#X obj 49 184 r allow_inversion;
#X floatatom 49 207 5 0 0 0 - - -;
#X obj -37 73 r substitution;
#X floatatom -38 100 5 0 0 0 - - -;
#X floatatom 39 151 5 0 0 0 - - -;
#X obj 20 108 r activity;
#X obj 100 74 r color;
#X floatatom 100 105 5 0 0 0 - - -;
#X floatatom -36 288 5 0 0 0 - - -;
#X obj -32 264 r register;
#N canvas 782 507 324 195 adt 1;
#X obj 13 55 r density;
#X obj 13 130 list append;
#X obj 13 81 populate_rhythm;
#X obj 76 105 populate_rhythm;
#X obj 100 34 tabdump fill-onsets;
#X obj 100 11 r end-analysis;
#X obj 100 57 list split 16;
#X obj 13 155 s slave-onsets;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 1 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 2 1;
#X connect 6 1 3 1;
#X restore 88 41 pd adt;
#X obj -34 210 r density;
#X obj -33 188 s density;
#X floatatom -33 168 5 0 0 0 - - -;
#N canvas 1175 261 625 650 gem_visualization 0;
#X msg 323 64 0 \, destroy;
#X floatatom 361 136 5 0 0 0 - - -;
#X msg 316 42 reset \, dimen 800 150 \, title Loop \, create \, 1;
#N canvas 281 99 481 734 grid 0;
#X obj 14 79 vis/grid-beat-strong;
#X obj 14 143 vis/grid-beat-soft;
#X obj 14 163 vis/grid-beat-soft;
#X obj 14 183 vis/grid-beat-soft;
#X obj 14 307 vis/grid-beat-soft;
#X obj 14 327 vis/grid-beat-soft;
#X obj 14 347 vis/grid-beat-soft;
#X obj 14 473 vis/grid-beat-soft;
#X obj 14 493 vis/grid-beat-soft;
#X obj 14 513 vis/grid-beat-soft;
#X obj 14 637 vis/grid-beat-soft;
#X obj 14 657 vis/grid-beat-soft;
#X obj 14 677 vis/grid-beat-soft;
#X obj 14 14 inlet;
#X obj 14 35 color 1 0 0 0.4;
#X obj 14 246 vis/grid-beat-strong;
#X obj 14 412 vis/grid-beat-strong;
#X obj 14 576 vis/grid-beat-strong;
#X obj 14 100 color 1 1 1 0.4;
#X obj 14 205 color 0 1 0 0.4;
#X obj 14 267 color 1 1 1 0.4;
#X obj 14 371 color 0 1 0 0.4;
#X obj 14 433 color 1 1 1 0.4;
#X obj 14 535 color 0 1 0 0.4;
#X obj 14 597 color 1 1 1 0.4;
#X obj 14 226 alpha 1;
#X obj 14 286 alpha 1;
#X obj 14 391 alpha 1;
#X obj 14 453 alpha 1;
#X obj 14 556 alpha 1;
#X obj 14 617 alpha 1;
#X obj 14 122 alpha 1;
#X obj 14 57 alpha 1;
#X obj 164 79 vis/grid-beat-strong;
#X obj 164 143 vis/grid-beat-soft;
#X obj 164 163 vis/grid-beat-soft;
#X obj 164 183 vis/grid-beat-soft;
#X obj 164 307 vis/grid-beat-soft;
#X obj 164 327 vis/grid-beat-soft;
#X obj 164 347 vis/grid-beat-soft;
#X obj 164 473 vis/grid-beat-soft;
#X obj 164 493 vis/grid-beat-soft;
#X obj 164 513 vis/grid-beat-soft;
#X obj 164 637 vis/grid-beat-soft;
#X obj 164 657 vis/grid-beat-soft;
#X obj 164 677 vis/grid-beat-soft;
#X obj 164 35 color 1 0 0 0.4;
#X obj 164 246 vis/grid-beat-strong;
#X obj 164 412 vis/grid-beat-strong;
#X obj 164 576 vis/grid-beat-strong;
#X obj 164 100 color 1 1 1 0.4;
#X obj 164 205 color 0 1 0 0.4;
#X obj 164 267 color 1 1 1 0.4;
#X obj 164 371 color 0 1 0 0.4;
#X obj 164 433 color 1 1 1 0.4;
#X obj 164 535 color 0 1 0 0.4;
#X obj 164 597 color 1 1 1 0.4;
#X obj 164 226 alpha 1;
#X obj 164 286 alpha 1;
#X obj 164 391 alpha 1;
#X obj 164 453 alpha 1;
#X obj 164 556 alpha 1;
#X obj 164 617 alpha 1;
#X obj 164 122 alpha 1;
#X obj 164 57 alpha 1;
#X obj 314 79 vis/grid-beat-strong;
#X obj 314 35 color 1 0 0 0.4;
#X obj 314 57 alpha 1;
#X connect 0 0 18 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 19 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 21 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 23 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 46 0;
#X connect 13 0 14 0;
#X connect 14 0 32 0;
#X connect 15 0 20 0;
#X connect 16 0 22 0;
#X connect 17 0 24 0;
#X connect 18 0 31 0;
#X connect 19 0 25 0;
#X connect 20 0 26 0;
#X connect 21 0 27 0;
#X connect 22 0 28 0;
#X connect 23 0 29 0;
#X connect 24 0 30 0;
#X connect 25 0 15 0;
#X connect 26 0 4 0;
#X connect 27 0 16 0;
#X connect 28 0 7 0;
#X connect 29 0 17 0;
#X connect 30 0 10 0;
#X connect 31 0 1 0;
#X connect 32 0 0 0;
#X connect 33 0 50 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 36 0 51 0;
#X connect 37 0 38 0;
#X connect 38 0 39 0;
#X connect 39 0 53 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 55 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 45 0 66 0;
#X connect 46 0 64 0;
#X connect 47 0 52 0;
#X connect 48 0 54 0;
#X connect 49 0 56 0;
#X connect 50 0 63 0;
#X connect 51 0 57 0;
#X connect 52 0 58 0;
#X connect 53 0 59 0;
#X connect 54 0 60 0;
#X connect 55 0 61 0;
#X connect 56 0 62 0;
#X connect 57 0 47 0;
#X connect 58 0 37 0;
#X connect 59 0 48 0;
#X connect 60 0 40 0;
#X connect 61 0 49 0;
#X connect 62 0 43 0;
#X connect 63 0 34 0;
#X connect 64 0 33 0;
#X connect 66 0 67 0;
#X connect 67 0 65 0;
#X restore 318 178 pd grid;
#X obj 318 156 translateXYZ -19.5 0 0;
#X obj 316 87 gemwin 20;
#X obj 318 114 gemhead 50;
#X obj 316 -2 loadbang;
#X obj 316 19 delay 500;
#N canvas 519 185 302 504 current-step 0;
#X obj 61 281 * 0.5;
#X obj 36 328 translateXYZ 0.75 0 0;
#X obj 79 166 * 1.2;
#X obj 61 303 * 1.2;
#X obj 79 190 - 19.5;
#X obj 36 211 translateXYZ -19.5 0 0;
#X obj 36 400 rectangle 0.75 3;
#X obj 61 237 loadbang;
#X obj 66 39 r current_step;
#X obj 56 84 mod 4;
#X msg 61 259 4;
#X obj 56 105 sel 0;
#X obj 66 60 t f f;
#X obj 99 142 f;
#X obj 36 17 gemhead 51;
#X obj 36 376 alpha 0;
#X obj 36 349 color 0.2 0.2 0.2 0.8;
#X connect 0 0 3 0;
#X connect 1 0 16 0;
#X connect 2 0 4 0;
#X connect 3 0 1 1;
#X connect 3 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 1 0;
#X connect 7 0 10 0;
#X connect 8 0 12 0;
#X connect 9 0 11 0;
#X connect 10 0 0 0;
#X connect 11 0 13 0;
#X connect 12 0 9 0;
#X connect 12 1 13 1;
#X connect 13 0 2 0;
#X connect 14 0 5 0;
#X connect 15 0 6 0;
#X connect 16 0 15 0;
#X restore 318 200 pd current-step;
#X obj 317 222 vis/master-chord-event 0;
#X obj 317 362 vis/master-chord-event 7;
#X obj 317 242 vis/master-chord-event 1;
#X obj 317 262 vis/master-chord-event 2;
#X obj 317 282 vis/master-chord-event 3;
#X obj 317 302 vis/master-chord-event 4;
#X obj 317 322 vis/master-chord-event 5;
#X obj 317 342 vis/master-chord-event 6;
#X obj -26 -3 r reset-analysis;
#X obj 160 618 vis/slave-chord-event 31;
#X msg -26 22 \; master-chord-fill-0 C 100 1 \; master-chord-fill-1
C 100 1 \; master-chord-fill-2 C 100 1 \; master-chord-fill-3 C 100
1 \; master-chord-fill-4 C 100 1 \; master-chord-fill-5 C 100 1 \;
master-chord-fill-6 C 100 1 \; master-chord-fill-7 C 100 1 \; slave-chord-fill-0
C 100 1 \; slave-chord-fill-1 C 100 1 \; slave-chord-fill-2 C 100 1
\; slave-chord-fill-3 C 100 1 \; slave-chord-fill-4 C 100 1 \; slave-chord-fill-5
C 100 1 \; slave-chord-fill-6 C 100 1 \; slave-chord-fill-7 C 100 1
\; slave-chord-fill-8 C 100 1 \; slave-chord-fill-9 C 100 1 \; slave-chord-fill-10
C 100 1 \; slave-chord-fill-11 C 100 1 \; slave-chord-fill-12 C 100
1 \; slave-chord-fill-13 C 100 1 \; slave-chord-fill-14 C 100 1 \;
slave-chord-fill-15 C 100 1 \; slave-chord-fill-16 C 100 1 \; slave-chord-fill-17
C 100 1 \; slave-chord-fill-18 C 100 1 \; slave-chord-fill-19 C 100
1 \; slave-chord-fill-20 C 100 1 \; slave-chord-fill-21 C 100 1 \;
slave-chord-fill-22 C 100 1 \; slave-chord-fill-23 C 100 1 \; slave-chord-fill-24
C 100 1 \; slave-chord-fill-25 C 100 1 \; slave-chord-fill-26 C 100
1 \; slave-chord-fill-27 C 100 1 \; slave-chord-fill-28 C 100 1 \;
slave-chord-fill-29 C 100 1 \; slave-chord-fill-30 C 100 1 \; slave-chord-fill-31
C 100 1 \;;
#X obj 160 418 vis/slave-chord-event 21;
#X obj 160 438 vis/slave-chord-event 22;
#X obj 160 358 vis/slave-chord-event 18;
#X obj 160 378 vis/slave-chord-event 19;
#X obj 160 398 vis/slave-chord-event 20;
#X obj 160 178 vis/slave-chord-event 9;
#X obj 160 198 vis/slave-chord-event 10;
#X obj 160 218 vis/slave-chord-event 11;
#X obj 160 238 vis/slave-chord-event 12;
#X obj 160 258 vis/slave-chord-event 13;
#X obj 160 278 vis/slave-chord-event 14;
#X obj 160 298 vis/slave-chord-event 15;
#X obj 160 318 vis/slave-chord-event 16;
#X obj 160 338 vis/slave-chord-event 17;
#X obj 160 98 vis/slave-chord-event 5;
#X obj 160 78 vis/slave-chord-event 4;
#X obj 160 118 vis/slave-chord-event 6;
#X obj 160 138 vis/slave-chord-event 7;
#X obj 160 -2 vis/slave-chord-event 0;
#X obj 160 38 vis/slave-chord-event 2;
#X obj 160 58 vis/slave-chord-event 3;
#X obj 160 18 vis/slave-chord-event 1;
#X obj 160 158 vis/slave-chord-event 8;
#X obj 160 458 vis/slave-chord-event 23;
#X obj 160 478 vis/slave-chord-event 24;
#X obj 160 498 vis/slave-chord-event 25;
#X obj 160 518 vis/slave-chord-event 26;
#X obj 160 538 vis/slave-chord-event 27;
#X obj 160 558 vis/slave-chord-event 28;
#X obj 160 578 vis/slave-chord-event 29;
#X obj 160 598 vis/slave-chord-event 30;
#X connect 0 0 5 0;
#X connect 1 0 4 1;
#X connect 2 0 5 0;
#X connect 4 0 3 0;
#X connect 6 0 4 0;
#X connect 7 0 8 0;
#X connect 8 0 2 0;
#X connect 18 0 20 0;
#X restore -40 41 pd gem_visualization;
#N canvas 137 292 600 430 midi_manipulations 1;
#X obj -204 -104 r reset-analysis;
#X msg -266 -39 flush;
#X obj -314 163 / 4;
#X obj -314 116 unpack 0 0 0 0 0;
#X obj -245 161 s ticks/4;
#X obj -266 -17 t a b;
#X obj -195 0 s reset-analysis;
#X obj -266 -103 openpanel;
#X msg -266 -83 read \$1;
#X obj -209 27 midi_player;
#X obj -146 115 s end-analysis;
#X obj -170 137 sort-midi;
#X msg -266 -137 symbol ./Git/pd-symbolic/testfiles/midi-chord-loops/2b-homophonic
;
#X obj -266 -158 r load_midi_file;
#X obj -146 93 t b b;
#X obj -221 137 s tempo;
#X obj -314 141 uanz;
#X obj -266 -62 t b a;
#X obj -314 184 s bars;
#X obj 85 -59 r tempo;
#X obj 155 -39 r bars;
#X obj 30 -55 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 30 -34 play \$1;
#N canvas 1227 348 357 336 midi-loop-player 0;
#X obj 50 26 route play;
#X obj 144 81 /;
#X obj 144 35 inlet;
#X obj 20 69 sel 0;
#X obj 50 5 inlet;
#X obj 208 34 inlet;
#X obj 208 55 * 16;
#X obj 123 138 + 1;
#X obj 93 106 metro 500;
#X obj 208 79 + 1;
#X obj 93 138 f 0;
#X msg 195 174 0;
#X msg 20 94 0;
#X floatatom 225 146 5 0 0 0 - - -;
#X msg 144 58 15000 \$1;
#X obj 157 279 tabread fill-onsets;
#X obj 142 218 panic;
#X obj 93 218 outlet;
#X floatatom 288 93 5 0 0 0 - - -;
#X obj 142 196 sel 0 31;
#X obj 93 173 t f f;
#X floatatom 24 281 5 0 0 0 - - -;
#X obj 97 279 noteout;
#X connect 0 0 3 0;
#X connect 0 0 8 0;
#X connect 1 0 8 1;
#X connect 1 0 13 0;
#X connect 2 0 14 0;
#X connect 3 0 12 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 7 0 10 1;
#X connect 8 0 10 0;
#X connect 10 0 7 0;
#X connect 10 0 20 0;
#X connect 11 0 10 1;
#X connect 12 0 10 1;
#X connect 14 0 1 0;
#X connect 18 0 8 1;
#X connect 19 0 16 0;
#X connect 19 1 11 0;
#X connect 20 0 17 0;
#X connect 20 0 21 0;
#X connect 20 1 19 0;
#X restore 30 -12 pd midi-loop-player;
#X floatatom 92 -35 5 0 0 0 - - -;
#X obj -82 -11 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg -82 10 play \$1 \, loop 1;
#X obj -53 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -313 24 noteout;
#X msg -204 -82 \; fill-pattern const -1 \; fill-onsets const 0 \;
;
#X obj 30 35 s current_step;
#X floatatom 41 13 5 0 0 0 - - -;
#X floatatom 142 -65 5 0 0 0 - - -;
#N canvas 887 302 766 671 get-chord-progression 0;
#X obj -115 11 inlet;
#X obj -168 127 midi_chord_estimator;
#X obj -188 96 make_chord;
#X obj -40 50 unpack 0 0 0 0;
#X obj -40 94 /;
#X obj -25 72 r ticks/4;
#X obj 14 95 != 0;
#X obj -40 115 * 4;
#X obj 205 108 route;
#X obj 205 73 t l f;
#X obj -40 137 pack;
#X obj -40 158 change_pack;
#X obj 205 137 tabwrite fill-pattern;
#X obj 222 159 tabwrite fill-onsets;
#X obj 339 100 - 1;
#X obj 351 159 table fill-onsets 32;
#X obj 352 137 table fill-pattern 32;
#X obj -115 33 t l l;
#X obj -168 247 add2list prepend;
#X msg -40 179 \$2 \$1;
#X obj -40 249 add2list prepend;
#X obj 160 209 r reset-analysis;
#X obj -40 291 list length;
#X obj -168 291 list length;
#X obj -69 327 ==;
#X obj -69 349 sel 1;
#X obj -84 407 list;
#X obj -168 270 t l l;
#X obj -40 269 t l l;
#X obj -34 405 list;
#X obj -84 427 drip 0;
#X obj -34 426 drip 0;
#X obj -40 200 route 1 0;
#X obj 67 249 add2list prepend;
#X obj 46 408 list;
#X obj 46 429 drip 0;
#X obj -69 371 t b b b;
#X obj 25 498 -;
#X obj 25 474 swap;
#X obj -34 447 t f f;
#X text 87 282 listfind para a√±adir 32 0 en caso de que no este presente
;
#X obj -32 522 pack s f f;
#X obj 73 473 f 0;
#X obj 103 473 + 1;
#X obj 73 494 mod 8;
#X obj 46 451 t f b;
#X obj 58 554 s;
#X obj 73 515 makefilename master-chord-fill-%d;
#X obj -217 617 print a;
#X obj 125 570 print c;
#X obj -129 562 print b;
#X connect 0 0 17 0;
#X connect 1 0 18 0;
#X connect 2 0 1 0;
#X connect 2 0 48 0;
#X connect 3 0 4 0;
#X connect 3 2 6 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 10 1;
#X connect 7 0 10 0;
#X connect 8 0 13 0;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 9 1 8 1;
#X connect 9 1 14 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 11 0 19 0;
#X connect 14 0 13 1;
#X connect 14 0 12 1;
#X connect 17 0 2 0;
#X connect 17 1 3 0;
#X connect 18 0 27 0;
#X connect 19 0 32 0;
#X connect 20 0 28 0;
#X connect 21 0 20 1;
#X connect 21 0 33 1;
#X connect 21 0 18 1;
#X connect 22 0 24 1;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 36 0;
#X connect 26 0 30 0;
#X connect 27 0 23 0;
#X connect 27 1 26 1;
#X connect 28 0 22 0;
#X connect 28 1 29 1;
#X connect 29 0 31 0;
#X connect 30 0 41 0;
#X connect 31 0 39 0;
#X connect 32 0 20 0;
#X connect 32 1 33 0;
#X connect 33 0 34 1;
#X connect 34 0 35 0;
#X connect 35 0 45 0;
#X connect 36 0 26 0;
#X connect 36 1 29 0;
#X connect 36 2 34 0;
#X connect 37 0 41 2;
#X connect 37 0 49 0;
#X connect 38 0 37 0;
#X connect 38 1 37 1;
#X connect 39 0 41 1;
#X connect 39 0 50 0;
#X connect 39 1 38 0;
#X connect 41 0 46 0;
#X connect 42 0 43 0;
#X connect 42 0 44 0;
#X connect 43 0 42 1;
#X connect 44 0 47 0;
#X connect 45 0 38 1;
#X connect 45 1 42 0;
#X connect 47 0 46 1;
#X restore -170 161 pd get-chord-progression;
#X obj -146 71 uanz;
#X obj -314 92 uanz;
#N canvas 276 419 450 300 make-chord-variations 0;
#X obj 18 3 inlet;
#X restore -170 187 pd make-chord-variations;
#X connect 0 0 29 0;
#X connect 1 0 5 0;
#X connect 2 0 18 0;
#X connect 3 0 16 0;
#X connect 3 3 4 0;
#X connect 3 4 15 0;
#X connect 5 0 9 0;
#X connect 5 1 6 0;
#X connect 5 1 16 1;
#X connect 5 1 35 1;
#X connect 5 1 34 1;
#X connect 7 0 8 0;
#X connect 8 0 17 0;
#X connect 9 0 28 0;
#X connect 9 1 11 0;
#X connect 9 2 35 0;
#X connect 9 3 34 0;
#X connect 11 0 33 0;
#X connect 12 0 7 0;
#X connect 13 0 12 0;
#X connect 14 0 10 0;
#X connect 14 1 11 1;
#X connect 14 1 27 0;
#X connect 16 0 2 0;
#X connect 17 0 1 0;
#X connect 17 1 9 0;
#X connect 19 0 23 1;
#X connect 20 0 23 2;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 30 0;
#X connect 23 0 31 0;
#X connect 24 0 23 1;
#X connect 25 0 26 0;
#X connect 26 0 9 0;
#X connect 32 0 23 2;
#X connect 34 0 14 0;
#X connect 35 0 3 0;
#X restore 64 21 pd midi_manipulations;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 19 0 18 0;
#X connect 21 0 9 0;
#X connect 23 0 22 0;
