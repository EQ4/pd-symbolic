#N canvas 1277 156 580 394 10;
#X declare -path ../abs;
#X declare -lib jasch_lib;
#X obj -354 39 cnv 15 250 150 empty empty empty 20 12 0 14 -233017
-66577 0;
#X text -319 121 comment;
#X obj -342 80 hsl 225 15 0 200 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 62 register;
#X text -339 78 closed <<<<<< >>>>> open (4 octaves);
#X text -347 144 allow inversions;
#X obj -345 162 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj -342 121 hsl 225 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 103 activity;
#X obj -354 39 cnv 15 250 25 empty empty empty 20 12 0 14 -162280 -66577
0;
#X text -348 42 VOICING;
#X obj -354 -81 cnv 15 250 110 empty empty empty 20 12 0 14 -233017
-66577 0;
#X obj -354 -81 cnv 15 250 25 empty empty empty 20 12 0 14 -162280
-66577 0;
#X text -298 -78 CHORD STRUCTURE;
#X obj -342 -40 hsl 225 15 0 200 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 -58 color;
#X obj -342 1 hsl 225 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X text -348 -17 substitution;
#X text -329 -1 no-subs <> diatonic <> chromatic;
#X text -341 -42 pow <> triad <> tension <> alteration;
#X text -339 119 no-change <<<<>>>> change-each-event;
#X text -354 198 https://github.com/angelfaraldo/pd-symbolic;
#X text -354 213 angel.faraldo@upf.edu ----- Barcelona \, 2015;
#X obj -280 -152 netreceive 3006 0 old;
#X obj -354 -152 path ../abs;
#X obj -354 -132 import jasch_lib;
#N canvas 1245 136 476 885 gem_visualization 0;
#X text 91 225 convert pdf to jpg (ImageMagick 6.8.9-9);
#X obj 7 274 shell;
#X obj 24 112 textfile;
#X text 81 177 compile score with lilypond;
#X text 68 134 insert the music notation into the lilypond code;
#X obj 7 47 t b b a b;
#X obj 58 68 s reset-score;
#X obj 38 424 gemhead;
#X obj 38 560 pix_texture;
#X obj 38 496 pix_image;
#X obj 38 516 color 0 0.5 0;
#X msg 74 538 env 2 \, quality 0;
#X obj 47 472 t a b;
#X msg 198 534 0 \, destroy;
#X obj 38 601 rectangle 11 3;
#X obj 38 580 translate -1.2 -0.3 1 0;
#X obj 47 319 f 0;
#X obj 77 319 + 1;
#X obj 34 295 t b;
#X obj 62 276 r reset-score;
#X msg 62 298 0;
#X obj 15 179 r compile;
#X obj 27 226 r convert;
#X obj 81 381 s compile;
#X obj 64 403 s convert;
#X obj 47 360 sel 2 1 0;
#X obj 191 489 once;
#X obj 7 134 delay 100;
#X obj 47 340 pipe 50;
#X obj 191 557 gemwin 1;
#X msg 24 89 write /home/angel/.lily_music.txt cr;
#X msg 7 157 python .lilypondize.py;
#X msg 15 201 lilypond .lily_code.ly;
#X msg 27 248 convert -density 600 .lily_code.pdf .lily_code.jpg;
#X msg 47 449 open /home/angel/.lily_code.jpg;
#X msg 54 779 font ./WorkSans-Regular.ttf \, alias 1;
#X obj 38 850 text2d C:maj;
#X obj 114 757 text2d A:min;
#X obj 114 665 separator;
#X obj 54 731 loadbang;
#X obj 123 711 r chord2;
#X obj 123 734 tosymbol;
#X obj 246 683 s chord1;
#X obj 304 683 s chord2;
#X obj 63 827 tosymbol;
#X obj 63 803 r chord1;
#X obj 304 621 loadbang;
#X msg 246 661 C:maj;
#X obj 38 622 translateXYZ -6 2 0;
#X obj 114 688 translateXYZ 8 0 0;
#X msg 304 661 Am7;
#X obj 7 5 r rhythmic_seq;
#X obj 7 26 prepend set;
#X msg 191 512 reset \, dimen 500 200 \, title Loop \, create \, 1
;
#X connect 1 1 18 0;
#X connect 5 0 27 0;
#X connect 5 1 30 0;
#X connect 5 2 2 0;
#X connect 5 3 6 0;
#X connect 7 0 9 0;
#X connect 8 0 15 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X connect 11 0 8 0;
#X connect 12 0 9 0;
#X connect 12 1 11 0;
#X connect 12 1 26 0;
#X connect 13 0 29 0;
#X connect 14 0 48 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 16 0 28 0;
#X connect 17 0 16 1;
#X connect 18 0 16 0;
#X connect 19 0 20 0;
#X connect 20 0 16 1;
#X connect 21 0 32 0;
#X connect 22 0 33 0;
#X connect 25 0 34 0;
#X connect 25 1 24 0;
#X connect 25 2 23 0;
#X connect 26 0 53 0;
#X connect 27 0 31 0;
#X connect 28 0 25 0;
#X connect 30 0 2 0;
#X connect 31 0 1 0;
#X connect 32 0 1 0;
#X connect 33 0 1 0;
#X connect 34 0 12 0;
#X connect 35 0 36 0;
#X connect 35 0 37 0;
#X connect 38 0 49 0;
#X connect 39 0 35 0;
#X connect 40 0 41 0;
#X connect 41 0 37 0;
#X connect 44 0 36 0;
#X connect 45 0 44 0;
#X connect 46 0 47 0;
#X connect 46 0 50 0;
#X connect 47 0 42 0;
#X connect 48 0 36 0;
#X connect 48 0 38 0;
#X connect 49 0 37 0;
#X connect 50 0 43 0;
#X connect 51 0 52 0;
#X connect 52 0 5 0;
#X connect 53 0 29 0;
#X restore -354 -112 pd gem_visualization;
#N canvas 555 134 1356 945 midi_analysis 0;
#X obj -96 487 r reset-analysis;
#X msg -266 -39 flush;
#X obj -233 260 midi_chord_estimator;
#X obj -233 236 make_chord;
#X obj -260 120 / 4;
#X obj -250 73 unpack 0 0 0 0 0;
#X obj -99 192 unpack 0 0 0 0;
#X obj -181 118 s ticks/4;
#X obj -99 238 /;
#X obj -84 216 r ticks/4;
#X obj -45 239 != 0;
#X obj -99 259 * 4;
#X obj -99 280 + 1;
#X obj -126 170 t l l;
#X obj -266 -17 t a b;
#X obj -195 0 s reset-analysis;
#X obj -128 356 t l;
#X obj -233 312 list prepend;
#X obj -209 280 r reset-analysis;
#X obj -266 -103 openpanel;
#X msg -266 -83 read \$1;
#X obj -209 27 midi_player;
#X obj -102 126 s end-analysis;
#X obj -99 414 route;
#X obj -99 351 t l f;
#X obj -99 309 pack;
#X obj 529 500 s rhythmic_seq;
#X obj -233 346 pop_first;
#X obj -99 330 change_pack;
#X obj -99 443 tabwrite fill-pattern;
#X obj -126 148 sort-midi;
#X obj 472 6 tabread fill-pattern;
#X obj 429 -85 t f b;
#X obj 429 -63 until;
#X obj 472 29 pack;
#X msg 517 73 \$2 \$1;
#X obj 429 -152 r end-analysis;
#X obj -182 378 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -233 372 s chord;
#X obj 517 94 unpack;
#X obj 585 157 sel 0 1;
#X obj 517 116 t f f;
#X obj 529 467 list2symbol;
#N canvas 925 229 525 795 durations2lilypond 0;
#X obj 25 14 sel 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
21 22 23 24 25 26 27 28 29 30 31 32;
#X obj 25 -12 inlet;
#X obj 467 816 outlet;
#X msg 120 563 symbol;
#X msg 132 540 symbol;
#X msg 150 494 symbol;
#X msg 160 470 symbol;
#X msg 194 401 symbol;
#X msg 205 377 symbol;
#X msg 215 354 symbol;
#X msg 226 330 symbol;
#X msg 236 306 symbol;
#X msg 247 282 symbol;
#X msg 258 259 symbol;
#X msg 268 235 symbol;
#X msg 279 213 symbol;
#X msg 289 189 symbol;
#X msg 300 166 symbol;
#X msg 311 142 symbol;
#X msg 321 114 symbol;
#X msg 332 93 symbol;
#X msg 342 68 symbol;
#X msg 25 775 _16;
#X msg 35 751 _8;
#X msg 46 728 _8.;
#X msg 56 704 _4;
#X msg 67 682;
#X msg 99 611 _2;
#X msg 141 516 _2.;
#X msg 173 447 _2..;
#X msg 183 423 _1;
#X msg 353 48 _c1~ c1;
#X msg 88 635 _4. r16;
#X msg 77 658 _4.;
#X msg 108 587 _2 r16;
#X connect 0 0 22 0;
#X connect 0 1 23 0;
#X connect 0 2 24 0;
#X connect 0 3 25 0;
#X connect 0 4 26 0;
#X connect 0 5 33 0;
#X connect 0 6 32 0;
#X connect 0 7 27 0;
#X connect 0 8 34 0;
#X connect 0 9 3 0;
#X connect 0 10 4 0;
#X connect 0 11 28 0;
#X connect 0 12 5 0;
#X connect 0 13 6 0;
#X connect 0 14 29 0;
#X connect 0 15 30 0;
#X connect 0 16 7 0;
#X connect 0 17 8 0;
#X connect 0 18 9 0;
#X connect 0 19 10 0;
#X connect 0 20 11 0;
#X connect 0 21 12 0;
#X connect 0 22 13 0;
#X connect 0 23 14 0;
#X connect 0 24 15 0;
#X connect 0 25 16 0;
#X connect 0 26 17 0;
#X connect 0 27 18 0;
#X connect 0 28 19 0;
#X connect 0 29 20 0;
#X connect 0 30 21 0;
#X connect 0 31 31 0;
#X connect 1 0 0 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 2 0;
#X connect 12 0 2 0;
#X connect 13 0 2 0;
#X connect 14 0 2 0;
#X connect 15 0 2 0;
#X connect 16 0 2 0;
#X connect 17 0 2 0;
#X connect 18 0 2 0;
#X connect 19 0 2 0;
#X connect 20 0 2 0;
#X connect 21 0 2 0;
#X connect 22 0 2 0;
#X connect 23 0 2 0;
#X connect 24 0 2 0;
#X connect 25 0 2 0;
#X connect 26 0 2 0;
#X connect 27 0 2 0;
#X connect 28 0 2 0;
#X connect 29 0 2 0;
#X connect 30 0 2 0;
#X connect 31 0 2 0;
#X connect 32 0 2 0;
#X connect 33 0 2 0;
#X connect 34 0 2 0;
#X restore 550 240 pd durations2lilypond;
#X obj 550 284 strtok _;
#X obj 550 261 tosymbol;
#X obj 550 379 list2symbol;
#X msg 613 359 symbol;
#X obj 613 339 loadbang;
#X obj 633 403 t l;
#X obj 630 382 r reset-analysis;
#X obj 529 425 list;
#X obj 478 392 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 453 -16 t f f f;
#X obj 430 198 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg -266 -137 symbol ./Git/pd-symbolic/testfiles/midi-chord-loops/2b-homophonic
;
#X obj -266 -158 r load_midi_file;
#X obj -102 104 t b b;
#X obj -157 94 s tempo;
#X obj -260 98 uanz;
#X obj -266 -62 t b a;
#X obj -260 141 s bars;
#X obj -82 465 tabwrite fill-onsets;
#X obj 35 406 - 1;
#X obj 307 -71 r tempo;
#X obj 363 -46 r bars;
#X obj 252 -67 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 252 -46 play \$1;
#N canvas 303 483 551 577 midi-loop-player 0;
#X obj 116 422 outlet;
#X obj 93 64 route play;
#X obj 187 119 /;
#X obj 187 73 inlet;
#X obj 63 107 sel 0;
#X obj 93 43 inlet;
#X obj 251 72 inlet;
#X obj 251 93 * 16;
#X obj 166 176 + 1;
#X obj 136 144 metro 500;
#X obj 136 201 t f f;
#X obj 178 231 mod 32;
#X obj 251 117 + 1;
#X obj 136 230 sel 0;
#X obj 136 176 f 0;
#X msg 106 254 0;
#X obj 178 288 print;
#X msg 63 132 0;
#X floatatom 268 184 5 0 0 0 - - -;
#X msg 187 96 15000 \$1;
#X obj 214 357 tabread fill-onsets;
#X floatatom 204 260 5 0 0 0 - - -;
#X obj 276 271 panic;
#X connect 1 0 4 0;
#X connect 1 0 9 0;
#X connect 2 0 9 1;
#X connect 2 0 18 0;
#X connect 3 0 19 0;
#X connect 4 0 17 0;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X connect 7 0 12 0;
#X connect 8 0 14 1;
#X connect 9 0 14 0;
#X connect 10 0 13 0;
#X connect 10 1 11 0;
#X connect 11 0 16 0;
#X connect 11 0 21 0;
#X connect 12 0 13 1;
#X connect 12 0 11 1;
#X connect 13 0 15 0;
#X connect 14 0 8 0;
#X connect 14 0 10 0;
#X connect 15 0 14 0;
#X connect 17 0 14 1;
#X connect 19 0 2 0;
#X restore 252 -24 pd midi-loop-player;
#X floatatom 314 -47 5 0 0 0 - - -;
#X obj -82 -11 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg -82 10 play \$1 \, loop 1;
#X obj -220 118 route;
#X obj -9 121 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 47 465 table fill-onsets 32;
#X obj 48 443 table fill-pattern 32;
#X obj -31 70 noteout;
#X msg 429 -106 32;
#X msg -96 509 \; fill-pattern const -1 \; fill-onsets const 0 \;;
#X obj 472 51 route -1;
#X obj 493 -39 - 1;
#X msg 474 -64 31;
#X obj 453 -39 f 31;
#X msg 635 -70 32;
#X obj 544 141 - 0;
#X obj 544 161 abs;
#X obj 544 182 sel 0;
#X obj 453 156 sel 0;
#X obj 550 402 list append;
#X obj 550 306 list prepend;
#X obj 619 285 tosymbol;
#X msg 614 182 c;
#X msg 585 182 r;
#X obj 429 -129 uanz;
#X obj 465 -129 r reset-analysis;
#X floatatom -194 158 5 0 0 0 - - -;
#X obj 453 179 t b b b;
#X obj 777 19 -;
#X floatatom 777 42 5 0 0 0 - - -;
#X obj 813 -6 f 0;
#X obj 771 -6 swap;
#X obj 319 420 t l;
#X obj 316 399 r reset-analysis;
#X obj 297 482 sum;
#X obj 215 509 list split 1;
#X obj 297 523 -;
#X msg 297 503 32 \$1;
#X floatatom 297 546 5 0 0 0 - - -;
#X obj 215 443 list;
#X obj 215 465 t l l;
#X obj 215 553 +;
#X obj 215 579 list append;
#X obj 236 419 list prepend;
#X obj 215 601 drip 0;
#X obj 550 209 t f f;
#X connect 0 0 78 0;
#X connect 1 0 14 0;
#X connect 2 0 17 0;
#X connect 3 0 2 0;
#X connect 4 0 61 0;
#X connect 5 0 59 0;
#X connect 5 1 72 1;
#X connect 5 1 95 0;
#X connect 5 3 7 0;
#X connect 5 4 58 0;
#X connect 6 0 8 0;
#X connect 6 2 10 0;
#X connect 8 0 11 0;
#X connect 9 0 8 1;
#X connect 10 0 25 1;
#X connect 11 0 12 0;
#X connect 12 0 25 0;
#X connect 13 0 3 0;
#X connect 13 1 6 0;
#X connect 14 0 21 0;
#X connect 14 1 15 0;
#X connect 14 1 59 1;
#X connect 16 0 17 1;
#X connect 17 0 16 0;
#X connect 17 0 27 0;
#X connect 18 0 17 1;
#X connect 19 0 20 0;
#X connect 20 0 60 0;
#X connect 21 0 76 0;
#X connect 21 1 72 0;
#X connect 21 2 5 0;
#X connect 21 3 57 0;
#X connect 23 0 62 0;
#X connect 23 0 29 0;
#X connect 24 0 23 0;
#X connect 24 1 23 1;
#X connect 24 1 63 0;
#X connect 25 0 28 0;
#X connect 27 0 38 0;
#X connect 27 1 37 0;
#X connect 28 0 24 0;
#X connect 30 0 13 0;
#X connect 31 0 34 0;
#X connect 32 0 33 0;
#X connect 32 1 81 0;
#X connect 32 1 83 0;
#X connect 33 0 82 0;
#X connect 34 0 79 0;
#X connect 35 0 39 0;
#X connect 36 0 93 0;
#X connect 39 0 41 0;
#X connect 39 1 40 0;
#X connect 40 0 92 0;
#X connect 40 1 91 0;
#X connect 41 0 84 1;
#X connect 41 1 84 0;
#X connect 42 0 26 0;
#X connect 43 0 45 0;
#X connect 44 0 89 0;
#X connect 45 0 44 0;
#X connect 46 0 88 0;
#X connect 47 0 46 1;
#X connect 48 0 47 0;
#X connect 49 0 88 1;
#X connect 50 0 88 1;
#X connect 51 0 42 0;
#X connect 52 0 51 0;
#X connect 53 0 87 0;
#X connect 53 1 31 0;
#X connect 53 2 34 1;
#X connect 55 0 19 0;
#X connect 56 0 55 0;
#X connect 57 0 22 0;
#X connect 57 1 30 1;
#X connect 57 1 73 0;
#X connect 59 0 4 0;
#X connect 60 0 1 0;
#X connect 60 1 21 0;
#X connect 63 0 62 1;
#X connect 63 0 29 1;
#X connect 64 0 68 1;
#X connect 65 0 68 2;
#X connect 66 0 67 0;
#X connect 67 0 68 0;
#X connect 69 0 68 1;
#X connect 70 0 71 0;
#X connect 71 0 21 0;
#X connect 72 1 30 0;
#X connect 77 0 32 0;
#X connect 79 1 35 0;
#X connect 80 0 82 1;
#X connect 81 0 82 1;
#X connect 82 0 53 0;
#X connect 82 0 80 0;
#X connect 83 0 84 1;
#X connect 83 0 99 0;
#X connect 84 0 85 0;
#X connect 85 0 86 0;
#X connect 86 1 114 0;
#X connect 87 0 54 0;
#X connect 87 0 96 0;
#X connect 88 0 49 0;
#X connect 88 0 51 1;
#X connect 89 0 46 0;
#X connect 90 0 89 1;
#X connect 91 0 90 0;
#X connect 92 0 90 0;
#X connect 93 0 77 0;
#X connect 94 0 93 1;
#X connect 96 0 51 0;
#X connect 97 0 98 0;
#X connect 97 0 99 0;
#X connect 99 0 100 1;
#X connect 100 0 97 0;
#X connect 100 1 97 1;
#X connect 101 0 112 1;
#X connect 102 0 112 1;
#X connect 103 0 106 0;
#X connect 104 0 110 0;
#X connect 104 1 111 1;
#X connect 105 0 107 0;
#X connect 105 0 110 1;
#X connect 106 0 105 0;
#X connect 108 0 109 0;
#X connect 109 0 104 0;
#X connect 109 1 103 0;
#X connect 110 0 111 0;
#X connect 111 0 113 0;
#X connect 112 0 101 0;
#X connect 112 0 108 1;
#X connect 114 0 43 0;
#X restore -250 -132 pd midi_analysis;
#X obj 13 -51 r tempo;
#X obj 30 19 r bars;
#X floatatom 26 -10 5 0 0 0 - - -;
#X floatatom 45 50 5 0 0 0 - - -;
#X floatatom -38 -99 5 0 0 0 - - -;
#X obj 14 127 r allow_inversion;
#X floatatom 14 150 5 0 0 0 - - -;
#X obj 130 21 r substitution;
#X floatatom 126 58 5 0 0 0 - - -;
#X floatatom 151 -18 5 0 0 0 - - -;
#X obj 132 -61 r activity;
#X obj -67 91 r color;
#X floatatom -88 122 5 0 0 0 - - -;
#X floatatom -58 31 5 0 0 0 - - -;
#X obj -54 7 r register;
#N canvas 784 495 324 195 adt 0;
#X obj 13 55 r density;
#X obj 13 130 list append;
#X obj 13 81 populate_rhythm;
#X obj 76 105 populate_rhythm;
#X obj 100 34 tabdump fill-onsets;
#X obj 100 11 r end-analysis;
#X obj 100 57 list split 16;
#X obj 13 155 s slave-onsets;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 1 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 2 1;
#X connect 6 1 3 1;
#X restore -226 -112 pd adt;
#X obj -36 -138 r density;
#X obj 36 -106 s density;
#X floatatom 65 -140 5 0 0 0 - - -;
#X connect 28 0 30 0;
#X connect 29 0 31 0;
#X connect 33 0 34 0;
#X connect 35 0 36 0;
#X connect 38 0 37 0;
#X connect 39 0 40 0;
#X connect 42 0 41 0;
#X connect 44 0 32 0;
#X connect 46 0 45 0;
